<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Ø¨ÙˆØ§Ø¨Ø© Ø³Ø¨Ø§Ù‡ÙŠ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠØ© â€“ Ù…Ø¬Ù…Ø¹ Ù…ÙƒØ© Ø§Ù„Ø·Ø¨ÙŠ Ø¨Ø§Ù„Ø²Ø§Ù‡Ø± (Ø§Ù„Ø¥ØµØ¯Ø§Ø± 2025)</title>
<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" rel="stylesheet">
<script src="https://cdn.tailwindcss.com"></script>
<link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@300;400;600;700&display=swap" rel="stylesheet">
<style>
  :root {
    --maroon: #7B1E24;
    --burgundy: #C55A44;
    --gold: #E9C46A;
    --brand1: #7B1E24;
    --brand2: #C55A44;
  }
  
  body {
    font-family: 'Tajawal', sans-serif;
    background: linear-gradient(180deg, #fff, #faf5f4 45%, #fff);
    overflow-x: hidden;
    margin: 0;
    padding: 0;
  }
  
  header {
    position: sticky;
    top: 0;
    z-index: 50;
    background: #fff;
    box-shadow: 0 2px 10px rgba(0,0,0,.08);
  }
  
  .container {
    max-width: 1280px;
    margin: 0 auto;
    padding: 0 1rem;
  }
  
  .hero {
    background: linear-gradient(180deg, var(--maroon), var(--burgundy));
    color: #fff;
    text-align: center;
  }
  
  .hero-inner {
    padding: 56px 16px 72px;
  }
  
  .hero-logo-wrap {
    position: relative;
    display: inline-block;
  }
  
  .hero-logo-wrap::before {
    content: "";
    position: absolute;
    inset: -28px;
    border-radius: 9999px;
    background: radial-gradient(closest-side, rgba(233,196,106,.22), transparent 70%);
    filter: blur(1px);
  }
  
  .hero img {
    position: relative;
    z-index: 1;
    width: 150px;
    height: auto;
    filter: drop-shadow(0 0 24px var(--gold));
    animation: glow 3s ease-in-out infinite alternate;
  }
  
  @keyframes glow {
    from { filter: drop-shadow(0 0 10px var(--gold)); }
    to { filter: drop-shadow(0 0 32px var(--gold)); }
  }
  
  .sidebar {
    width: 270px;
    background: linear-gradient(180deg, var(--maroon), var(--burgundy));
    color: #fff;
    border-radius: 14px;
    padding: 1rem;
  }
  
  .nav-link {
    display: block;
    padding: .55rem .8rem;
    border-radius: .6rem;
    transition: .2s;
    color: white;
    text-decoration: none;
    margin-bottom: 0.25rem;
  }
  
  .nav-link:hover {
    background-color: rgba(255,255,255,.16);
    transform: translateX(-3px);
  }
  
  .nav-link.active {
    background-color: rgba(255,255,255,.28);
    font-weight: 700;
  }
  
  .card {
    background: #fff;
    border: 1px solid #eee;
    border-radius: 14px;
    box-shadow: 0 6px 16px rgba(0,0,0,.06);
  }
  
  .hidden {
    display: none !important;
  }
  
  #scrollTopBtn {
    position: fixed;
    left: 18px;
    bottom: 18px;
    display: none;
    width: 48px;
    height: 48px;
    border-radius: 9999px;
    background: var(--gold);
    color: var(--maroon);
    box-shadow: 0 8px 18px rgba(123,30,36,.35);
    font-size: 20px;
    border: none;
    cursor: pointer;
    place-items: center;
  }
  
  #scrollTopBtn:hover {
    transform: scale(1.08);
  }
  
  .modal {
    position: fixed;
    inset: 0;
    background: rgba(0,0,0,.55);
    display: none;
    align-items: center;
    justify-content: center;
    padding: 16px;
    z-index: 60;
  }
  
  .modal.open {
    display: flex;
  }
  
  .modal .panel {
    background: #fff;
    border-radius: 14px;
    overflow: hidden;
    width: min(1200px, 96vw);
    height: 80vh;
  }
  
  /* --- FMS tabs & cards --- */
  .tabs {
    display: flex;
    gap: 8px;
    overflow: auto;
    padding-bottom: 8px;
  }
  
  .tab {
    white-space: nowrap;
    border: 1px solid #e5e7eb;
    border-radius: 9999px;
    background: #fff;
    color: var(--maroon);
    padding: .4rem .9rem;
    cursor: pointer;
  }
  
  .tab.active {
    background: var(--maroon);
    color: #fff;
    border-color: transparent;
  }
  
  .cards-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(230px, 1fr));
    gap: 14px;
  }
  
  .doc-card {
    display: flex;
    flex-direction: column;
    gap: 10px;
    padding: 14px;
    border: 1px solid #eee;
    border-radius: 12px;
    background: #fff;
    height: 100%;
  }
  
  .doc-code {
    color: var(--maroon);
    font-weight: 700;
  }
  
  .content-section {
    display: none;
  }
  
  .content-section.active {
    display: block;
  }
  
  .gold-link {
    display: inline-flex;
    align-items: center;
    gap: 0.5rem;
    color: var(--maroon);
    text-decoration: none;
    padding: 0.5rem 1rem;
    border: 1px solid var(--gold);
    border-radius: 8px;
    background: rgba(233, 196, 106, 0.1);
    transition: all 0.3s;
  }
  
  .gold-link:hover {
    background: var(--gold);
    color: var(--maroon);
  }
  
  .table {
    width: 100%;
    border-collapse: collapse;
  }
  
  .table th, .table td {
    padding: 0.75rem;
    border: 1px solid #e5e7eb;
    text-align: right;
  }
  
  .table th {
    background-color: #f9fafb;
    font-weight: 700;
  }
  
  .chip {
    display: inline-block;
    padding: 0.25rem 0.5rem;
    background: #f3f4f6;
    border-radius: 9999px;
    font-size: 0.75rem;
    margin-right: 0.5rem;
  }
  
  .grid-cards {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
    gap: 1rem;
  }
  
  .box {
    background: white;
    border-radius: 14px;
    box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
    overflow: hidden;
  }
  
  .kpi-table {
    width: 100%;
    border-collapse: collapse;
    font-size: 0.9rem;
  }
  
  .kpi-table th, .kpi-table td {
    padding: 0.5rem;
    border: 1px solid #e5e7eb;
    text-align: center;
  }
  
  .kpi-table th {
    background-color: var(--maroon);
    color: white;
    font-weight: 600;
  }
  
  .kpi-table tr:nth-child(even) {
    background-color: #f9fafb;
  }
  
  .good {
    background-color: #dcfce7 !important;
    color: #166534;
  }
  
  .warning {
    background-color: #fef9c3 !important;
    color: #854d0e;
  }
  
  .critical {
    background-color: #fee2e2 !important;
    color: #991b1b;
  }
</style>
</head>
<body class="min-h-screen">

<!-- Header -->
<header>
  <div class="container flex items-center justify-between px-4 py-3">
    <div class="flex items-center gap-3">
      <img id="logoSmall" class="h-12 w-auto rounded bg-white p-1 shadow" alt="Ø´Ø¹Ø§Ø± Ø§Ù„Ù…Ø¬Ù…Ø¹" src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTUwIiBoZWlnaHQ9IjE1MCIgdmlld0JveD0iMCAwIDE1MCAxNTAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSIxNTAiIGhlaWdodD0iMTUwIiByeD0iMTUiIGZpbGw9IiM3QjFFMjQiLz4KPHRleHQgeD0iNzUiIHk9Ijc1IiBmb250LWZhbWlseT0iQXJpYWwiIGZvbnQtc2l6ZT0iMTQiIGZpbGw9IndoaXRlIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiBkb21pbmFudC1iYXNlbGluZT0ibWlkZGxlIj7Yp9mE2YXYqSDYp9mE2KfZhjwvdGV4dD4KPC9zdmc+">
      <button id="btnSetLogo" class="text-[var(--maroon)] text-sm underline underline-offset-4 hover:text-[var(--burgundy)]">
        ØªØºÙŠÙŠØ±/ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø´Ø¹Ø§Ø±
      </button>
      <input id="logoPicker" type="file" accept="image/*" class="hidden">
    </div>
    <div class="text-center">
      <div class="text-lg md:text-xl font-bold text-gray-800">Ø¨ÙˆØ§Ø¨Ø© Ø³Ø¨Ø§Ù‡ÙŠ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠØ©</div>
      <div class="text-xs md:text-sm text-gray-500">Ù…Ø¬Ù…Ø¹ Ù…ÙƒØ© Ø§Ù„Ø·Ø¨ÙŠ Ø¨Ø§Ù„Ø²Ø§Ù‡Ø± â€“ Ø§Ù„Ø¥ØµØ¯Ø§Ø± 2025</div>
    </div>
    <div class="flex items-center gap-2">
      <a href="https://m2020m.org" target="_blank" class="px-3 py-2 rounded text-[var(--maroon)] hover:bg-gray-100">ğŸ¥ Ù…ÙˆÙ‚Ø¹ Ø§Ù„Ù…Ø¬Ù…Ø¹</a>
      <button onclick="window.print()" class="bg-[var(--maroon)] hover:bg-[var(--burgundy)] text-white px-4 py-2 rounded"><i class="fas fa-print ml-2"></i> Ø·Ø¨Ø§Ø¹Ø© / PDF</button>
    </div>
  </div>
</header>

<!-- Hero -->
<section class="hero">
  <div class="hero-inner container">
    <div class="hero-logo-wrap">
      <img id="logoHero" alt="Ø´Ø¹Ø§Ø± Ù…Ø¬Ù…Ø¹ Ù…ÙƒØ© Ø§Ù„Ø·Ø¨ÙŠ" src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTUwIiBoZWlnaHQ9IjE1MCIgdmlld0JveD0iMCAwIDE1MCAxNTAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSIxNTAiIGhlaWdodD0iMTUwIiByeD0iMTUiIGZpbGw9IiM3QjFFMjQiLz4KPHRleHQgeD0iNzUiIHk9Ijc1IiBmb250LWZhbWlseT0iQXJpYWwiIGZvbnQtc2l6ZT0iMTQiIGZpbGw9IndoaXRlIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiBkb21pbmFudC1iYXNlbGluZT0ibWlkZGxlIj7Yp9mE2YXYqSDYp9mE2KfZhjwvdGV4dD4KPC9zdmc+">
    </div>
    <h1 class="text-3xl md:text-4xl font-bold mt-4">Ø¨ÙˆØ§Ø¨Ø© Ø³Ø¨Ø§Ù‡ÙŠ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠØ©</h1>
    <p class="text-base md:text-lg opacity-95 mt-1">Ù…Ø¬Ù…Ø¹ Ù…ÙƒØ© Ø§Ù„Ø·Ø¨ÙŠ Ø¨Ø§Ù„Ø²Ø§Ù‡Ø± â€“ Ø§Ù„Ø¥ØµØ¯Ø§Ø± 2025</p>
    <div class="text-[13px] md:text-[14px] mt-2" style="color:#f8e8cc">Ø¨ÙˆØ§Ø¨Ø© Ø¯Ø§Ø®Ù„ÙŠØ© Ù„Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„ÙˆØ«Ø§Ø¦Ù‚ ÙˆØ§Ù„Ù…Ø¹Ø§ÙŠÙŠØ± â€” Ù„Ø§ ØªØªØ¶Ù…Ù† Ø£ÙŠ Ø§Ø¯Ø¹Ø§Ø¡ Ø¨Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø§Ù„Ø§Ø¹ØªÙ…Ø§Ø¯.</div>
  </div>
</section>

<!-- Layout -->
<div class="container px-4 py-6 flex gap-6">
  <!-- Sidebar -->
  <aside class="sidebar h-max sticky top-[92px]">
    <div class="font-bold mb-2 text-lg">ğŸ“š Ø£Ù‚Ø³Ø§Ù… Ø§Ù„Ø¨ÙˆØ§Ø¨Ø©</div>
    <a class="nav-link active" href="#home" onclick="return navTo('home')">ğŸ  Ø§Ù„ØµÙØ­Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</a>
    <a class="nav-link" href="#manuals" onclick="return navTo('manuals')">ğŸ“˜ Ø§Ù„Ø¯Ù„ÙŠÙ„ Ø§Ù„Ø¥Ø¯Ø§Ø±ÙŠ</a>
    <a class="nav-link" href="#leadership" onclick="return navTo('leadership')">ğŸ›ï¸ Ø§Ù„Ù‚ÙŠØ§Ø¯Ø© ÙˆØ§Ù„Ø­ÙˆÙƒÙ…Ø© (LD)</a>
    <a class="nav-link" href="#committees" onclick="return navTo('committees')">ğŸ‘¥ Ø§Ù„Ù„Ø¬Ø§Ù† Ø§Ù„Ø±Ø³Ù…ÙŠØ©</a>
    <a class="nav-link" href="#rm" onclick="return navTo('rm')">âš ï¸ Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø®Ø§Ø·Ø± (RM)</a>
    <a class="nav-link" href="#fms" onclick="return navTo('fms')">ğŸ› ï¸ Ø§Ù„Ø³Ù„Ø§Ù…Ø© ÙˆØ§Ù„Ù…Ø±Ø§ÙÙ‚ (FMS)</a>
    <a class="nav-link" href="#psc" onclick="return navTo('psc')">â¤ï¸ Ø³Ù„Ø§Ù…Ø© Ø§Ù„Ù…Ø±Ø¶Ù‰ (PSC)</a>
    <a class="nav-link" href="#ipc" onclick="return navTo('ipc')">ğŸ§¼ Ù…ÙƒØ§ÙØ­Ø© Ø§Ù„Ø¹Ø¯ÙˆÙ‰ (IPC)</a>
    <a class="nav-link" href="#qi" onclick="return navTo('qi')">ğŸ“ˆ Ø§Ù„Ø¬ÙˆØ¯Ø© ÙˆØ§Ù„ØªØ­Ø³ÙŠÙ† (QI)</a>
    <a class="nav-link" href="#eoc" onclick="return navTo('eoc')">ğŸš¨ Ø§Ù„Ø·ÙˆØ§Ø±Ø¦ ÙˆØ§Ù„ÙƒÙˆØ§Ø±Ø« (EOC)</a>
    <a class="nav-link" target="_blank" href="https://docs.google.com/spreadsheets/d/1cGxMCYqGfPH2UiE-nsCoytIRjIPSDYxutnq04XF5YGs/edit?gid=597653922#gid=597653922">ğŸ—‚ï¸ Ø§Ù„Ø³Ø¬Ù„ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ (Google Sheet)</a>
  </aside>

  <!-- Main Content -->
  <main class="flex-1 p-6 space-y-8">
    <!-- Ø§Ù„ØµÙØ­Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© -->
    <section id="home" class="content-section active">
      <div class="bg-white rounded-xl shadow p-6">
        <h2 class="text-2xl font-extrabold text-[var(--brand1)] mb-3">ğŸ“Œ Ø§Ù„Ø±Ø³Ø§Ù„Ø© (Mission Statement)</h2>
        <p class="text-gray-800 leading-8 text-lg">
          "Ù†Ù„ØªØ²Ù… Ø¨ØªÙ‚Ø¯ÙŠÙ… Ø±Ø¹Ø§ÙŠØ© ØµØ­ÙŠØ© Ø£ÙˆÙ„ÙŠØ© ÙˆØªØ®ØµØµÙŠØ© Ø¢Ù…Ù†Ø© ÙˆÙ…ØªÙ…Ø­ÙˆØ±Ø© Ø­ÙˆÙ„ Ø§Ù„Ù…Ø±ÙŠØ¶ ÙÙŠ Ù…Ù†Ø·Ù‚Ø© Ù…ÙƒØ© Ø§Ù„Ù…ÙƒØ±Ù…Ø©ØŒ
          Ù…Ù† Ø®Ù„Ø§Ù„ ÙØ±ÙŠÙ‚ Ø¹Ù…Ù„ Ù…Ø¤Ù‡Ù„ ÙˆÙ…Ø±Ø§ÙÙ‚ Ù…ØªØ·ÙˆØ±Ø©ØŒ Ù„ØªØ¹Ø²ÙŠØ² ØµØ­Ø© Ø§Ù„Ù…Ø¬ØªÙ…Ø¹ ÙˆØ§Ù„ÙˆØµÙˆÙ„ Ù„Ø£Ø¹Ù„Ù‰ Ù…Ø³ØªÙˆÙŠØ§Øª Ø§Ù„Ø¬ÙˆØ¯Ø©."
        </p>
        <div class="mt-4">
          <a class="gold-link" target="_blank" href="https://docs.google.com/document/d/1YUE5GKeQmY3rrHk1j3dX3ztPAwX_3GdNjG9fB_fjPsQ/edit?usp=drive_link" title="ÙˆØ«ÙŠÙ‚Ø© Ø§Ù„Ø±Ø³Ø§Ù„Ø©ØŒ Ø§Ù„Ø±Ø¤ÙŠØ©ØŒ ÙˆØ§Ù„Ù‚ÙŠÙ… Ø§Ù„Ù…ÙØ¹ØªÙ…Ø¯Ø© (LD.4.2)">
            <i class="fas fa-file-word"></i> ÙˆØ«ÙŠÙ‚Ø© Ø§Ù„Ø±Ø³Ø§Ù„Ø©ØŒ Ø§Ù„Ø±Ø¤ÙŠØ©ØŒ ÙˆØ§Ù„Ù‚ÙŠÙ… Ø§Ù„Ù…ÙØ¹ØªÙ…Ø¯Ø© (LD.4.2)
          </a>
        </div>
      </div>
    </section>

    <!-- Ø§Ù„Ø¯Ù„ÙŠÙ„ Ø§Ù„Ø¥Ø¯Ø§Ø±ÙŠ -->
    <section id="manuals" class="content-section">
      <div class="bg-white rounded-xl shadow p-6 space-y-5">
        <h2 class="text-2xl font-extrabold text-[var(--brand1)]">ğŸ“˜ Ø§Ù„Ø¯Ù„ÙŠÙ„ Ø§Ù„Ø¥Ø¯Ø§Ø±ÙŠ ÙˆØ§Ù„ØªÙ†Ø¸ÙŠÙ…ÙŠ</h2>
        <div class="space-y-3">
          <div class="font-semibold">Ø§Ù„Ø¯Ù„ÙŠÙ„ Ø§Ù„ØªÙ†Ø¸ÙŠÙ…ÙŠ Ø§Ù„Ù…Ø®ØªØµØ±:</div>
          <a class="gold-link" target="_blank" href="https://docs.google.com/document/d/1jGkTVk6WJeWvCnMw62NXZJ_qj9UL3fychiKmJCpR-ZE/edit?tab=t.0">
            <i class="fas fa-file"></i> Ø§Ù„Ø¯Ù„ÙŠÙ„ Ø§Ù„ØªÙ†Ø¸ÙŠÙ…ÙŠ Ø§Ù„Ù…Ø®ØªØµØ± (Ù…Ø³ØªÙ†Ø¯ Google)
          </a>
        </div>
        <div class="space-y-3">
          <div class="font-semibold">Ø§Ù„Ø¯Ù„ÙŠÙ„ Ø§Ù„Ø¥Ø¯Ø§Ø±ÙŠ Ø§Ù„ØªÙ†Ø¸ÙŠÙ…ÙŠ Ø§Ù„ØªÙØµÙŠÙ„ÙŠ:</div>
          <a class="gold-link" target="_blank" href="https://docs.google.com/document/d/1hswi3r_fTUKQoVIj3lG9kEIQpFF7Ol7OLCXe3A45-Ao/edit?tab=t.0#heading=h.93zeqi5ae78k">
            <i class="fas fa-file-lines"></i> Ø§Ù„Ø¯Ù„ÙŠÙ„ Ø§Ù„Ø¥Ø¯Ø§Ø±ÙŠ Ø§Ù„ØªÙ†Ø¸ÙŠÙ…ÙŠ Ø§Ù„ØªÙØµÙŠÙ„ÙŠ (Ù…Ø³ØªÙ†Ø¯ Google)
          </a>
        </div>
      </div>
    </section>

    <!-- Ø§Ù„Ù‚ÙŠØ§Ø¯Ø© ÙˆØ§Ù„Ø­ÙˆÙƒÙ…Ø© -->
    <section id="leadership" class="content-section">
      <div class="bg-white rounded-xl shadow p-6 space-y-6">
        <h2 class="text-2xl font-extrabold text-[var(--brand1)]">ğŸ›ï¸ Ø§Ù„Ù‚ÙŠØ§Ø¯Ø© ÙˆØ§Ù„Ø­ÙˆÙƒÙ…Ø© (LD)</h2>
        <!-- Ø¨Ø·Ø§Ù‚Ø© Ø§Ù„Ù‚Ø§Ø¦Ø¯ -->
        <div class="border rounded-xl p-5 flex items-center gap-4 bg-gradient-to-br from-[#fff] to-[#fff9f6]">
          <div class="h-14 w-14 rounded-full bg-gradient-to-br from-[var(--brand1)] to-[var(--brand2)] grid place-items-center text-white text-xl shadow">
            <i class="fas fa-user-tie"></i>
          </div>
          <div class="flex-1">
            <div class="text-lg font-extrabold text-gray-900">Ø§Ù„Ù‚Ø§Ø¦Ø¯/Ø§Ù„Ù…Ø¯ÙŠØ± Ø§Ù„Ø¹Ø§Ù…: Ø¯. Ø­Ø³ÙŠÙ† Ø¨Ù† Ù…Ø­Ù…Ø¯ Ø­Ø³Ù† Ø´ÙŠØ® Ø¨Ø§Ø¨ØµÙŠÙ„</div>
            <div class="text-gray-600">ÙŠØªØ¨Ø¹ Ø¥Ø¯Ø§Ø±ÙŠÙ‹Ø§ Ù„Ù…Ø¬Ù„Ø³ Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©/Ø§Ù„Ù…Ø§Ù„Ùƒ ÙˆÙŠØ´Ø±Ù Ø¹Ù„Ù‰ Ø§Ù„Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø·Ø¨ÙŠØ©ØŒ Ø§Ù„ØªÙ…Ø±ÙŠØ¶ØŒ Ø§Ù„Ø£Ù‚Ø³Ø§Ù… Ø§Ù„Ø³Ø±ÙŠØ±ÙŠØ© ÙˆØ§Ù„Ø¯Ø§Ø¹Ù…Ø©.</div>
          </div>
          <a class="gold-link" target="_blank" href="https://docs.google.com/document/d/1sZC9bpoqlOgJDN-akgPt5wYrpGC5bvdo-2VL7ZIKCvM/edit?tab=t.0" title="Ù‚Ø±Ø§Ø± Ø§Ù„ØªØ¹ÙŠÙŠÙ†">
            <i class="fas fa-file-signature"></i> Ù‚Ø±Ø§Ø± Ø§Ù„ØªØ¹ÙŠÙŠÙ† (LD)
          </a>
        </div>
        <!-- Ø§Ù„Ø¥Ø¯Ø§Ø±Ø§Øª Ø§Ù„ØªÙ†ÙÙŠØ°ÙŠØ© -->
        <div>
          <h3 class="text-xl font-extrabold text-[var(--brand1)] mb-2">Ø§Ù„Ø¥Ø¯Ø§Ø±Ø§Øª Ø§Ù„ØªÙ†ÙÙŠØ°ÙŠØ© (Ø­Ø³Ø¨ Ø§Ù„Ø¹Ø±Ø¶ Ø§Ù„Ù…Ø¹ØªÙ…Ø¯)</h3>
          <div class="overflow-auto">
            <table class="table text-right">
              <thead>
                <tr>
                  <th>Ø§Ù„Ù‚Ø³Ù…</th>
                  <th>Ø§Ù„Ù…Ø¯ÙŠØ±</th>
                  <th>Ø§Ù„Ù…Ù‡Ø§Ù… Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ©</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td>Ø§Ù„Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø¥Ø¯Ø§Ø±ÙŠØ©</td>
                  <td>Ø£. Ø¨Ù„Ø§Ù„ Ù†ØªÙˆ</td>
                  <td>Ø§Ù„ØªØ´ØºÙŠÙ„ Ø§Ù„ÙŠÙˆÙ…ÙŠØŒ Ø§Ù„Ù…ÙˆØ§Ø±Ø¯ Ø§Ù„Ø¨Ø´Ø±ÙŠØ©ØŒ Ø§Ù„ØªØ¯Ø±ÙŠØ¨ØŒ Ø§Ù„Ø§Ø³ØªÙ‚Ø¨Ø§Ù„ ÙˆØ§Ù„Ù…ÙˆØ§Ø¹ÙŠØ¯.</td>
                </tr>
                <tr>
                  <td>Ø§Ù„Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø·Ø¨ÙŠØ©</td>
                  <td>Ø¯. Ù…Ø¹Ø§Ø° Ø§Ù„Ø¨ÙŠÙˆØ´ <span class="chip">Ù†Ø§Ø¦Ø¨: Ø¯. Ø®Ø§Ù„Ø¯ Ø§Ù„Ø®Ø·ÙŠØ¨</span></td>
                  <td>Ø§Ù„Ø¥Ø´Ø±Ø§Ù Ø¹Ù„Ù‰ Ø§Ù„Ø¹ÙŠØ§Ø¯Ø§Øª ÙˆØ§Ù„Ø®Ø¯Ù…Ø§Øª Ø§Ù„Ø³Ø±ÙŠØ±ÙŠØ© ÙˆØ¬ÙˆØ¯ØªÙ‡Ø§.</td>
                </tr>
                <tr>
                  <td>Ø§Ù„Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø§Ù„ÙŠØ© ÙˆØ§Ù„ØªØ£Ù…ÙŠÙ†</td>
                  <td>Ø£. ØµØ§Ø¨Ø± Ø¹Ø¨Ø¯Ù‡</td>
                  <td>Ø§Ù„Ø­Ø³Ø§Ø¨Ø§ØªØŒ Ø§Ù„Ù…Ø·Ø§Ù„Ø¨Ø§ØªØŒ Ø¥Ø¯Ø§Ø±Ø© Ø¯ÙˆØ±Ø© Ø§Ù„Ø¥ÙŠØ±Ø§Ø¯ØŒ Ø§Ù„ØªÙ‚Ø§Ø±ÙŠØ± Ø§Ù„Ù…Ø§Ù„ÙŠØ©.</td>
                </tr>
                <tr>
                  <td>Ø§Ù„ØµÙŠØ§Ù†Ø© ÙˆØ§Ù„Ù…Ø±Ø§ÙÙ‚</td>
                  <td>Ø£. Ø¹Ø¯Ù†Ø§Ù† Ø§Ù„Ø±ÙØ§Ø¹ÙŠ</td>
                  <td>Ø§Ù„ØµÙŠØ§Ù†Ø© Ø§Ù„ÙˆÙ‚Ø§Ø¦ÙŠØ©ØŒ Ø§Ù„Ø³Ù„Ø§Ù…Ø© Ø§Ù„Ù…Ø±Ø§ÙÙ‚ÙŠØ©ØŒ Ø§Ù„Ø·ÙˆØ§Ø±Ø¦ØŒ Ø§Ù„Ù…Ø´ØªØ±ÙŠØ§Øª ØºÙŠØ± Ø§Ù„Ø·Ø¨ÙŠØ©ØŒ Ø§Ù„Ù†Ø¸Ø§ÙØ©.</td>
                </tr>
                <tr>
                  <td>Ø§Ù„ØµÙŠØ¯Ù„ÙŠØ©</td>
                  <td>Ø£. Ø¹Ø¨Ø¯Ø§Ù„Ù„Ù‡ Ø­Ù…ÙˆØ¯Ù‡</td>
                  <td>Ø§Ù„ØµØ±Ù Ø§Ù„Ø¯ÙˆØ§Ø¦ÙŠ Ø§Ù„Ø¢Ù…Ù†ØŒ Ø¶Ø¨Ø· Ø§Ù„Ø£Ø¯ÙˆÙŠØ© Ø¹Ø§Ù„ÙŠØ© Ø§Ù„Ø®Ø·ÙˆØ±Ø©ØŒ Ø³Ù„Ø³Ù„Ø© Ø§Ù„ØªØ¨Ø±ÙŠØ¯ØŒ Ø§Ù„Ù…Ø®Ø²ÙˆÙ†.</td>
                </tr>
                <tr>
                  <td>Ø§Ù„Ù…Ø®ØªØ¨Ø±</td>
                  <td>Ø£. Ù‡ÙŠØ«Ù… Ø§Ù„Ø¬Ø¹Ù„ÙŠ</td>
                  <td>Ø¶Ø¨Ø· Ø§Ù„Ø¬ÙˆØ¯Ø© Ø§Ù„Ù…Ø®Ø¨Ø±ÙŠØ©ØŒ Ø³Ù„Ø§Ù…Ø© Ø§Ù„Ø¹ÙŠÙ†Ø§ØªØŒ Ø§Ù„Ø³Ù„Ø§Ù…Ø© Ø§Ù„Ø­ÙŠÙˆÙŠØ©.</td>
                </tr>
                <tr>
                  <td>Ø§Ù„Ø£Ø´Ø¹Ø©</td>
                  <td>Ø£. Ø¨Ù„Ø§Ù„ Ù†ØªÙˆ</td>
                  <td>Ø§Ù„Ø¥Ø´Ø±Ø§Ù Ø§Ù„ÙÙ†ÙŠ ÙˆØ§Ù„Ø¥Ø´Ø¹Ø§Ø¹ÙŠ ÙˆÙÙ‚ Ù…ØªØ·Ù„Ø¨Ø§Øª NRRC.</td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
        <!-- Ù‚Ø±Ø§Ø± ØªØ¹ÙŠÙŠÙ† Ø§Ù„Ù‚Ø§Ø¯Ø© -->
        <div class="pt-2">
          <a class="gold-link" target="_blank" href="https://docs.google.com/document/d/1LeyR6WnpUVth3hfr8UX2i5QKIHegA6RvKpkgEhfamA4/edit?usp=drive_link">
            <i class="fas fa-download"></i> Ù‚Ø±Ø§Ø± ØªØ¹ÙŠÙŠÙ† Ø§Ù„Ù‚Ø§Ø¯Ø© â€“ Ù†Ø³Ø®Ø© Ù„Ù„Ø·Ø¨Ø§Ø¹Ø©/Ø§Ù„ØªÙ†Ø²ÙŠÙ„
          </a>
        </div>
      </div>
    </section>

    <!-- Ø§Ù„Ù„Ø¬Ø§Ù† Ø§Ù„Ø±Ø³Ù…ÙŠØ© -->
    <section id="committees" class="content-section">
      <div class="bg-white rounded-xl shadow p-6 space-y-5">
        <h2 class="text-2xl font-extrabold text-[var(--brand1)]">ğŸ‘¥ Ø§Ù„Ù„Ø¬Ø§Ù† Ø§Ù„Ø±Ø³Ù…ÙŠØ© (Ø­Ø³Ø¨ Ø³Ø¨Ø§Ù‡ÙŠ)</h2>
        <div class="overflow-auto">
          <table class="table text-right">
            <thead>
              <tr>
                <th>Ø§Ù„Ø±Ù…Ø²</th>
                <th>Ø§Ø³Ù… Ø§Ù„Ù„Ø¬Ù†Ø©</th>
                <th>Ø§Ù„Ø±Ø¦ÙŠØ³</th>
                <th>Ø§Ù„Ù…Ù†Ø³Ù‚/Ø§Ù„Ø³ÙƒØ±ØªÙŠØ± + Ø§Ù„Ø£Ø¹Ø¶Ø§Ø¡</th>
                <th>ØªÙƒØ±Ø§Ø± Ø§Ù„Ø§Ø¬ØªÙ…Ø§Ø¹Ø§Øª</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td><span class="chip">RM</span></td>
                <td>Ù„Ø¬Ù†Ø© Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø®Ø§Ø·Ø±</td>
                <td>Ø¯. Ø­Ø³ÙŠÙ† Ø¨Ø§Ø¨ØµÙŠÙ„</td>
                <td>Ø§Ù„Ù…Ù†Ø³Ù‚/Ø§Ù„Ø³ÙƒØ±ØªÙŠØ±: Ø£. Ø¹Ø¯Ù†Ø§Ù† Ø§Ù„Ø±ÙØ§Ø¹ÙŠ â€“ Ø§Ù„Ø£Ø¹Ø¶Ø§Ø¡: Ø¨Ù„Ø§Ù„ØŒ ØµØ§Ø¨Ø±ØŒ Ù…Ø¹Ø§Ø°ØŒ Ø®Ø§Ù„Ø¯</td>
                <td>Ø´Ù‡Ø±ÙŠÙ‹Ø§</td>
              </tr>
              <tr>
                <td><span class="chip">FMS</span></td>
                <td>Ù„Ø¬Ù†Ø© Ø§Ù„Ø³Ù„Ø§Ù…Ø© ÙˆØ§Ù„Ù…Ø±Ø§ÙÙ‚</td>
                <td>Ø£. ØµØ§Ø¨Ø± Ø¹Ø¨Ø¯Ù‡</td>
                <td>Ù…Ù†Ø³Ù‚ Ø§Ù„ØªØ¯Ø±ÙŠØ¨: Ø£. Ø¨Ù„Ø§Ù„ Ù†ØªÙˆ â€“ Ø§Ù„Ø£Ø¹Ø¶Ø§Ø¡: Ø¹Ø¯Ù†Ø§Ù† Ø§Ù„Ø±ÙØ§Ø¹ÙŠØŒ Ø®Ø§Ù„Ø¯ Ø§Ù„Ø®Ø·ÙŠØ¨ØŒ Ù…Ù†Ø¯ÙˆØ¨ Ù…Ù† Ø§Ù„Ø£Ù…Ù†</td>
                <td>Ø´Ù‡Ø±ÙŠÙ‹Ø§</td>
              </tr>
              <tr>
                <td><span class="chip">PSC</span></td>
                <td>Ù„Ø¬Ù†Ø© Ø³Ù„Ø§Ù…Ø© Ø§Ù„Ù…Ø±Ø¶Ù‰</td>
                <td>Ø¯. Ù…Ø¹Ø§Ø° Ø§Ù„Ø¨ÙŠÙˆØ´</td>
                <td>Ù†Ø§Ø¦Ø¨ Ø§Ù„Ø±Ø¦ÙŠØ³: Ø¯. Ø®Ø§Ù„Ø¯ Ø§Ù„Ø®Ø·ÙŠØ¨ â€“ Ø§Ù„Ø£Ø¹Ø¶Ø§Ø¡: Ø¯. Ø­Ø³ÙŠÙ†ØŒ Ù‡ÙŠØ«Ù…ØŒ Ø¨Ù„Ø§Ù„ â€“ Ø§Ù„Ø³ÙƒØ±ØªÙŠØ±: Ø¹Ø¯Ù†Ø§Ù†</td>
                <td>Ø´Ù‡Ø±ÙŠÙ‹Ø§</td>
              </tr>
              <tr>
                <td><span class="chip">IPC</span></td>
                <td>Ù„Ø¬Ù†Ø© Ù…ÙƒØ§ÙØ­Ø© Ø§Ù„Ø¹Ø¯ÙˆÙ‰</td>
                <td>Ø¯. Ù…Ø¬Ø¯ÙŠ Ø¹Ø³ÙƒØ±</td>
                <td>Ø§Ù„Ø£Ø¹Ø¶Ø§Ø¡: Ø®Ø§Ù„Ø¯ØŒ Ø§Ù„ØªÙ…Ø±ÙŠØ¶ØŒ Ø§Ù„Ù…Ø®ØªØ¨Ø±ØŒ Ø§Ù„ØªØ¹Ù‚ÙŠÙ… â€“ Ø§Ù„Ø³ÙƒØ±ØªÙŠØ±: Ø¹Ø¯Ù†Ø§Ù†</td>
                <td>Ø´Ù‡Ø±ÙŠÙ‹Ø§</td>
              </tr>
              <tr>
                <td><span class="chip">QI</span></td>
                <td>Ù„Ø¬Ù†Ø© Ø§Ù„Ø¬ÙˆØ¯Ø© ÙˆØ§Ù„ØªØ­Ø³ÙŠÙ† Ø§Ù„Ù…Ø³ØªÙ…Ø±</td>
                <td>Ø¯. Ø­Ø³ÙŠÙ† Ø¨Ø§Ø¨ØµÙŠÙ„</td>
                <td>Ø§Ù„Ø£Ø¹Ø¶Ø§Ø¡: Ù…Ù…Ø«Ù„ÙŠÙ† Ù…Ù† Ø§Ù„Ø£Ù‚Ø³Ø§Ù… â€“ Ø§Ù„Ø³ÙƒØ±ØªÙŠØ±: Ø¹Ø¯Ù†Ø§Ù†</td>
                <td>Ø±Ø¨Ø¹ Ø³Ù†ÙˆÙŠ</td>
              </tr>
              <tr>
                <td><span class="chip">EOC</span></td>
                <td>Ù„Ø¬Ù†Ø© Ø§Ù„Ø·ÙˆØ§Ø±Ø¦ ÙˆØ§Ù„ÙƒÙˆØ§Ø±Ø«</td>
                <td>Ø£. Ø¨Ù„Ø§Ù„ Ù†ØªÙˆ</td>
                <td>Ø§Ù„Ø£Ø¹Ø¶Ø§Ø¡: ØµØ§Ø¨Ø±ØŒ Ù…Ø¹Ø§Ø°ØŒ Ø®Ø§Ù„Ø¯ØŒ Ø§Ù„Ø£Ù…Ù†ØŒ Ø§Ù„ØªÙ…Ø±ÙŠØ¶</td>
                <td>Ù†ØµÙ Ø³Ù†ÙˆÙŠ</td>
              </tr>
            </tbody>
          </table>
        </div>
        <div class="pt-2">
          <a class="gold-link" target="_blank" href="https://docs.google.com/document/d/1jGkTVk6WJeWvCnMw62NXZJ_qj9UL3fychiKmJCpR-ZE/edit?tab=t.0">
            <i class="fas fa-file"></i> ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ù„Ø¬Ø§Ù† â€“ Ù†Ø³Ø®Ø© Ù…Ù† Ø§Ù„Ù…Ø³ØªÙ†Ø¯ (Google Doc)
          </a>
        </div>
      </div>
    </section>

    <!-- Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø®Ø§Ø·Ø± (RM) -->
<section id="rm" class="content-section">
  <div class="bg-white rounded-xl shadow p-6 space-y-6">

    <div class="flex flex-wrap items-center justify-between gap-3">
      <h2 class="text-2xl font-extrabold text-[var(--brand1)]">âš ï¸ Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø®Ø§Ø·Ø± (RM)</h2>
      <a href="https://www.m2020m.org/report.html" target="_blank" class="px-4 py-2 rounded-lg bg-[var(--brand1)] text-white hover:bg-[var(--brand2)] transition">
        <i class="fas fa-bullhorn ml-2"></i> Ø§Ù„Ø¥Ø¨Ù„Ø§Øº Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ Ù„Ù„Ø´ÙƒØ§ÙˆÙ‰/Ø§Ù„Ø­ÙˆØ§Ø¯Ø«
      </a>
    </div>

    <div class="border rounded-xl p-4">
      <h3 class="font-extrabold text-[var(--brand1)] mb-3">ğŸ“š Ù…ÙƒØªØ¨Ø© Ø§Ù„Ø£Ø¯Ù„Ø© Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ©</h3>
      <div id="rmLib">
        </div>
    </div>

    <div class="border rounded-xl p-4">
      <h3 class="font-extrabold text-[var(--brand1)] mb-4">ğŸ“¢ Ø§Ù„ØªÙˆØ¹ÙŠØ© ÙˆØ§Ù„ØªØ¯Ø±ÙŠØ¨ â€” ØªØ³Ø¬ÙŠÙ„ Ø­Ø¶ÙˆØ± Ù…ØªØ¯Ø±Ø¨ÙŠÙ†</h3>

      <form id="trainForm_RM" class="grid grid-cols-1 gap-6">

        <input type="hidden" name="form_department" value="RM">

        <div>
          <label class="block text-sm font-semibold mb-2">Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ù…ØªØ¯Ø±Ø¨ÙŠÙ† *</label>
          <div id="traineeListContainer_RM" class="max-h-60 overflow-y-auto border rounded-lg p-3 bg-gray-50">
            <p class="text-gray-500">Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…ØªØ¯Ø±Ø¨ÙŠÙ†...</p>
          </div>
          <div class="flex justify-between items-center mt-2">
            <button type="button" id="selectAllBtn_RM" class="text-sm text-[var(--brand1)] hover:underline">ØªØ­Ø¯ÙŠØ¯ Ø§Ù„ÙƒÙ„</button>
            <button type="button" id="deselectAllBtn_RM" class="text-sm text-gray-600 hover:underline">Ø¥Ù„ØºØ§Ø¡ Ø§Ù„ØªØ­Ø¯ÙŠØ¯</button>
          </div>
          <div id="selectedCount_RM" class="text-xs text-gray-600 mt-1">0 Ù…ØªØ¯Ø±Ø¨ Ù…Ø­Ø¯Ø¯</div>
        </div>

        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">

          <div>
            <label for="training_topic_RM" class="block text-sm font-semibold mb-1">Ù…ÙˆØ¶ÙˆØ¹ Ø§Ù„ØªØ¯Ø±ÙŠØ¨ *</label>
            <input type="text" id="training_topic_RM" name="training_topic" list="topic-list_RM" required class="w-full border rounded-lg px-3 py-2" placeholder="Ø§Ø®ØªØ± Ø£Ùˆ Ø§ÙƒØªØ¨ Ù…ÙˆØ¶ÙˆØ¹Ø§Ù‹ Ø¬Ø¯ÙŠØ¯Ø§Ù‹...">
            <datalist id="topic-list_RM">
              </datalist>
          </div>

          <div>
            <label for="training_date_RM" class="block text-sm font-semibold mb-1">ØªØ§Ø±ÙŠØ® Ø§Ù„ØªØ¯Ø±ÙŠØ¨ *</label>
            <input type="date" id="training_date_RM" name="training_date" required class="w-full border rounded-lg px-3 py-2">
          </div>

          <div>
            <label for="training_place_RM" class="block text-sm font-semibold mb-1">Ù…ÙƒØ§Ù† Ø§Ù„ØªØ¯Ø±ÙŠØ¨ *</label>
            <input type="text" id="training_place_RM" name="training_place" list="place-list_RM" required class="w-full border rounded-lg px-3 py-2" placeholder="Ø§Ø®ØªØ± Ø£Ùˆ Ø§ÙƒØªØ¨ Ù…ÙƒØ§Ù†Ø§Ù‹ Ø¬Ø¯ÙŠØ¯Ø§Ù‹...">
            <datalist id="place-list_RM">
              </datalist>
          </div>

          <div>
            <label for="trainer_name_RM" class="block text-sm font-semibold mb-1">Ø§Ù„Ù…Ø¯Ø±Ø¨ *</label>
            <input type="text" id="trainer_name_RM" name="trainer_name" required class="w-full border rounded-lg px-3 py-2" placeholder="Ø§Ø³Ù… Ø§Ù„Ù…Ø¯Ø±Ø¨">
          </div>
        </div>

        <div class="flex items-center gap-3 pt-2">
          <button type="submit" id="submitBtn_RM" class="px-4 py-2 rounded-lg bg-[var(--brand1)] text-white hover:bg-[var(--brand2)] transition-all">
            <i class="fas fa-save ml-2"></i>
            Ø­ÙØ¸ Ø­Ø¶ÙˆØ± Ø§Ù„Ù…ØªØ¯Ø±Ø¨ÙŠÙ†
          </button>
          <span id="trainMsg_RM" class="text-sm font-medium"></span>
        </div>
      </form>
    </div>
  </div>
</section>

<script>
  document.addEventListener("DOMContentLoaded", () => {

    // --- Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª ---
    const WEB_APP_URL = "https://script.google.com/macros/s/AKfycbyhFeodenLqh4EUTqeBUYkJsgk6TtU0QQ_I_zB8_dZ31w3kavPi83GFBLv9tQ1qz8IL/exec";

    // --- ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ø¹Ù†Ø§ØµØ± Ø§Ù„Ø®Ø§ØµØ© Ø¨ÙÙˆØ±Ù… RM ---
    const form_RM = document.getElementById("trainForm_RM");
    if (!form_RM) return; // Ø¥Ø°Ø§ Ù„Ù… ÙŠÙƒÙ† Ø§Ù„ÙÙˆØ±Ù… Ù…ÙˆØ¬ÙˆØ¯Ø§Ù‹ØŒ ØªÙˆÙ‚Ù

    const submitButton_RM = document.getElementById("submitBtn_RM");
    const trainMsg_RM = document.getElementById("trainMsg_RM");
    const traineeContainer_RM = document.getElementById("traineeListContainer_RM");
    const topicList_RM = document.getElementById("topic-list_RM");
    const placeList_RM = document.getElementById("place-list_RM");
    const selectedCountEl_RM = document.getElementById("selectedCount_RM");
    const selectAllBtn_RM = document.getElementById("selectAllBtn_RM");
    const deselectAllBtn_RM = document.getElementById("deselectAllBtn_RM");

    // --- Ø¬Ù„Ø¨ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù„Ù…Ù„Ø¡ Ø§Ù„ÙÙˆØ±Ù… ---
    async function populateFormOptions_RM() {
      try {
        const response = await fetch(WEB_APP_URL);
        if (!response.ok) throw new Error(`HTTP error! status: ${response.status}`);
        const data = await response.json();
        if (data.error) throw new Error(data.error);

        // Ù…Ù„Ø¡ Ø§Ù„Ù…ØªØ¯Ø±Ø¨ÙŠÙ†
        traineeContainer_RM.innerHTML = ""; 
        if (data.trainees && data.trainees.length > 0) {
          data.trainees.forEach(name => {
            const label = document.createElement("label");
            label.className = "flex items-center gap-2 p-2 hover:bg-white rounded cursor-pointer";
            label.innerHTML = `<input type="checkbox" name="trainees" value="${name}" class="trainee-checkbox"> <span>${name}</span>`;
            traineeContainer_RM.appendChild(label);
          });
        } else {
          traineeContainer_RM.innerHTML = "<p class='text-gray-500'>Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ù…ØªØ¯Ø±Ø¨ÙŠÙ†.</p>";
        }

        // Ù…Ù„Ø¡ Ø§Ù„Ù…ÙˆØ§Ø¶ÙŠØ¹
        topicList_RM.innerHTML = "";
        data.topics.forEach(topic => { topicList_RM.innerHTML += `<option value="${topic}"></option>`; });

        // Ù…Ù„Ø¡ Ø§Ù„Ø£Ù…Ø§ÙƒÙ†
        placeList_RM.innerHTML = "";
        data.places.forEach(place => { placeList_RM.innerHTML += `<option value="${place}"></option>`; });

        updateSelectedCount_RM();
      } catch (error) {
        traineeContainer_RM.innerHTML = `<p class='text-red-600'><strong>ÙØ´Ù„ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª:</strong> ${error.message}</p>`;
      }
    }

    // --- Ø¯ÙˆØ§Ù„ Ù…Ø³Ø§Ø¹Ø¯Ø© ---
    function updateSelectedCount_RM() {
      const count = traineeContainer_RM.querySelectorAll(".trainee-checkbox:checked").length;
      selectedCountEl_RM.textContent = `${count} Ù…ØªØ¯Ø±Ø¨ Ù…Ø­Ø¯Ø¯`;
    }
    function selectAllTrainees_RM(select) {
      traineeContainer_RM.querySelectorAll(".trainee-checkbox").forEach(cb => { cb.checked = select; });
      updateSelectedCount_RM();
    }

    // --- Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„ÙÙˆØ±Ù… ---
    async function handleFormSubmit_RM(e) {
      e.preventDefault();
      const formData = new FormData(form_RM);
      const trainees = Array.from(formData.getAll("trainees"));

      if (trainees.length === 0) {
        trainMsg_RM.textContent = "ÙŠØ¬Ø¨ Ø§Ø®ØªÙŠØ§Ø± Ù…ØªØ¯Ø±Ø¨ ÙˆØ§Ø­Ø¯ Ø¹Ù„Ù‰ Ø§Ù„Ø£Ù‚Ù„.";
        trainMsg_RM.className = "text-sm font-medium text-red-600";
        return;
      }

      const payload = {
        date: formData.get("training_date"),
        topic: formData.get("training_topic"),
        place: formData.get("training_place"),
        trainer: formData.get("trainer_name"),
        trainees: trainees,
        department: formData.get("form_department") // <-- Ù‡Ø°Ø§ Ù‡Ùˆ Ø§Ù„Ø³Ø·Ø± Ø§Ù„Ù…Ù‡Ù…
      };

      trainMsg_RM.textContent = "Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø­ÙØ¸ØŒ ÙŠØ±Ø¬Ù‰ Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø±...";
      trainMsg_RM.className = "text-sm font-medium text-blue-600";
      submitButton_RM.disabled = true;

      try {
        const response = await fetch(WEB_APP_URL, {
          method: "POST",
          body: JSON.stringify(payload),
          headers: { "Content-Type": "text/plain;charset=utf-8" },
        });
        const result = await response.json();

        if (result.status === "success") {
          trainMsg_RM.textContent = result.message || "ØªÙ… Ø§Ù„Ø­ÙØ¸ Ø¨Ù†Ø¬Ø§Ø­!";
          trainMsg_RM.className = "text-sm font-medium text-green-600";
          form_RM.reset();
          selectAllTrainees_RM(false);
        } else {
          throw new Error(result.message || "Ø­Ø¯Ø« Ø®Ø·Ø£ ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ.");
        }
      } catch (error) {
        trainMsg_RM.textContent = `ÙØ´Ù„ Ø§Ù„Ø­ÙØ¸: ${error.message}`;
        trainMsg_RM.className = "text-sm font-medium text-red-600";
        console.error("Error submitting form:", error);
      } finally {
        submitButton_RM.disabled = false;
      }
    }

    // --- Ø±Ø¨Ø· Ø§Ù„Ø£Ø­Ø¯Ø§Ø« ---
    form_RM.addEventListener("submit", handleFormSubmit_RM);
    traineeContainer_RM.addEventListener("change", updateSelectedCount_RM);
    selectAllBtn_RM.addEventListener("click", () => selectAllTrainees_RM(true));
    deselectAllBtn_RM.addEventListener("click", () => selectAllTrainees_RM(false));

    // --- Ø¨Ø¯Ø¡ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª ---
    populateFormOptions_RM();
  });
</script>

    <!-- Ø§Ù„Ø³Ù„Ø§Ù…Ø© ÙˆØ§Ù„Ù…Ø±Ø§ÙÙ‚ (FMS) -->
    <section id="fms" class="content-section">
      <div class="bg-white rounded-xl shadow p-6 space-y-6">
        <h2 class="text-2xl font-extrabold text-[var(--brand1)]">ğŸ› ï¸ Ø§Ù„Ø³Ù„Ø§Ù…Ø© ÙˆØ§Ù„Ù…Ø±Ø§ÙÙ‚ (FMS)</h2>
        <!-- ØªØ¨ÙˆÙŠØ¨Ø§Øª -->
        <div class="flex flex-wrap gap-2 border-b pb-3">
          <button class="px-3 py-1.5 rounded-md bg-[var(--brand1)] text-white" data-fms-tab="library" onclick="switchFmsTab('library')">ğŸ“š Ù…ÙƒØªØ¨Ø© Ø§Ù„ÙˆØ«Ø§Ø¦Ù‚</button>
          <button class="px-3 py-1.5 rounded-md bg-gray-100 hover:bg-gray-200" data-fms-tab="rounds" onclick="switchFmsTab('rounds')">ğŸ“ ØªØ³Ø¬ÙŠÙ„ Ø¬ÙˆÙ„Ø© Ø³Ù„Ø§Ù…Ø©</button>
          <button class="px-3 py-1.5 rounded-md bg-gray-100 hover:bg-gray-200" data-fms-tab="needs" onclick="switchFmsTab('needs')">âœ… Ù…ØªØ·Ù„Ø¨Ø§Øª Ø³Ø¨Ø§Ù‡ÙŠ</button>
        </div>
        <div id="fmsTabContent"></div>
      </div>
    </section>

    <!-- Ø³Ù„Ø§Ù…Ø© Ø§Ù„Ù…Ø±Ø¶Ù‰ (PSC) -->
    <section id="psc" class="content-section">
      <div class="bg-white rounded-xl shadow p-6 space-y-6">
        <div class="flex flex-wrap items-center justify-between gap-3">
          <h2 class="text-2xl font-extrabold text-[var(--brand1)]">â¤ï¸ Ø³Ù„Ø§Ù…Ø© Ø§Ù„Ù…Ø±Ø¶Ù‰ (PSC)</h2>
          <div class="flex gap-2">
            <a href="https://www.m2020m.org/report.html" target="_blank" class="px-4 py-2 rounded-lg bg-[var(--brand1)] text-white hover:bg-[var(--brand2)] transition">
              <i class="fas fa-bullhorn ml-2"></i> Ø§Ù„Ø¥Ø¨Ù„Ø§Øº Ø¹Ù† Ø­Ø§Ø¯Ø«
            </a>
          </div>
        </div>

        <!-- ØªØ¨ÙˆÙŠØ¨Ø§Øª PSC -->
        <div class="flex flex-wrap gap-2 border-b pb-3">
          <button class="px-3 py-1.5 rounded-md bg-[var(--brand1)] text-white" data-psc-tab="library" onclick="switchPscTab('library')">ğŸ“š Ù…ÙƒØªØ¨Ø© Ø§Ù„ÙˆØ«Ø§Ø¦Ù‚</button>
          <button class="px-3 py-1.5 rounded-md bg-gray-100 hover:bg-gray-200" data-psc-tab="indicators" onclick="switchPscTab('indicators')">ğŸ“Š Ù…Ø¤Ø´Ø±Ø§Øª Ø§Ù„Ø£Ø¯Ø§Ø¡</button>
          <button class="px-3 py-1.5 rounded-md bg-gray-100 hover:bg-gray-200" data-psc-tab="reporting" onclick="switchPscTab('reporting')">ğŸ“ Ù†Ù…Ø§Ø°Ø¬ Ø§Ù„Ø¥Ø¨Ù„Ø§Øº</button>
          <button class="px-3 py-1.5 rounded-md bg-gray-100 hover:bg-gray-200" data-psc-tab="needs" onclick="switchPscTab('needs')">âœ… Ù…ØªØ·Ù„Ø¨Ø§Øª Ø³Ø¨Ø§Ù‡ÙŠ</button>
        </div>

        <!-- Ù…Ø­ØªÙˆÙ‰ ØªØ¨ÙˆÙŠØ¨Ø§Øª PSC -->
        <div id="pscTabContent"></div>
      </div>
    </section>

    <!-- Ù…ÙƒØ§ÙØ­Ø© Ø§Ù„Ø¹Ø¯ÙˆÙ‰ (IPC) -->
    <section id="ipc" class="content-section">
      <div class="bg-white rounded-xl shadow p-6 space-y-6">
        <div class="flex flex-wrap items-center justify-between gap-3">
          <h2 class="text-2xl font-extrabold text-[var(--brand1)]">ğŸ§¼ Ù…ÙƒØ§ÙØ­Ø© Ø§Ù„Ø¹Ø¯ÙˆÙ‰ (IPC)</h2>
          <div class="flex items-center gap-2 text-sm">
            <button class="px-3 py-1.5 rounded-md border" onclick="ipcShowSecurity()">ğŸ”’ Ø¥Ø¹Ø¯Ø§Ø¯ Ø§Ù„Ø£Ù…Ø§Ù† (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)</button>
            <button class="px-3 py-1.5 rounded-md bg-[var(--brand1)] text-white" onclick="ipcExportAll()">â¬‡ï¸ ØªØµØ¯ÙŠØ± ÙƒÙ„ Ø¨ÙŠØ§Ù†Ø§Øª IPC (JSON)</button>
            <label class="px-3 py-1.5 rounded-md border cursor-pointer">
              â¬†ï¸ Ø§Ø³ØªÙŠØ±Ø§Ø¯
              <input id="ipcImportInput" type="file" accept="application/json" class="hidden" onchange="ipcImportAll(this.files[0])">
            </label>
          </div>
        </div>

        <!-- ØªØ¨ÙˆÙŠØ¨Ø§Øª -->
        <div class="flex flex-wrap gap-2 border-b pb-3">
          <button class="px-3 py-1.5 rounded-md bg-[var(--brand1)] text-white" data-ipc-tab="library" onclick="switchIpcTab('library')">ğŸ“š Ù…ÙƒØªØ¨Ø© Ø§Ù„ÙˆØ«Ø§Ø¦Ù‚</button>
          <button class="px-3 py-1.5 rounded-md bg-gray-100 hover:bg-gray-200" data-ipc-tab="surveillance" onclick="switchIpcTab('surveillance')">ğŸ“Š Ø§Ù„Ù…Ø±Ø§Ù‚Ø¨Ø© ÙˆØ§Ù„Ù…Ø¤Ø´Ø±Ø§Øª</button>
          <button class="px-3 py-1.5 rounded-md bg-gray-100 hover:bg-gray-200" data-ipc-tab="forms" onclick="switchIpcTab('forms')">ğŸ“ Ù†Ù…Ø§Ø°Ø¬ Ø§Ù„Ø¥Ø¯Ø®Ø§Ù„</button>
          <button class="px-3 py-1.5 rounded-md bg-gray-100 hover:bg-gray-200" data-ipc-tab="needs" onclick="switchIpcTab('needs')">âœ… Ù…ØªØ·Ù„Ø¨Ø§Øª Ø³Ø¨Ø§Ù‡ÙŠ (IPC)</button>
        </div>
        <div id="ipcTabContent"></div>
      </div>
    </section>

    <!-- Ø§Ù„Ø¬ÙˆØ¯Ø© ÙˆØ§Ù„ØªØ­Ø³ÙŠÙ† Ø§Ù„Ù…Ø³ØªÙ…Ø± (QI) -->
    <section id="qi" class="content-section">
      <div class="bg-white rounded-xl shadow p-6 space-y-6">
        <div class="flex flex-wrap items-center justify-between gap-3">
          <h2 class="text-2xl font-extrabold text-[var(--brand1)]">ğŸ“ˆ Ø§Ù„Ø¬ÙˆØ¯Ø© ÙˆØ§Ù„ØªØ­Ø³ÙŠÙ† Ø§Ù„Ù…Ø³ØªÙ…Ø± (QI)</h2>
          <div class="flex items-center gap-2 text-sm">
            <button class="px-3 py-1.5 rounded-md bg-[var(--brand1)] text-white" onclick="qiExportAll()">â¬‡ï¸ ØªØµØ¯ÙŠØ± ÙƒÙ„ Ø¨ÙŠØ§Ù†Ø§Øª QI (JSON)</button>
            <label class="px-3 py-1.5 rounded-md border cursor-pointer">
              â¬†ï¸ Ø§Ø³ØªÙŠØ±Ø§Ø¯
              <input id="qiImportInput" type="file" accept="application/json" class="hidden" onchange="qiImportAll(this.files[0])">
            </label>
          </div>
        </div>

        <!-- ØªØ¨ÙˆÙŠØ¨Ø§Øª QI -->
        <div class="flex flex-wrap gap-2 border-b pb-3">
          <button class="px-3 py-1.5 rounded-md bg-[var(--brand1)] text-white" data-qi-tab="library" onclick="switchQiTab('library')">ğŸ“š Ù…ÙƒØªØ¨Ø© Ø§Ù„ÙˆØ«Ø§Ø¦Ù‚</button>
          <button class="px-3 py-1.5 rounded-md bg-gray-100 hover:bg-gray-200" data-qi-tab="dashboard" onclick="switchQiTab('dashboard')">ğŸ“Š Ù„ÙˆØ­Ø© Ø§Ù„Ù…Ø¤Ø´Ø±Ø§Øª</button>
          <button class="px-3 py-1.5 rounded-md bg-gray-100 hover:bg-gray-200" data-qi-tab="projects" onclick="switchQiTab('projects')">ğŸ”„ Ù…Ø´Ø§Ø±ÙŠØ¹ Ø§Ù„ØªØ­Ø³ÙŠÙ†</button>
          <button class="px-3 py-1.5 rounded-md bg-gray-100 hover:bg-gray-200" data-qi-tab="needs" onclick="switchQiTab('needs')">âœ… Ù…ØªØ·Ù„Ø¨Ø§Øª Ø³Ø¨Ø§Ù‡ÙŠ (QI)</button>
        </div>
        <div id="qiTabContent"></div>
      </div>
    </section>

    <!-- Ø§Ù„Ø·ÙˆØ§Ø±Ø¦ ÙˆØ§Ù„ÙƒÙˆØ§Ø±Ø« (EOC) -->
    <section id="eoc" class="content-section">
      <div class="bg-white rounded-xl shadow p-6 space-y-6">
        <div class="flex flex-wrap items-center justify-between gap-3">
          <h2 class="text-2xl font-extrabold text-[var(--brand1)]">ğŸš¨ Ø§Ù„Ø·ÙˆØ§Ø±Ø¦ ÙˆØ§Ù„ÙƒÙˆØ§Ø±Ø« (EOC)</h2>
          <div class="flex items-center gap-2 text-sm">
            <button class="px-3 py-1.5 rounded-md bg-[var(--brand1)] text-white" onclick="eocExportAll()">â¬‡ï¸ ØªØµØ¯ÙŠØ± ÙƒÙ„ Ø¨ÙŠØ§Ù†Ø§Øª EOC (JSON)</button>
            <label class="px-3 py-1.5 rounded-md border cursor-pointer">
              â¬†ï¸ Ø§Ø³ØªÙŠØ±Ø§Ø¯
              <input id="eocImportInput" type="file" accept="application/json" class="hidden" onchange="eocImportAll(this.files[0])">
            </label>
          </div>
        </div>

        <!-- ØªØ¨ÙˆÙŠØ¨Ø§Øª EOC -->
        <div class="flex flex-wrap gap-2 border-b pb-3">
          <button class="px-3 py-1.5 rounded-md bg-[var(--brand1)] text-white" data-eoc-tab="library" onclick="switchEocTab('library')">ğŸ“š Ù…ÙƒØªØ¨Ø© Ø§Ù„ÙˆØ«Ø§Ø¦Ù‚</button>
          <button class="px-3 py-1.5 rounded-md bg-gray-100 hover:bg-gray-200" data-eoc-tab="exercises" onclick="switchEocTab('exercises')">ğŸƒâ€â™‚ï¸ Ø§Ù„ØªÙ…Ø§Ø±ÙŠÙ† ÙˆØ§Ù„Ø¥Ø®Ù„Ø§Ø¡Ø§Øª</button>
          <button class="px-3 py-1.5 rounded-md bg-gray-100 hover:bg-gray-200" data-eoc-tab="readiness" onclick="switchEocTab('readiness')">ğŸ›¡ï¸ ØªÙ‚ÙŠÙŠÙ… Ø§Ù„Ø¬Ø§Ù‡Ø²ÙŠØ©</button>
          <button class="px-3 py-1.5 rounded-md bg-gray-100 hover:bg-gray-200" data-eoc-tab="needs" onclick="switchEocTab('needs')">âœ… Ù…ØªØ·Ù„Ø¨Ø§Øª Ø³Ø¨Ø§Ù‡ÙŠ (EOC)</button>
        </div>
        <div id="eocTabContent"></div>
      </div>
    </section>
  </main>
</div>

<!-- Scroll to top -->
<button id="scrollTopBtn" title="Ø¥Ù„Ù‰ Ø§Ù„Ø£Ø¹Ù„Ù‰" onclick="window.scrollTo({top:0,behavior:'smooth'})">
  <i class="fas fa-arrow-up"></i>
</button>

<!-- Document Modal -->
<div id="docModal" class="modal" role="dialog" aria-modal="true">
  <div class="panel">
    <div class="flex flex-col h-full">
      <div class="flex items-center justify-between px-4 py-3 border-b bg-gray-50">
        <div class="font-bold text-[var(--brand1)]" id="docTitle">Ø¹Ø±Ø¶ Ø§Ù„ÙˆØ«ÙŠÙ‚Ø©</div>
        <button class="text-2xl" onclick="closeDocModal()">&times;</button>
      </div>
      <iframe id="docFrame" class="w-full flex-1 border-0" src="about:blank" allowfullscreen></iframe>
    </div>
  </div>
</div>

<script>
// ====== Ø§Ù„Ø¯ÙˆØ§Ù„ Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ© - ØªØ¹Ø±ÙŠÙÙ‡Ø§ Ø£ÙˆÙ„Ø§Ù‹ ======
function navTo(sectionId){
  // Ø¥Ø®ÙØ§Ø¡ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø£Ù‚Ø³Ø§Ù…
  document.querySelectorAll('.content-section').forEach(section => {
    section.classList.remove('active');
  });
  
  // Ø¥Ø²Ø§Ù„Ø© Ø§Ù„Ù†Ø´Ø· Ù…Ù† Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø±ÙˆØ§Ø¨Ø·
  document.querySelectorAll('.nav-link').forEach(link => {
    link.classList.remove('active');
  });
  
  // Ø¥Ø¸Ù‡Ø§Ø± Ø§Ù„Ù‚Ø³Ù… Ø§Ù„Ù…Ø·Ù„ÙˆØ¨
  const targetSection = document.getElementById(sectionId);
  if (targetSection) {
    targetSection.classList.add('active');
    targetSection.scrollIntoView({ behavior: 'smooth', block: 'start' });
  }
  
  // ØªØ¹ÙŠÙŠÙ† Ø§Ù„Ø±Ø§Ø¨Ø· ÙƒÙ†Ø´Ø·
  const activeLink = document.querySelector(`.nav-link[href="#${sectionId}"]`);
  if (activeLink) {
    activeLink.classList.add('active');
  }
  
  // ØªÙ‡ÙŠØ¦Ø© Ø§Ù„Ø£Ù‚Ø³Ø§Ù… Ø¥Ø°Ø§ Ù„Ø²Ù… Ø§Ù„Ø£Ù…Ø±
  if (sectionId === 'fms') {
    const fmsContent = document.getElementById('fmsTabContent');
    if (fmsContent && fmsContent.innerHTML.trim() === '') {
      switchFmsTab('library');
    }
  }
  
  if (sectionId === 'psc') {
    const pscContent = document.getElementById('pscTabContent');
    if (pscContent && pscContent.innerHTML.trim() === '') {
      switchPscTab('library');
    }
  }
  
  if (sectionId === 'ipc') {
    const ipcContent = document.getElementById('ipcTabContent');
    if (ipcContent && ipcContent.innerHTML.trim() === '') {
      switchIpcTab('library');
    }
  }
  
  if (sectionId === 'qi') {
    const qiContent = document.getElementById('qiTabContent');
    if (qiContent && qiContent.innerHTML.trim() === '') {
      switchQiTab('library');
    }
  }
  
  if (sectionId === 'eoc') {
    const eocContent = document.getElementById('eocTabContent');
    if (eocContent && eocContent.innerHTML.trim() === '') {
      switchEocTab('library');
    }
  }
  return false;
}
function openDocModal(title, previewUrl) {
  document.getElementById('docTitle').textContent = title;
  document.getElementById('docFrame').src = previewUrl;
  document.getElementById('docModal').style.display = 'flex';
}

function closeDocModal() {
  document.getElementById('docFrame').src = 'about:blank';
  document.getElementById('docModal').style.display = 'none';
}

// ====== Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª ======
const FMS_API_URL = 'YOUR_GOOGLE_SCRIPT_WEB_APP_URL_HERE';
const TRAIN_API_URL = 'YOUR_GAS_TRAINING_WEB_APP_URL_HERE';

// ====== Ø¯ÙˆØ§Ù„ Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø´Ø¹Ø§Ø± ======
function setupLogoChange() {
  const logoPicker = document.getElementById('logoPicker');
  const btnSetLogo = document.getElementById('btnSetLogo');
  
  if (btnSetLogo && logoPicker) {
    btnSetLogo.addEventListener('click', function() {
      logoPicker.click();
    });
    
    logoPicker.addEventListener('change', function(event) {
      const file = event.target.files[0];
      if (file) {
        const reader = new FileReader();
        
        reader.onload = function(e) {
          const imageDataUrl = e.target.result;
          
          const logoSmall = document.getElementById('logoSmall');
          if (logoSmall) {
            logoSmall.src = imageDataUrl;
          }
          
          const logoHero = document.getElementById('logoHero');
          if (logoHero) {
            logoHero.src = imageDataUrl;
          }
          
          try {
            localStorage.setItem('customLogo', imageDataUrl);
          } catch (error) {
            console.log('Ù„Ø§ ÙŠÙ…ÙƒÙ† Ø­ÙØ¸ Ø§Ù„Ø´Ø¹Ø§Ø± ÙÙŠ Ø§Ù„ØªØ®Ø²ÙŠÙ† Ø§Ù„Ù…Ø­Ù„ÙŠ');
          }
        };
        
        reader.readAsDataURL(file);
      }
    });
  }
}

function loadSavedLogo() {
  try {
    const savedLogo = localStorage.getItem('customLogo');
    if (savedLogo) {
      const logoSmall = document.getElementById('logoSmall');
      const logoHero = document.getElementById('logoHero');
      
      if (logoSmall) logoSmall.src = savedLogo;
      if (logoHero) logoHero.src = savedLogo;
    }
  } catch (error) {
    console.log('Ù„Ø§ ÙŠÙ…ÙƒÙ† ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø´Ø¹Ø§Ø± Ø§Ù„Ù…Ø­ÙÙˆØ¸');
  }
}

// ====== Ù…ÙƒØªØ¨Ø© ÙˆØ«Ø§Ø¦Ù‚ RM - Ù…ØµØ­Ø­Ø© ======
<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø¨ÙˆØ§Ø¨Ø© Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø®Ø§Ø·Ø± ÙˆØ§Ù„Ø¬ÙˆØ¯Ø© - Ø§Ù„Ù…Ø¬Ù…Ø¹ Ø§Ù„Ø·Ø¨ÙŠ 2025</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: #333;
            min-height: 100vh;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            background: rgba(255, 255, 255, 0.95);
            padding: 20px;
            border-radius: 15px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
            margin-bottom: 20px;
            text-align: center;
            border-right: 5px solid #4CAF50;
        }

        .header h1 {
            color: #2c3e50;
            font-size: 2.2em;
            margin-bottom: 10px;
        }

        .header h2 {
            color: #7f8c8d;
            font-weight: normal;
            font-size: 1.2em;
        }

        .main-layout {
            display: grid;
            grid-template-columns: 250px 1fr;
            gap: 20px;
        }

        .sidebar {
            background: rgba(255, 255, 255, 0.95);
            padding: 20px;
            border-radius: 15px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
            height: fit-content;
        }

        .sidebar h3 {
            color: #2c3e50;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 2px solid #ecf0f1;
        }

        .category-list {
            list-style: none;
        }

        .category-list li {
            padding: 12px 15px;
            margin: 8px 0;
            background: #f8f9fa;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            border-right: 4px solid transparent;
        }

        .category-list li:hover {
            background: #e3f2fd;
            border-right-color: #2196F3;
            transform: translateX(-5px);
        }

        .category-list li.active {
            background: #e8f5e9;
            border-right-color: #4CAF50;
            font-weight: bold;
        }

        .content {
            background: rgba(255, 255, 255, 0.95);
            padding: 25px;
            border-radius: 15px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
        }

        .section-title {
            color: #2c3e50;
            font-size: 1.8em;
            margin-bottom: 25px;
            padding-bottom: 10px;
            border-bottom: 3px solid #ecf0f1;
        }

        .documents-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 20px;
        }

        .document-card {
            background: white;
            padding: 20px;
            border-radius: 12px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
            border-right: 4px solid #3498db;
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .document-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
            border-right-color: #e74c3c;
        }

        .doc-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 15px;
        }

        .doc-code {
            background: #3498db;
            color: white;
            padding: 5px 12px;
            border-radius: 20px;
            font-size: 0.9em;
            font-weight: bold;
        }

        .doc-category {
            background: #ecf0f1;
            color: #7f8c8d;
            padding: 4px 10px;
            border-radius: 15px;
            font-size: 0.8em;
        }

        .doc-name {
            color: #2c3e50;
            font-size: 1.1em;
            line-height: 1.4;
            margin-bottom: 15px;
            min-height: 60px;
        }

        .doc-actions {
            display: flex;
            gap: 10px;
        }

        .btn {
            padding: 8px 16px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 0.9em;
            transition: all 0.3s ease;
            flex: 1;
            text-align: center;
            text-decoration: none;
        }

        .btn-view {
            background: #27ae60;
            color: white;
        }

        .btn-view:hover {
            background: #219a52;
        }

        .btn-category {
            background: #e67e22;
            color: white;
        }

        .btn-category:hover {
            background: #d35400;
        }

        .nav-sections {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-top: 25px;
            padding-top: 20px;
            border-top: 2px solid #ecf0f1;
        }

        .nav-item {
            background: #34495e;
            color: white;
            padding: 10px 15px;
            border-radius: 8px;
            font-size: 0.9em;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .nav-item:hover {
            background: #2c3e50;
            transform: translateY(-2px);
        }

        @media (max-width: 768px) {
            .main-layout {
                grid-template-columns: 1fr;
            }
            
            .documents-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>Ø¨ÙˆØ§Ø¨Ø© Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø®Ø§Ø·Ø± ÙˆØ§Ù„Ø¬ÙˆØ¯Ø©</h1>
            <h2>ØµÙØ­Ø© 2025 - Ù…ÙˆÙ‚Ø¹ Ø§Ù„Ù…Ø¬Ù…Ø¹ Ø§Ù„Ø·Ø¨ÙŠ</h2>
        </div>

        <div class="main-layout">
            <div class="sidebar">
                <h3>ğŸ“š Ù…ÙƒØªØ¨Ø© Ø§Ù„Ø£Ø¯Ù„Ø© Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ©</h3>
                <ul class="category-list" id="categoryList">
                    <!-- Ø³ÙŠØªÙ… Ù…Ù„Ø¤Ù‡Ø§ Ø¨Ø§Ù„Ø¬Ø§ÙØ§Ø³ÙƒØ±ÙŠØ¨Øª -->
                </ul>

                <div class="nav-sections">
                    <div class="nav-item">Ø§Ù„ØµÙØ­Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</div>
                    <div class="nav-item">Ø§Ù„Ø¯Ù„ÙŠÙ„ Ø§Ù„Ø¥Ø¯Ø§Ø±ÙŠ</div>
                    <div class="nav-item">Ø§Ù„Ù‚ÙŠØ§Ø¯Ø© ÙˆØ§Ù„Ø­ÙˆÙƒÙ…Ø© (LD)</div>
                    <div class="nav-item">Ø§Ù„Ù„Ø¬Ø§Ù† Ø§Ù„Ø±Ø³Ù…ÙŠØ©</div>
                    <div class="nav-item">Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø®Ø§Ø·Ø± (RM)</div>
                    <div class="nav-item">Ø§Ù„Ø³Ù„Ø§Ù…Ø© ÙˆØ§Ù„Ù…Ø±Ø§ÙÙ‚ (FMS)</div>
                    <div class="nav-item">Ø³Ù„Ø§Ù…Ø© Ø§Ù„Ù…Ø±Ø¶Ù‰ (PSC)</div>
                    <div class="nav-item">Ù…ÙƒØ§ÙØ­Ø© Ø§Ù„Ø¹Ø¯ÙˆÙ‰ (IPC)</div>
                    <div class="nav-item">Ø§Ù„Ø¬ÙˆØ¯Ø© ÙˆØ§Ù„ØªØ·ÙˆÙŠØ± (QI)</div>
                    <div class="nav-item">Ø§Ù„Ø·ÙˆØ§Ø±Ø¦ ÙˆØ§Ù„ÙƒÙˆØ§Ø±Ø« (ECOC)</div>
                    <div class="nav-item">Ø§Ù„ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ</div>
                </div>
            </div>

            <div class="content">
                <h2 class="section-title" id="currentCategory">Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ø³ØªÙ†Ø¯Ø§Øª</h2>
                <div class="documents-grid" id="documentsGrid">
                    <!-- Ø³ÙŠØªÙ… Ù…Ù„Ø¤Ù‡Ø§ Ø¨Ø§Ù„Ø¬Ø§ÙØ§Ø³ÙƒØ±ÙŠØ¨Øª -->
                </div>
            </div>
        </div>
    </div>

    <script>
        // Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ© Ù„Ù„Ù…Ø³ØªÙ†Ø¯Ø§Øª
        const RM_DOCS_ESSENTIAL = [
            { code:'LD.31', name:'Ù‚Ø±Ø§Ø± Ø§Ø¹ØªÙ…Ø§Ø¯ Ø¨Ø±Ù†Ø§Ù…Ø¬ Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø®Ø§Ø·Ø± (LD.31)', category:'DEC', categoryName:'Ù‚Ø±Ø§Ø±Ø§Øª', icon:'ğŸ“‹', url:'https://drive.google.com/file/d/1TYH87_v6rC2twWOZig2P5YDegRv6ir2dlYEU-v6KXwg/preview' },
            { code:'LD.31/32', name:'Ù‚Ø±Ø§Ø± ØªØ´ÙƒÙŠÙ„ Ù„Ø¬Ù†Ø© Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø®Ø§Ø·Ø± ÙˆØ³Ù„Ø§Ù…Ø© Ø§Ù„Ù…Ø±Ø¶Ù‰', category:'DEC', categoryName:'Ù‚Ø±Ø§Ø±Ø§Øª', icon:'ğŸ‘¥', url:'https://drive.google.com/file/d/1yN0wiHu-mmNqFHF5XeEQIqOeMElIFSXn-xCz1AzAfco/preview' },
            { code:'LD.32', name:'Ù‚Ø±Ø§Ø± Ø¥Ø¯Ø§Ø±ÙŠ Ø¨Ø§Ø¹ØªÙ…Ø§Ø¯ Ø³ÙŠØ§Ø³Ø© Ø§Ù„Ø¥Ø¨Ù„Ø§Øº Ø¹Ù† Ø§Ù„Ø­ÙˆØ§Ø¯Ø«/Ø§Ù„Ø´ÙƒØ§ÙˆÙ‰', category:'POL', categoryName:'Ø³ÙŠØ§Ø³Ø§Øª', icon:'ğŸ“œ', url:'https://drive.google.com/file/d/1irNRM1ovqwQEaEEj5gv9rmAuoV8O5aY-m0hSNykZDUk/preview' },
            { code:'IR', name:'Ù†Ù…ÙˆØ°Ø¬ Ø¨Ù„Ø§Øº Ø­Ø§Ø¯Ø« (Incident Report)', category:'FRM', categoryName:'Ù†Ù…Ø§Ø°Ø¬', icon:'ğŸ“', url:'https://drive.google.com/file/d/1rFQjcCWP010zLNb4FfRtT1aTmrbY9fyjGcMeYIXSQqQ/preview' },
            { code:'NM', name:'Ù†Ù…ÙˆØ°Ø¬ Ø¨Ù„Ø§Øº Ù‚Ø±ÙŠØ¨ Ù…Ù† Ø§Ù„ÙˆÙ‚ÙˆØ¹ (Near Miss)', category:'FRM', categoryName:'Ù†Ù…Ø§Ø°Ø¬', icon:'âš ï¸', url:'https://drive.google.com/file/d/1DhGR9WtVrM2LxITiv8WBMSCKs407Kb-vUZXg0mZVwD0/preview' },
            { code:'UNSAFE', name:'Ø¨Ù„Ø§Øº Ø®Ø·Ø±/Ø´Ø±Ø· ØºÙŠØ± Ø¢Ù…Ù†', category:'FRM', categoryName:'Ù†Ù…Ø§Ø°Ø¬', icon:'ğŸš¨', url:'https://drive.google.com/file/d/1Yw7CFRvzssAWU0JYFkNz1Z9o0fQoMKCqoqrRhEHWZ_I/preview' },
            { code:'DEVICE', name:'Ø¨Ù„Ø§Øº Ø¹Ø·Ù„ Ø¬Ù‡Ø§Ø²/ØªØ¬Ù‡ÙŠØ²', category:'FRM', categoryName:'Ù†Ù…Ø§Ø°Ø¬', icon:'ğŸ”§', url:'https://drive.google.com/file/d/17tZnAvhWCvPbb5Bp3UymLxzEz-IciEjxV4Tn97tIWwQ/preview' },
            { code:'SE', name:'Ø¥Ø®Ø·Ø§Ø± Ø­Ø¯Ø« Ø¬Ø³ÙŠÙ… (Sentinel Event)', category:'FRM', categoryName:'Ù†Ù…Ø§Ø°Ø¬', icon:'ğŸš‘', url:'https://drive.google.com/file/d/1LrOlWxfECxyzF77DnerV15RjS-ElSTbIEa1UuKG3rD0/preview' },
            { code:'RCA/CAP', name:'ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ø³Ø¨Ø¨ Ø§Ù„Ø¬Ø°Ø±ÙŠ ÙˆØ®Ø·Ø© Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª Ø§Ù„ØªØµØ­ÙŠØ­ÙŠØ©', category:'TOOL', categoryName:'Ø£Ø¯ÙˆØ§Øª', icon:'ğŸ”', url:'https://drive.google.com/file/d/1lDKsjgPDCdwXNV935kB_DfAm-ZsdzLPK8p4Pn7hgJJ0/preview' },
            { code:'HFMEA', name:'HFMEA (ØªØ­Ù„ÙŠÙ„ Ù…Ø³Ø¨Ù‚ Ù„Ù„Ù…Ø®Ø§Ø·Ø±)', category:'TOOL', categoryName:'Ø£Ø¯ÙˆØ§Øª', icon:'ğŸ“Š', url:'https://drive.google.com/file/d/15ZjKLJYhe3HCUWbAO2Iw96IY1GOn1VNCWIjzdi9U4x8/preview' },
            { code:'REGISTER', name:'Ø³Ø¬Ù„ Ø§Ù„Ù…Ø®Ø§Ø·Ø± Ø§Ù„Ù…Ø¤Ø³Ø³ÙŠ', category:'LOG', categoryName:'Ø³Ø¬Ù„Ø§Øª', icon:'ğŸ“’', url:'https://drive.google.com/file/d/1XVMRWRZKoTpmXPzrPdXJA7PWf9r88YwLYv_tptdiZAA/preview' },
            { code:'KPI', name:'Ù„ÙˆØ­Ø© Ø§Ù„Ù…Ø¤Ø´Ø±Ø§Øª Ø§Ù„Ø´Ù‡Ø±ÙŠØ© Ù„Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø®Ø§Ø·Ø±', category:'DASH', categoryName:'Ù„ÙˆØ­Ø§Øª Ø§Ù„Ù‚ÙŠØ§Ø¯Ø©', icon:'ğŸ“ˆ', url:'https://drive.google.com/file/d/1pj8P8rf4TZj_wVKgLrO8ayP9WNUBc1yTWeAy8r0xGOY/preview' },
            { code:'ESCALATION', name:'Ù„ÙˆØ­Ø© Ø§ØªØµØ§Ù„Ø§Øª ÙˆØ³Ù„Ø³Ù„Ø© Ø§Ù„ØªØµØ¹ÙŠØ¯', category:'REF', categoryName:'Ù…Ø±Ø§Ø¬Ø¹', icon:'ğŸ“', url:'https://drive.google.com/file/d/1dZrkUB_d1XblN3QonWxPt9F1LQ6xQIbyNFT4ixI2m64/preview' },
            { code:'LD.31-ALT', name:'LD31 (Ù†Ø³Ø®Ø© Ø¥Ø¶Ø§ÙÙŠØ©)', category:'DEC', categoryName:'Ù‚Ø±Ø§Ø±Ø§Øª', icon:'ğŸ“‹', url:'https://drive.google.com/file/d/1AEtBJgibYuSxVD_bSZgAlFgODnadZcDMTZaKle3pnYg/preview' },
            { code:'LD.32-ALT', name:'LD32 (Ù†Ø³Ø®Ø© Ø¥Ø¶Ø§ÙÙŠØ©)', category:'POL', categoryName:'Ø³ÙŠØ§Ø³Ø§Øª', icon:'ğŸ“œ', url:'https://drive.google.com/file/d/1x6R5DKODJ1MKghpPEnaR-1GIohAEILzmY6VNgAPgzAE/preview' },
            { code:'ACT-RM-2025-001', name:'Ø¹Ø±Ø¶ Ø§Ù„Ù…Ø´Ø§ÙƒÙ„ ÙˆØ®Ø·Ø© Ø§Ù„Ø­Ù„ÙˆÙ„ (Risk Issues & CAP)', category:'REP', categoryName:'ØªÙ‚Ø§Ø±ÙŠØ±', icon:'ğŸ“‘', url:'https://drive.google.com/file/d/1ZUBOoQgVbf41pcBxmU5iyoJzddd9e8JJDJ1Z2dekLfY/preview' }
        ];

        // Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø¬Ù…ÙŠØ¹ Ø§Ù„ØªØµÙ†ÙŠÙØ§Øª Ø§Ù„ÙØ±ÙŠØ¯Ø©
        const categories = [...new Set(RM_DOCS_ESSENTIAL.map(doc => doc.category))];
        const categoryNames = {
            'DEC': 'Ù‚Ø±Ø§Ø±Ø§Øª',
            'POL': 'Ø³ÙŠØ§Ø³Ø§Øª', 
            'FRM': 'Ù†Ù…Ø§Ø°Ø¬',
            'TOOL': 'Ø£Ø¯ÙˆØ§Øª',
            'LOG': 'Ø³Ø¬Ù„Ø§Øª',
            'DASH': 'Ù„ÙˆØ­Ø§Øª Ø§Ù„Ù‚ÙŠØ§Ø¯Ø©',
            'REF': 'Ù…Ø±Ø§Ø¬Ø¹',
            'REP': 'ØªÙ‚Ø§Ø±ÙŠØ±'
        };

        // ØªÙ‡ÙŠØ¦Ø© Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø¬Ø§Ù†Ø¨ÙŠØ© Ù„Ù„ØªØµÙ†ÙŠÙØ§Øª
        function initCategoryList() {
            const categoryList = document.getElementById('categoryList');
            
            // Ø¥Ø¶Ø§ÙØ© Ø¹Ù†ØµØ± "Ø§Ù„ÙƒÙ„"
            const allItem = document.createElement('li');
            allItem.textContent = 'Ø§Ù„ÙƒÙ„';
            allItem.classList.add('active');
            allItem.addEventListener('click', () => filterDocuments('all'));
            categoryList.appendChild(allItem);

            // Ø¥Ø¶Ø§ÙØ© Ø§Ù„ØªØµÙ†ÙŠÙØ§Øª
            categories.forEach(category => {
                const li = document.createElement('li');
                li.textContent = categoryNames[category] || category;
                li.setAttribute('data-category', category);
                li.addEventListener('click', () => filterDocuments(category));
                categoryList.appendChild(li);
            });
        }

        // Ø¹Ø±Ø¶ Ø§Ù„Ù…Ø³ØªÙ†Ø¯Ø§Øª
        function displayDocuments(documents) {
            const grid = document.getElementById('documentsGrid');
            grid.innerHTML = '';

            documents.forEach(doc => {
                const card = document.createElement('div');
                card.className = 'document-card';
                
                card.innerHTML = `
                    <div class="doc-header">
                        <span class="doc-code">${doc.icon} ${doc.code}</span>
                        <span class="doc-category">${doc.categoryName}</span>
                    </div>
                    <div class="doc-name">${doc.name}</div>
                    <div class="doc-actions">
                        <a href="${doc.url}" target="_blank" class="btn btn-view">Ø¹Ø±Ø¶</a>
                        <button class="btn btn-category" onclick="filterDocuments('${doc.category}')">ÙØ¦Ø© ÙÙŠ ØªÙˆÙŠØ¨</button>
                    </div>
                `;
                
                grid.appendChild(card);
            });
        }

        // ØªØµÙÙŠØ© Ø§Ù„Ù…Ø³ØªÙ†Ø¯Ø§Øª Ø­Ø³Ø¨ Ø§Ù„ØªØµÙ†ÙŠÙ
        function filterDocuments(category) {
            const currentCategory = document.getElementById('currentCategory');
            const categoryItems = document.querySelectorAll('#categoryList li');
            
            // ØªØ­Ø¯ÙŠØ« Ø§Ù„ØªØµÙ†ÙŠÙ Ø§Ù„Ù†Ø´Ø·
            categoryItems.forEach(item => {
                item.classList.remove('active');
                if (category === 'all' && item.textContent === 'Ø§Ù„ÙƒÙ„') {
                    item.classList.add('active');
                } else if (item.getAttribute('data-category') === category) {
                    item.classList.add('active');
                }
            });

            // ØªØµÙÙŠØ© Ø§Ù„Ù…Ø³ØªÙ†Ø¯Ø§Øª
            let filteredDocs;
            if (category === 'all') {
                filteredDocs = RM_DOCS_ESSENTIAL;
                currentCategory.textContent = 'Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ø³ØªÙ†Ø¯Ø§Øª';
            } else {
                filteredDocs = RM_DOCS_ESSENTIAL.filter(doc => doc.category === category);
                currentCategory.textContent = `${categoryNames[category]} - ${filteredDocs.length} Ù…Ø³ØªÙ†Ø¯`;
            }

            displayDocuments(filteredDocs);
        }

        // ØªÙ‡ÙŠØ¦Ø© Ø§Ù„ØµÙØ­Ø©
        document.addEventListener('DOMContentLoaded', () => {
            initCategoryList();
            displayDocuments(RM_DOCS_ESSENTIAL);
        });
    </script>
</body>
</html>
// ====== Ù…Ø¤Ø´Ø±Ø§Øª PSC ======
const PSC_KPI_DATA = [
  { Ø§Ù„Ø´Ù‡Ø±: 'ÙŠÙ†Ø§ÙŠØ±', ØªØ¹Ø±ÙŠÙ_Ø§Ù„Ù…Ø±ÙŠØ¶: 98, Ø§Ù„ØªØ²Ø§Ù…_ØºØ³Ù„_Ø§Ù„ÙŠØ¯ÙŠÙ†: 85, Ø£Ø®Ø·Ø§Ø¡_Ø¯ÙˆØ§Ø¡: 5.2, Ø³Ù‚ÙˆØ·: 3.1, Ø¨Ù„Ø§ØºØ§Øª_Ù‚Ø±ÙŠØ¨Ø©: 12 },
  { Ø§Ù„Ø´Ù‡Ø±: 'ÙØ¨Ø±Ø§ÙŠØ±', ØªØ¹Ø±ÙŠÙ_Ø§Ù„Ù…Ø±ÙŠØ¶: 99, Ø§Ù„ØªØ²Ø§Ù…_ØºØ³Ù„_Ø§Ù„ÙŠØ¯ÙŠÙ†: 82, Ø£Ø®Ø·Ø§Ø¡_Ø¯ÙˆØ§Ø¡: 6.1, Ø³Ù‚ÙˆØ·: 3.5, Ø¨Ù„Ø§ØºØ§Øª_Ù‚Ø±ÙŠØ¨Ø©: 8 },
  { Ø§Ù„Ø´Ù‡Ø±: 'Ù…Ø§Ø±Ø³', ØªØ¹Ø±ÙŠÙ_Ø§Ù„Ù…Ø±ÙŠØ¶: 92, Ø§Ù„ØªØ²Ø§Ù…_ØºØ³Ù„_Ø§Ù„ÙŠØ¯ÙŠÙ†: 88, Ø£Ø®Ø·Ø§Ø¡_Ø¯ÙˆØ§Ø¡: 8.5, Ø³Ù‚ÙˆØ·: 4.8, Ø¨Ù„Ø§ØºØ§Øª_Ù‚Ø±ÙŠØ¨Ø©: 15 },
  { Ø§Ù„Ø´Ù‡Ø±: 'Ø£Ø¨Ø±ÙŠÙ„', ØªØ¹Ø±ÙŠÙ_Ø§Ù„Ù…Ø±ÙŠØ¶: 99, Ø§Ù„ØªØ²Ø§Ù…_ØºØ³Ù„_Ø§Ù„ÙŠØ¯ÙŠÙ†: 95, Ø£Ø®Ø·Ø§Ø¡_Ø¯ÙˆØ§Ø¡: 4.0, Ø³Ù‚ÙˆØ·: 3.0, Ø¨Ù„Ø§ØºØ§Øª_Ù‚Ø±ÙŠØ¨Ø©: 35 },
  { Ø§Ù„Ø´Ù‡Ø±: 'Ù…Ø§ÙŠÙˆ', ØªØ¹Ø±ÙŠÙ_Ø§Ù„Ù…Ø±ÙŠØ¶: 100, Ø§Ù„ØªØ²Ø§Ù…_ØºØ³Ù„_Ø§Ù„ÙŠØ¯ÙŠÙ†: 96, Ø£Ø®Ø·Ø§Ø¡_Ø¯ÙˆØ§Ø¡: 3.5, Ø³Ù‚ÙˆØ·: 2.9, Ø¨Ù„Ø§ØºØ§Øª_Ù‚Ø±ÙŠØ¨Ø©: 28 },
];

// ====== Ù…ÙƒØªØ¨Ø© RM Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ© ======
function renderRMLibrary() {
  const mount = document.getElementById('rmLib');
  if (!mount) return;
  
  mount.innerHTML = `
    <div class="flex flex-wrap items-center gap-2 mb-3">
      <button data-rm="ALL" class="px-3 py-1 rounded-full bg-[var(--brand1)] text-white text-sm">Ø§Ù„ÙƒÙ„</button>
      ${[...new Set(RM_DOCS_ESSENTIAL.map(item => item.category))].map(cat => 
        `<button data-rm="${cat}" class="px-3 py-1 rounded-full bg-gray-200 hover:bg-gray-300 text-sm">${cat}</button>`
      ).join('')}
      <div class="ml-auto w-full md:w-64">
        <input id="rmSearch" type="text" placeholder="Ø¨Ø­Ø«..." class="w-full border rounded-lg px-3 py-2">
      </div>
    </div>
    <div id="rmGrid" class="grid-cards"></div>
  `;
  
  const grid = mount.querySelector('#rmGrid');
  
  function renderRMItems(filter = 'ALL', query = '') {
    grid.innerHTML = '';
    const searchQuery = query.toLowerCase();
    
    const filteredItems = RM_DOCS_ESSENTIAL.filter(item => {
      const matchesFilter = filter === 'ALL' || item.category === filter;
      const matchesQuery = !searchQuery || 
        item.code.toLowerCase().includes(searchQuery) || 
        item.name.toLowerCase().includes(searchQuery);
      return matchesFilter && matchesQuery;
    });
    
    filteredItems.forEach(item => {
      const card = document.createElement('div');
      card.className = 'p-4 rounded-xl border bg-white shadow-sm hover:shadow-md transition flex flex-col';
      card.innerHTML = `
        <div class="text-xs text-gray-500 mb-1">${item.category}</div>
        <div class="font-extrabold text-[var(--brand1)]">${item.code}</div>
        <div class="text-gray-800 mt-1 flex-1">${item.name}</div>
        <div class="mt-3 flex gap-2">
          <button class="px-3 py-2 text-sm text-white rounded-lg bg-[var(--brand1)] hover:bg-[var(--brand2)]" 
                  onclick="openDocModal('${item.code}: ${item.name}', '${item.url}')">
            <i class="fas fa-eye ml-1"></i> Ø¹Ø±Ø¶
          </button>
          <a class="px-3 py-2 text-sm rounded-lg border hover:bg-gray-50" 
             target="_blank" href="${item.url.replace('/preview', '/view')}">
            <i class="fas fa-up-right-from-square ml-1"></i> ÙØªØ­ ÙÙŠ ØªØ¨ÙˆÙŠØ¨
          </a>
        </div>
      `;
      grid.appendChild(card);
    });
  }
  
  mount.querySelectorAll('button[data-rm]').forEach(button => {
    button.addEventListener('click', () => {
      mount.querySelectorAll('button[data-rm]').forEach(btn => {
        btn.classList.remove('bg-[var(--brand1)]', 'text-white');
      });
      button.classList.add('bg-[var(--brand1)]', 'text-white');
      renderRMItems(button.getAttribute('data-rm'), mount.querySelector('#rmSearch').value || '');
    });
  });
  
  mount.querySelector('#rmSearch').addEventListener('input', (e) => {
    const activeFilter = mount.querySelector('button[data-rm].bg-[var(--brand1)]') || 
                        { getAttribute: () => 'ALL' };
    renderRMItems(activeFilter.getAttribute('data-rm'), e.target.value);
  });
  
  renderRMItems('ALL', '');
}

// ====== Ù…ÙƒØªØ¨Ø© ÙˆØ«Ø§Ø¦Ù‚ PSC ======
  const PSC_DOCS_LIBRARY = [
    { code:'POL-PSC-2025-001', name:'Ø³ÙŠØ§Ø³Ø© Ø¨Ø±Ù†Ø§Ù…Ø¬ Ø³Ù„Ø§Ù…Ø© Ø§Ù„Ù…Ø±Ø¶Ù‰', category:'POL', url:'https://drive.google.com/file/d/1FEdKvutCYqWXYwnp70OsjRO-CIzzmZU2CAFstiFVmMw/preview' },
    { code:'DEC-PSC-2025-001', name:'Ù‚Ø±Ø§Ø± ØªØ´ÙƒÙŠÙ„ Ù„Ø¬Ù†Ø© Ø³Ù„Ø§Ù…Ø© Ø§Ù„Ù…Ø±Ø¶Ù‰', category:'DEC', url:'https://drive.google.com/file/d/1Qz7s61wIuWh1RbSLbMyrzWB_GwoPnfwqhZQHMKpgeyc/preview' },
    { code:'CHT-PSC-2025-001', name:'Ù…ÙŠØ«Ø§Ù‚ Ù„Ø¬Ù†Ø© Ø³Ù„Ø§Ù…Ø© Ø§Ù„Ù…Ø±Ø¶Ù‰', category:'CHT', url:'https://drive.google.com/file/d/1pDDwB4Y-l7EQbwJpLH5o9PpCbdhTFQleai7PvU2Ltjg/preview' },
    { code:'POL-PSC-2025-003', name:'Ø³ÙŠØ§Ø³Ø© Ø§Ù„ØªØ¹Ø±Ù Ø§Ù„Ù…Ø²Ø¯ÙˆØ¬ Ø¹Ù„Ù‰ Ø§Ù„Ù…Ø±ÙŠØ¶', category:'POL', url:'https://drive.google.com/file/d/1yNGDW_yLN9OrguG-_lJzXKxk6y0rJfjfc7aONgQiNqQ/preview' },
    { code:'POL-PSC-2025-002', name:'Ø³ÙŠØ§Ø³Ø© Ø§Ù„Ø¥Ø¨Ù„Ø§Øº ÙˆØ§Ù„ØªØ¹Ù„Ù… Ù…Ù† Ø§Ù„Ø£Ø®Ø·Ø§Ø¡ Ø§Ù„Ø¯ÙˆØ§Ø¦ÙŠØ©', category:'POL', url:'https://drive.google.com/file/d/1VRoEZjXxeIoHlDvtmmus-NM-zNK-oARCh_8_u74S7c0/preview' },
    { code:'FRM-PSC-2025-001', name:'Ù†Ù…ÙˆØ°Ø¬ Ù…Ø­Ø¶Ø± Ø§Ø¬ØªÙ…Ø§Ø¹ Ù„Ø¬Ù†Ø© Ø³Ù„Ø§Ù…Ø© Ø§Ù„Ù…Ø±Ø¶Ù‰', category:'FRM', url:'https://drive.google.com/file/d/1KVTIutS3sdWTYhc1ZB-p9J3fXDjEu-CajxwlYyocz44/preview' },
    { code:'CHK-PSC-2025-001', name:'Ù†Ù…ÙˆØ°Ø¬ Ù…Ø±Ø§Ø¬Ø¹Ø© ØªØ¹Ø±ÙŠÙ Ø§Ù„Ù…Ø±ÙŠØ¶', category:'CHK', url:'https://drive.google.com/file/d/1oS_fO9mBIggmaXbPfaXB3H1YKyTlwgGfT8Hwbs9qi7E/preview' },
    { code:'CHK-PSC-2025-002', name:'Ù…Ø±Ø§Ø¬Ø¹Ø© Ø£Ø¯ÙˆÙŠØ© Ø¹Ø§Ù„ÙŠØ© Ø§Ù„Ø®Ø·ÙˆØ±Ø©', category:'CHK', url:'https://drive.google.com/file/d/1t4Pt6bkxp9ER5mnc3lcDqy_E5z3eMm9WTqilWIPAIBM/preview' },
    { code:'LOG-PSC-2025-001', name:'Ø³Ø¬Ù„ Ø§Ù„Ø­ÙˆØ§Ø¯Ø« ÙˆØ³Ù„Ø§Ù…Ø© Ø§Ù„Ù…Ø±Ø¶Ù‰', category:'LOG', url:'https://drive.google.com/file/d/12SS-Nn_TpvIsIoUfdOPRzC_tgLqmb2hfZZi53_dSyVI/preview' },
    { code:'FRM-PSC-2025-002', name:'Ù†Ù…ÙˆØ°Ø¬ SBAR Ù„Ù„ØªØ³Ù„ÙŠÙ…', category:'FRM', url:'https://drive.google.com/file/d/1JgEPxYvK6X_cQ7eroNCkymfUzbTCbzljqvrOKYKBw1g/preview' },
    { code:'FRM-PSC-2025-003', name:'Ù†Ù…ÙˆØ°Ø¬ PDSA Ù„ØªØ­Ø³ÙŠÙ† Ø§Ù„Ø¬ÙˆØ¯Ø©', category:'FRM', url:'https://drive.google.com/file/d/1XE45nGctQGK3WIFnUxE5CqsIZu8BdBLZuqOLgsZaPXk/preview' },
    { code:'FRM-PSC-2025-004', name:'Ù†Ù…ÙˆØ°Ø¬ Ø¥Ø­Ø§Ù„Ø© Ù„Ù„Ø¬Ù†Ø© M&M', category:'FRM', url:'https://drive.google.com/file/d/1LbD4aaIcyIDPJi2Cn_J69OEnpeCF3XTFCjjDstr2ny8/preview' },
    { code:'REP-PSC-2025-001', name:'ØªÙ‚Ø±ÙŠØ± Ù…Ø¤Ø´Ø±Ø§Øª Ø³Ù„Ø§Ù…Ø© Ø§Ù„Ù…Ø±Ø¶Ù‰', category:'REP', url:'https://drive.google.com/file/d/1wZGnfGcj1O-329jBUXfPHXqA09k6VS58mpu4rNELS20/preview' },
    { code:'TRN-PSC-2025-001', name:'Ø®Ø·Ø© Ø§Ù„ØªÙˆØ¹ÙŠØ© ÙˆØ§Ù„ØªØ¯Ø±ÙŠØ¨', category:'TRN', url:'https://drive.google.com/file/d/1Ohj-mB-Jk3mmdrW9Lm6GNSojRJaT__GQpjO7aFG4twY/preview' },
    { code:'TRN-PSC-2025-002', name:'Ø³Ø¬Ù„ Ø­Ø¶ÙˆØ± ØªØ¯Ø±ÙŠØ¨', category:'TRN', url:'https://drive.google.com/file/d/1Sgj_Qps21a3GoalpZAf-08b43UmL30GLUvY8UQqyxjg/preview' },
    { code:'TRN-PSC-2025-002B', name:'Ø³Ø¬Ù„ Ø­Ø¶ÙˆØ± ØªØ¯Ø±ÙŠØ¨ (Ù†Ø³Ø®Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…)', category:'TRN', url:'https://drive.google.com/file/d/1GIOUPLH9AzWB0PKZiaV_NJoQwjkbzZLyaPkoaV1niC8/preview' }
  ];

  const PSC_CATEGORY_NAMES = {
    POL:'Ø§Ù„Ø³ÙŠØ§Ø³Ø§Øª', 
    DEC:'Ø§Ù„Ù‚Ø±Ø§Ø±Ø§Øª', 
    CHT:'Ø§Ù„Ù…ÙŠØ«Ø§Ù‚',
    FRM:'Ø§Ù„Ù†Ù…Ø§Ø°Ø¬', 
    CHK:'Ù‚ÙˆØ§Ø¦Ù… Ø§Ù„ØªØ­Ù‚Ù‚', 
    LOG:'Ø§Ù„Ø³Ø¬Ù„Ø§Øª', 
    REP:'Ø§Ù„ØªÙ‚Ø§Ø±ÙŠØ±', 
    TRN:'Ø§Ù„ØªØ¯Ø±ÙŠØ¨'
  };

  // ====== Ø¯ÙˆØ§Ù„ PSC ======
  function switchPscTab(tab) {
    // ØªØ­Ø¯ÙŠØ« Ø£Ø²Ø±Ø§Ø± Ø§Ù„ØªØ¨ÙˆÙŠØ¨
    document.querySelectorAll('[data-psc-tab]').forEach(button => {
      if (button.getAttribute('data-psc-tab') === tab) {
        button.classList.add('bg-[var(--brand1)]', 'text-white');
        button.classList.remove('bg-gray-100');
      } else {
        button.classList.remove('bg-[var(--brand1)]', 'text-white');
        button.classList.add('bg-gray-100');
      }
    });
    
    const container = document.getElementById('pscTabContent');
    container.innerHTML = '';
    
    if (tab === 'library') {
      renderPscLibrary(container, PSC_DOCS_LIBRARY);
    } else if (tab === 'indicators') {
      renderPscIndicators(container);
    } else if (tab === 'reporting') {
      renderPscReporting(container);
    } else if (tab === 'needs') {
      renderPscNeeds(container);
    } else if (tab === 'forms') {
      renderPscForms(container);
    }
  }

  function renderPscLibrary(container, docs) {
    // Ø¹Ù†Ø§ØµØ± Ø§Ù„ØªØ­ÙƒÙ…
    const categories = [...new Set(docs.map(doc => doc.category))];
    const controls = document.createElement('div');
    controls.className = 'flex flex-wrap items-center gap-2 mb-4';
    controls.innerHTML = `
      <div class="flex flex-wrap gap-2">
        <button data-psc-filter="ALL" class="px-3 py-1 rounded-full bg-[var(--brand1)] text-white text-sm">Ø§Ù„ÙƒÙ„</button>
        ${categories.map(cat => 
          `<button data-psc-filter="${cat}" class="px-3 py-1 rounded-full bg-gray-200 hover:bg-gray-300 text-sm">${PSC_CATEGORY_NAMES[cat] || cat}</button>`
        ).join('')}
      </div>
      <div class="ml-auto w-full md:w-64">
        <input id="pscSearch" type="text" placeholder="Ø§Ø¨Ø­Ø« Ø¨Ø§Ù„Ø±Ù…Ø² Ø£Ùˆ Ø§Ù„Ø¹Ù†ÙˆØ§Ù†..." class="w-full border rounded-lg px-3 py-2">
      </div>
    `;
    
    const grid = document.createElement('div');
    grid.className = 'grid-cards';
    grid.id = 'pscGrid';
    
    container.appendChild(controls);
    container.appendChild(grid);
    
    // Ø¯Ø§Ù„Ø© Ø§Ù„ØªØµÙÙŠØ© ÙˆØ§Ù„Ø¹Ø±Ø¶
    function renderFilteredDocs(filter = 'ALL', query = '') {
      grid.innerHTML = '';
      const searchQuery = query.toLowerCase();
      
      const filteredDocs = docs.filter(doc => {
        const matchesFilter = filter === 'ALL' || doc.category === filter;
        const matchesQuery = !searchQuery || 
          doc.code.toLowerCase().includes(searchQuery) || 
          doc.name.toLowerCase().includes(searchQuery);
        return matchesFilter && matchesQuery;
      });
      
      filteredDocs.forEach(doc => {
        const card = document.createElement('div');
        card.className = 'p-4 rounded-xl border bg-white shadow-sm hover:shadow-md transition flex flex-col';
        card.innerHTML = `
          <div class="text-xs text-gray-500 mb-1">${PSC_CATEGORY_NAMES[doc.category] || doc.category}</div>
          <div class="font-extrabold text-[var(--brand1)]">${doc.code}</div>
          <div class="text-gray-800 mt-1 flex-1">${doc.name}</div>
          <div class="mt-3 flex gap-2">
            <button class="px-3 py-2 text-sm text-white rounded-lg bg-[var(--brand1)] hover:bg-[var(--brand2)]" 
                    onclick="openDocModal('${doc.code}: ${doc.name}', '${doc.url}')">
              <i class="fas fa-eye ml-1"></i> Ø¹Ø±Ø¶
            </button>
            <a class="px-3 py-2 text-sm rounded-lg border hover:bg-gray-50" 
               target="_blank" href="${doc.url.replace('/preview', '/view')}">
              <i class="fas fa-up-right-from-square ml-1"></i> ÙØªØ­ ÙÙŠ ØªØ¨ÙˆÙŠØ¨
            </a>
          </div>
        `;
        grid.appendChild(card);
      });
    }
    
    // Ø¥Ø¶Ø§ÙØ© Ù…Ø³ØªÙ…Ø¹ÙŠ Ø§Ù„Ø£Ø­Ø¯Ø§Ø«
    controls.querySelectorAll('button[data-psc-filter]').forEach(button => {
      button.addEventListener('click', () => {
        controls.querySelectorAll('button[data-psc-filter]').forEach(btn => {
          btn.classList.remove('bg-[var(--brand1)]', 'text-white');
        });
        button.classList.add('bg-[var(--brand1)]', 'text-white');
        renderFilteredDocs(button.getAttribute('data-psc-filter'), document.getElementById('pscSearch').value);
      });
    });
    
    document.getElementById('pscSearch').addEventListener('input', (e) => {
      const activeFilter = controls.querySelector('button[data-psc-filter].bg-[var(--brand1)]') || 
                          { getAttribute: () => 'ALL' };
      renderFilteredDocs(activeFilter.getAttribute('data-psc-filter'), e.target.value);
    });
    
    // Ø§Ù„ØªÙ‡ÙŠØ¦Ø© Ø§Ù„Ø£ÙˆÙ„ÙŠØ©
    renderFilteredDocs('ALL', '');
  }

  function renderPscIndicators(container) {
    const wrapper = document.createElement('div');
    wrapper.className = 'space-y-6';
    
    // Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ù…Ø¤Ø´Ø±Ø§Øª
    const tableSection = document.createElement('div');
    tableSection.innerHTML = `
      <h3 class="text-xl font-bold text-[var(--brand1)] mb-4">ğŸ“Š Ù…Ø¤Ø´Ø±Ø§Øª Ø³Ù„Ø§Ù…Ø© Ø§Ù„Ù…Ø±Ø¶Ù‰ Ø§Ù„Ø´Ù‡Ø±ÙŠØ©</h3>
      <div class="overflow-auto">
        <table class="kpi-table">
          <thead>
            <tr>
              <th>Ø§Ù„Ø´Ù‡Ø±</th>
              <th>ØªØ¹Ø±ÙŠÙ Ø§Ù„Ù…Ø±ÙŠØ¶ %</th>
              <th>Ø§Ù„ØªØ²Ø§Ù… ØºØ³Ù„ Ø§Ù„ÙŠØ¯ÙŠÙ† %</th>
              <th>Ø£Ø®Ø·Ø§Ø¡ Ø¯ÙˆØ§Ø¦ÙŠØ© Ù„ÙƒÙ„ 1000 ÙˆØµÙØ©</th>
              <th>Ø³Ù‚ÙˆØ· Ù„ÙƒÙ„ 1000 Ø²ÙŠØ§Ø±Ø©</th>
              <th>Ø¨Ù„Ø§ØºØ§Øª Ù‚Ø±ÙŠØ¨Ø© Ù…Ù† Ø§Ù„ÙˆÙ‚ÙˆØ¹</th>
            </tr>
          </thead>
          <tbody id="kpiTableBody"></tbody>
        </table>
      </div>
    `;
    
    // Ù…Ø®Ø·Ø· Ø¨ÙŠØ§Ù†ÙŠ Ù…Ø¨Ø³Ø·
    const chartSection = document.createElement('div');
    chartSection.innerHTML = `
      <h3 class="text-xl font-bold text-[var(--brand1)] mb-4">ğŸ“ˆ ØªØ·ÙˆØ± Ù…Ø¤Ø´Ø±Ø§Øª Ø§Ù„Ø³Ù„Ø§Ù…Ø©</h3>
      <div class="border rounded-xl p-4 bg-white">
        <div class="flex flex-wrap gap-4 mb-4">
          <button class="px-3 py-1 rounded-full bg-[var(--brand1)] text-white text-sm" onclick="renderPscChart('ØªØ¹Ø±ÙŠÙ_Ø§Ù„Ù…Ø±ÙŠØ¶')">ØªØ¹Ø±ÙŠÙ Ø§Ù„Ù…Ø±ÙŠØ¶</button>
          <button class="px-3 py-1 rounded-full bg-gray-200 text-sm" onclick="renderPscChart('Ø§Ù„ØªØ²Ø§Ù…_ØºØ³Ù„_Ø§Ù„ÙŠØ¯ÙŠÙ†')">ØºØ³Ù„ Ø§Ù„ÙŠØ¯ÙŠÙ†</button>
          <button class="px-3 py-1 rounded-full bg-gray-200 text-sm" onclick="renderPscChart('Ø£Ø®Ø·Ø§Ø¡_Ø¯ÙˆØ§Ø¡')">Ø§Ù„Ø£Ø®Ø·Ø§Ø¡ Ø§Ù„Ø¯ÙˆØ§Ø¦ÙŠØ©</button>
          <button class="px-3 py-1 rounded-full bg-gray-200 text-sm" onclick="renderPscChart('Ø³Ù‚ÙˆØ·')">Ù…Ø¹Ø¯Ù„ Ø§Ù„Ø³Ù‚ÙˆØ·</button>
        </div>
        <div id="pscChart" class="h-64 bg-gray-50 rounded-lg flex items-center justify-center">
          <p class="text-gray-500">Ø§Ø®ØªØ± Ù…Ø¤Ø´Ø±Ø§Ù‹ Ù„Ø¹Ø±Ø¶ Ø§Ù„Ø±Ø³Ù… Ø§Ù„Ø¨ÙŠØ§Ù†ÙŠ</p>
        </div>
      </div>
    `;
    
    wrapper.appendChild(tableSection);
    wrapper.appendChild(chartSection);
    container.appendChild(wrapper);
    
    // Ù…Ù„Ø¡ Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ù…Ø¤Ø´Ø±Ø§Øª
    renderPscKpiTable();
  }

  function renderPscKpiTable() {
    const tableBody = document.getElementById('kpiTableBody');
    tableBody.innerHTML = '';
    
    PSC_KPI_DATA.forEach(row => {
      const tr = document.createElement('tr');
      
      // ØªØ­Ø¯ÙŠØ¯ ÙØ¦Ø§Øª Ø§Ù„Ø£Ù„ÙˆØ§Ù† Ø¨Ù†Ø§Ø¡Ù‹ Ø¹Ù„Ù‰ Ø§Ù„Ù‚ÙŠÙ…
      const patientIdClass = row.ØªØ¹Ø±ÙŠÙ_Ø§Ù„Ù…Ø±ÙŠØ¶ >= 95 ? 'good' : row.ØªØ¹Ø±ÙŠÙ_Ø§Ù„Ù…Ø±ÙŠØ¶ >= 90 ? 'warning' : 'critical';
      const handHygieneClass = row.Ø§Ù„ØªØ²Ø§Ù…_ØºØ³Ù„_Ø§Ù„ÙŠØ¯ÙŠÙ† >= 90 ? 'good' : row.Ø§Ù„ØªØ²Ø§Ù…_ØºØ³Ù„_Ø§Ù„ÙŠØ¯ÙŠÙ† >= 80 ? 'warning' : 'critical';
      const medErrorsClass = row.Ø£Ø®Ø·Ø§Ø¡_Ø¯ÙˆØ§Ø¡ <= 4 ? 'good' : row.Ø£Ø®Ø·Ø§Ø¡_Ø¯ÙˆØ§Ø¡ <= 6 ? 'warning' : 'critical';
      const fallsClass = row.Ø³Ù‚ÙˆØ· <= 3 ? 'good' : row.Ø³Ù‚ÙˆØ· <= 4 ? 'warning' : 'critical';
      const nearMissClass = row.Ø¨Ù„Ø§ØºØ§Øª_Ù‚Ø±ÙŠØ¨Ø© >= 20 ? 'good' : row.Ø¨Ù„Ø§ØºØ§Øª_Ù‚Ø±ÙŠØ¨Ø© >= 10 ? 'warning' : 'critical';
      
      tr.innerHTML = `
        <td class="font-semibold">${row.Ø§Ù„Ø´Ù‡Ø±}</td>
        <td class="${patientIdClass}">${row.ØªØ¹Ø±ÙŠÙ_Ø§Ù„Ù…Ø±ÙŠØ¶}%</td>
        <td class="${handHygieneClass}">${row.Ø§Ù„ØªØ²Ø§Ù…_ØºØ³Ù„_Ø§Ù„ÙŠØ¯ÙŠÙ†}%</td>
        <td class="${medErrorsClass}">${row.Ø£Ø®Ø·Ø§Ø¡_Ø¯ÙˆØ§Ø¡}</td>
        <td class="${fallsClass}">${row.Ø³Ù‚ÙˆØ·}</td>
        <td class="${nearMissClass}">${row.Ø¨Ù„Ø§ØºØ§Øª_Ù‚Ø±ÙŠØ¨Ø©}</td>
      `;
      tableBody.appendChild(tr);
    });
  }

  function renderPscChart(indicator) {
    const chartContainer = document.getElementById('pscChart');
    const indicatorName = {
      'ØªØ¹Ø±ÙŠÙ_Ø§Ù„Ù…Ø±ÙŠØ¶': 'ØªØ¹Ø±ÙŠÙ Ø§Ù„Ù…Ø±ÙŠØ¶ %',
      'Ø§Ù„ØªØ²Ø§Ù…_ØºØ³Ù„_Ø§Ù„ÙŠØ¯ÙŠÙ†': 'Ø§Ù„ØªØ²Ø§Ù… ØºØ³Ù„ Ø§Ù„ÙŠØ¯ÙŠÙ† %', 
      'Ø£Ø®Ø·Ø§Ø¡_Ø¯ÙˆØ§Ø¡': 'Ø§Ù„Ø£Ø®Ø·Ø§Ø¡ Ø§Ù„Ø¯ÙˆØ§Ø¦ÙŠØ©',
      'Ø³Ù‚ÙˆØ·': 'Ù…Ø¹Ø¯Ù„ Ø§Ù„Ø³Ù‚ÙˆØ·'
    }[indicator];
    
    // Ø±Ø³Ù… Ø¨ÙŠØ§Ù†ÙŠ Ù…Ø¨Ø³Ø· Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… HTML ÙˆCSS
    const maxValue = Math.max(...PSC_KPI_DATA.map(row => row[indicator]));
    const minValue = Math.min(...PSC_KPI_DATA.map(row => row[indicator]));
    
    let chartHTML = `
      <div class="w-full h-full p-4">
        <h4 class="text-center font-bold mb-4">${indicatorName}</h4>
        <div class="flex items-end justify-between h-40 gap-2">
    `;
    
    PSC_KPI_DATA.forEach((row, index) => {
      const value = row[indicator];
      const percentage = ((value - minValue) / (maxValue - minValue)) * 80 + 20;
      
      chartHTML += `
        <div class="flex flex-col items-center flex-1">
          <div class="text-xs mb-1">${row.Ø§Ù„Ø´Ù‡Ø±}</div>
          <div class="w-full bg-[var(--brand1)] rounded-t transition-all" style="height: ${percentage}%"></div>
          <div class="text-xs mt-1">${value}</div>
        </div>
      `;
    });
    
    chartHTML += `</div></div>`;
    chartContainer.innerHTML = chartHTML;
    
    // ØªØ­Ø¯ÙŠØ« Ø£Ø²Ø±Ø§Ø± Ø§Ù„Ù…Ø¤Ø´Ø±Ø§Øª Ø§Ù„Ù†Ø´Ø·Ø©
    (document.getElementById('pscChart') && document.getElementById('pscChart').closest('.border') ? document.getElementById('pscChart').closest('.border').querySelectorAll('button') : []).forEach(btn => {
      btn.classList.remove('bg-[var(--brand1)]', 'text-white');
      btn.classList.add('bg-gray-200');
    });
    
    const activeButton = document.querySelector(`[onclick="renderPscChart('${indicator}')"]`);
    if (activeButton) {
      activeButton.classList.add('bg-[var(--brand1)]', 'text-white');
      activeButton.classList.remove('bg-gray-200');
    }
  }

  function renderPscReporting(container) {
    const wrapper = document.createElement('div');
    wrapper.className = 'space-y-6';
    
    // Ù†Ù…Ø§Ø°Ø¬ Ø§Ù„Ø¥Ø¨Ù„Ø§Øº Ø§Ù„Ø³Ø±ÙŠØ¹
    const quickReports = document.createElement('div');
    quickReports.innerHTML = `
      <h3 class="text-xl font-bold text-[var(--brand1)] mb-4">ğŸ“ Ù†Ù…Ø§Ø°Ø¬ Ø§Ù„Ø¥Ø¨Ù„Ø§Øº Ø§Ù„Ø³Ø±ÙŠØ¹</h3>
      <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
        <a href="https://drive.google.com/file/d/1rFQjcCWP010zLNb4FfRtT1aTmrbY9fyjGcMeYIXSQqQ/view" target="_blank" class="p-4 border rounded-xl bg-white hover:shadow-md transition flex items-center gap-3">
          <div class="h-12 w-12 rounded-full bg-red-100 grid place-items-center text-red-600">
            <i class="fas fa-exclamation-triangle"></i>
          </div>
          <div>
            <div class="font-bold">Ø¨Ù„Ø§Øº Ø­Ø§Ø¯Ø«</div>
            <div class="text-sm text-gray-600">Ù„Ù„Ø¨Ø·Ø§Ù„Ø§Øª Ø¹Ù† Ø§Ù„Ø£Ø­Ø¯Ø§Ø« Ø§Ù„Ø³Ù„Ø¨ÙŠØ© Ø§Ù„ØªÙŠ ÙˆÙ‚Ø¹Øª</div>
          </div>
        </a>
        
        <a href="https://drive.google.com/file/d/1DhGR9WtVrM2LxITiv8WBMSCKs407Kb-vUZXg0mZVwD0/view" target="_blank" class="p-4 border rounded-xl bg-white hover:shadow-md transition flex items-center gap-3">
          <div class="h-12 w-12 rounded-full bg-yellow-100 grid place-items-center text-yellow-600">
            <i class="fas fa-bullseye"></i>
          </div>
          <div>
            <div class="font-bold">Ø¨Ù„Ø§Øº Ù‚Ø±ÙŠØ¨ Ù…Ù† Ø§Ù„ÙˆÙ‚ÙˆØ¹</div>
            <div class="text-sm text-gray-600">Ù„Ù„Ø¨Ø·Ø§Ù„Ø§Øª Ø¹Ù† Ø§Ù„Ø£Ø­Ø¯Ø§Ø« Ø§Ù„ØªÙŠ ÙƒØ§Ø¯Øª ØªÙ‚Ø¹</div>
          </div>
        </a>
        
        <a href="https://drive.google.com/file/d/1Yw7CFRvzssAWU0JYFkNz1Z9o0fQoMKCqoqrRhEHWZ_I/view" target="_blank" class="p-4 border rounded-xl bg-white hover:shadow-md transition flex items-center gap-3">
          <div class="h-12 w-12 rounded-full bg-orange-100 grid place-items-center text-orange-600">
            <i class="fas fa-triangle-exclamation"></i>
          </div>
          <div>
            <div class="font-bold">Ø¨Ù„Ø§Øº Ø®Ø·Ø±/Ø´Ø±Ø· ØºÙŠØ± Ø¢Ù…Ù†</div>
            <div class="text-sm text-gray-600">Ù„Ù„Ø¨Ø·Ø§Ù„Ø§Øª Ø¹Ù† Ø§Ù„Ù…Ø®Ø§Ø·Ø± Ø§Ù„Ù…Ø­ØªÙ…Ù„Ø©</div>
          </div>
        </a>
        
        <a href="https://drive.google.com/file/d/17tZnAvhWCvPbb5Bp3UymLxzEz-IciEjxV4Tn97tIWwQ/view" target="_blank" class="p-4 border rounded-xl bg-white hover:shadow-md transition flex items-center gap-3">
          <div class="h-12 w-12 rounded-full bg-blue-100 grid place-items-center text-blue-600">
            <i class="fas fa-toolbox"></i>
          </div>
          <div>
            <div class="font-bold">Ø¨Ù„Ø§Øº Ø¹Ø·Ù„ Ø¬Ù‡Ø§Ø²/ØªØ¬Ù‡ÙŠØ²</div>
            <div class="text-sm text-gray-600">Ù„Ù„Ø¨Ø·Ø§Ù„Ø§Øª Ø¹Ù† Ø§Ù„Ø£Ø¹Ø·Ø§Ù„ ÙÙŠ Ø§Ù„Ø£Ø¬Ù‡Ø²Ø© Ø§Ù„Ø·Ø¨ÙŠØ©</div>
          </div>
        </a>
      </div>
    `;
    
    // Ù†Ù…ÙˆØ°Ø¬ Ø¥Ø¯Ø®Ø§Ù„ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø¤Ø´Ø±Ø§Øª
    const dataEntry = document.createElement('div');
    dataEntry.className = 'border rounded-xl p-4 bg-white';
    dataEntry.innerHTML = `
      <h3 class="text-xl font-bold text-[var(--brand1)] mb-4">â• Ø¥Ø¯Ø®Ø§Ù„ Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ø¤Ø´Ø± Ø¬Ø¯ÙŠØ¯</h3>
      <form id="kpiForm" class="grid grid-cols-1 md:grid-cols-2 gap-4">
        <div>
          <label class="block text-sm font-semibold mb-1">Ø§Ù„Ø´Ù‡Ø± *</label>
          <select name="month" required class="w-full border rounded-lg px-3 py-2">
            <option value="">Ø§Ø®ØªØ± Ø§Ù„Ø´Ù‡Ø±</option>
            <option value="ÙŠÙ†Ø§ÙŠØ±">ÙŠÙ†Ø§ÙŠØ±</option>
            <option value="ÙØ¨Ø±Ø§ÙŠØ±">ÙØ¨Ø±Ø§ÙŠØ±</option>
            <option value="Ù…Ø§Ø±Ø³">Ù…Ø§Ø±Ø³</option>
            <option value="Ø£Ø¨Ø±ÙŠÙ„">Ø£Ø¨Ø±ÙŠÙ„</option>
            <option value="Ù…Ø§ÙŠÙˆ">Ù…Ø§ÙŠÙˆ</option>
            <option value="ÙŠÙˆÙ†ÙŠÙˆ">ÙŠÙˆÙ†ÙŠÙˆ</option>
            <option value="ÙŠÙˆÙ„ÙŠÙˆ">ÙŠÙˆÙ„ÙŠÙˆ</option>
            <option value="Ø£ØºØ³Ø·Ø³">Ø£ØºØ³Ø·Ø³</option>
            <option value="Ø³Ø¨ØªÙ…Ø¨Ø±">Ø³Ø¨ØªÙ…Ø¨Ø±</option>
            <option value="Ø£ÙƒØªÙˆØ¨Ø±">Ø£ÙƒØªÙˆØ¨Ø±</option>
            <option value="Ù†ÙˆÙÙ…Ø¨Ø±">Ù†ÙˆÙÙ…Ø¨Ø±</option>
            <option value="Ø¯ÙŠØ³Ù…Ø¨Ø±">Ø¯ÙŠØ³Ù…Ø¨Ø±</option>
          </select>
        </div>
        <div>
          <label class="block text-sm font-semibold mb-1">ØªØ¹Ø±ÙŠÙ Ø§Ù„Ù…Ø±ÙŠØ¶ % *</label>
          <input type="number" min="0" max="100" name="patient_id" required class="w-full border rounded-lg px-3 py-2" placeholder="Ø§Ù„Ù†Ø³Ø¨Ø© Ø§Ù„Ù…Ø¦ÙˆÙŠØ©">
        </div>
        <div>
          <label class="block text-sm font-semibold mb-1">Ø§Ù„ØªØ²Ø§Ù… ØºØ³Ù„ Ø§Ù„ÙŠØ¯ÙŠÙ† % *</label>
          <input type="number" min="0" max="100" name="hand_hygiene" required class="w-full border rounded-lg px-3 py-2" placeholder="Ø§Ù„Ù†Ø³Ø¨Ø© Ø§Ù„Ù…Ø¦ÙˆÙŠØ©">
        </div>
        <div>
          <label class="block text-sm font-semibold mb-1">Ø§Ù„Ø£Ø®Ø·Ø§Ø¡ Ø§Ù„Ø¯ÙˆØ§Ø¦ÙŠØ© *</label>
          <input type="number" step="0.1" min="0" name="med_errors" required class="w-full border rounded-lg px-3 py-2" placeholder="Ù„ÙƒÙ„ 1000 ÙˆØµÙØ©">
        </div>
        <div>
          <label class="block text-sm font-semibold mb-1">Ù…Ø¹Ø¯Ù„ Ø§Ù„Ø³Ù‚ÙˆØ· *</label>
          <input type="number" step="0.1" min="0" name="falls" required class="w-full border rounded-lg px-3 py-2" placeholder="Ù„ÙƒÙ„ 1000 Ø²ÙŠØ§Ø±Ø©">
        </div>
        <div>
          <label class="block text-sm font-semibold mb-1">Ø§Ù„Ø¨Ù„Ø§ØºØ§Øª Ù‚Ø±ÙŠØ¨Ø© Ø§Ù„ÙˆÙ‚ÙˆØ¹ *</label>
          <input type="number" min="0" name="near_miss" required class="w-full border rounded-lg px-3 py-2" placeholder="Ø§Ù„Ø¹Ø¯Ø¯">
        </div>
        <div class="md:col-span-2 flex items-center gap-3 pt-2">
          <button type="submit" class="px-4 py-2 rounded-lg bg-[var(--brand1)] text-white hover:bg-[var(--brand2)]">Ø­ÙØ¸ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª</button>
          <span id="kpiMsg" class="text-sm"></span>
        </div>
      </form>
    `;
    
    wrapper.appendChild(quickReports);
    wrapper.appendChild(dataEntry);
    container.appendChild(wrapper);
    
    // Ù…Ø¹Ø§Ù„Ø¬Ø© Ù†Ù…ÙˆØ°Ø¬ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
    const kpiForm = document.getElementById('kpiForm');
    if (kpiForm) {
      kpiForm.addEventListener('submit', function(e) {
        e.preventDefault();
        const messageElement = document.getElementById('kpiMsg');
        messageElement.textContent = 'Ø¬Ø§Ø±Ù Ø­ÙØ¸ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª...';
        messageElement.className = 'text-sm text-blue-600';
        
        // ÙÙŠ Ø¨ÙŠØ¦Ø© Ø­Ù‚ÙŠÙ‚ÙŠØ©ØŒ Ù‡Ù†Ø§ Ø³ÙŠØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù„Ø®Ø§Ø¯Ù…
        setTimeout(() => {
          messageElement.textContent = 'âœ… ØªÙ… Ø­ÙØ¸ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¨Ù†Ø¬Ø§Ø­ (ÙÙŠ Ø¨ÙŠØ¦Ø© Ø­Ù‚ÙŠÙ‚ÙŠØ© Ø³ÙŠØªÙ… Ø­ÙØ¸Ù‡Ø§ ÙÙŠ Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª)';
          messageElement.className = 'text-sm text-green-600';
          kpiForm.reset();
        }, 1000);
      });
    }
  }

  function renderPscForms(container) {
    const wrapper = document.createElement('div');
    wrapper.className = 'space-y-6';
    
    // Ù†Ù…ÙˆØ°Ø¬ ØªØ³Ø¬ÙŠÙ„ Ø­Ø§Ø¯Ø« Ø³Ù„Ø§Ù…Ø© Ø§Ù„Ù…Ø±Ø¶Ù‰
    const incidentForm = document.createElement('div');
    incidentForm.className = 'border rounded-xl p-4 bg-white';
    incidentForm.innerHTML = `
      <h3 class="text-xl font-bold text-[var(--brand1)] mb-4">ğŸ“ ØªØ³Ø¬ÙŠÙ„ Ø­Ø§Ø¯Ø« Ø³Ù„Ø§Ù…Ø© Ø§Ù„Ù…Ø±Ø¶Ù‰</h3>
      <form id="pscIncidentForm" class="grid grid-cols-1 md:grid-cols-2 gap-4">
        <div>
          <label class="block text-sm font-semibold mb-1">ØªØ§Ø±ÙŠØ® Ø§Ù„Ø­Ø§Ø¯Ø« *</label>
          <input type="date" name="incident_date" required class="w-full border rounded-lg px-3 py-2">
        </div>
        <div>
          <label class="block text-sm font-semibold mb-1">ÙˆÙ‚Øª Ø§Ù„Ø­Ø§Ø¯Ø« *</label>
          <input type="time" name="incident_time" required class="w-full border rounded-lg px-3 py-2">
        </div>
        <div>
          <label class="block text-sm font-semibold mb-1">Ù…ÙƒØ§Ù† Ø§Ù„Ø­Ø§Ø¯Ø« *</label>
          <input name="incident_location" required class="w-full border rounded-lg px-3 py-2" placeholder="Ø§Ù„Ø¹ÙŠØ§Ø¯Ø©ØŒ Ø§Ù„Ù‚Ø³Ù…...">
        </div>
        <div>
          <label class="block text-sm font-semibold mb-1">Ù†ÙˆØ¹ Ø§Ù„Ø­Ø§Ø¯Ø« *</label>
          <select name="incident_type" required class="w-full border rounded-lg px-3 py-2">
            <option value="">Ø§Ø®ØªØ± Ù†ÙˆØ¹ Ø§Ù„Ø­Ø§Ø¯Ø«</option>
            <option value="Ø³Ù‚ÙˆØ·">Ø³Ù‚ÙˆØ·</option>
            <option value="Ø®Ø·Ø£ Ø¯ÙˆØ§Ø¦ÙŠ">Ø®Ø·Ø£ Ø¯ÙˆØ§Ø¦ÙŠ</option>
            <option value="Ø®Ø·Ø£ ÙÙŠ Ø§Ù„ØªØ´Ø®ÙŠØµ">Ø®Ø·Ø£ ÙÙŠ Ø§Ù„ØªØ´Ø®ÙŠØµ</option>
            <option value="Ø¹Ø¯ÙˆÙ‰ Ù…Ø±ØªØ¨Ø·Ø© Ø¨Ø§Ù„Ø±Ø¹Ø§ÙŠØ© Ø§Ù„ØµØ­ÙŠØ©">Ø¹Ø¯ÙˆÙ‰ Ù…Ø±ØªØ¨Ø·Ø© Ø¨Ø§Ù„Ø±Ø¹Ø§ÙŠØ© Ø§Ù„ØµØ­ÙŠØ©</option>
            <option value="Ø¢Ø®Ø±">Ø¢Ø®Ø±</option>
          </select>
        </div>
        <div class="md:col-span-2">
          <label class="block text-sm font-semibold mb-1">ÙˆØµÙ Ø§Ù„Ø­Ø§Ø¯Ø« *</label>
          <textarea name="incident_description" rows="3" required class="w-full border rounded-lg px-3 py-2" placeholder="ÙˆØµÙ Ù…ÙØµÙ„ Ù„Ù„Ø­Ø§Ø¯Ø«..."></textarea>
        </div>
        <div class="md:col-span-2">
          <label class="block text-sm font-semibold mb-1">Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª Ø§Ù„Ù…ØªØ®Ø°Ø© *</label>
          <textarea name="actions_taken" rows="3" required class="w-full border rounded-lg px-3 py-2" placeholder="Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª Ø§Ù„ÙÙˆØ±ÙŠØ© ÙˆØ§Ù„Ù…ØªØ®Ø°Ø©..."></textarea>
        </div>
        <div>
          <label class="block text-sm font-semibold mb-1">Ø§Ø³Ù… Ø§Ù„Ù…Ø¨Ù„Øº *</label>
          <input name="reporter_name" required class="w-full border rounded-lg px-3 py-2" placeholder="Ø§Ø³Ù… Ø§Ù„Ø´Ø®Øµ Ø§Ù„Ø°ÙŠ Ø£Ø¨Ù„Øº Ø¹Ù† Ø§Ù„Ø­Ø§Ø¯Ø«">
        </div>
        <div>
          <label class="block text-sm font-semibold mb-1">Ø§Ù„ØªÙˆÙ‚ÙŠØ¹</label>
          <input name="signature" class="w-full border rounded-lg px-3 py-2" placeholder="Ø§Ù„ØªÙˆÙ‚ÙŠØ¹ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ">
        </div>
        <div class="md:col-span-2 flex items-center gap-3 pt-2">
          <button type="submit" class="px-4 py-2 rounded-lg bg-[var(--brand1)] text-white hover:bg-[var(--brand2)]">Ø­ÙØ¸ Ø§Ù„ØªÙ‚Ø±ÙŠØ±</button>
          <span id="pscIncidentMsg" class="text-sm"></span>
        </div>
      </form>
    `;
    
    wrapper.appendChild(incidentForm);
    container.appendChild(wrapper);
    
    // Ù…Ø¹Ø§Ù„Ø¬Ø© Ù†Ù…ÙˆØ°Ø¬ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø­Ø§Ø¯Ø«
    const pscIncidentForm = document.getElementById('pscIncidentForm');
    if (pscIncidentForm) {
      pscIncidentForm.addEventListener('submit', function(e) {
        e.preventDefault();
        const messageElement = document.getElementById('pscIncidentMsg');
        messageElement.textContent = 'Ø¬Ø§Ø±Ù Ø­ÙØ¸ Ø§Ù„ØªÙ‚Ø±ÙŠØ±...';
        messageElement.className = 'text-sm text-blue-600';
        
        // Ø­ÙØ¸ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ø­Ù„ÙŠØ§Ù‹
        const formData = new FormData(pscIncidentForm);
        const incidentData = {};
        formData.forEach((value, key) => {
          incidentData[key] = value;
        });
        incidentData.timestamp = new Date().toISOString();
        
        // Ø­ÙØ¸ ÙÙŠ localStorage
        let incidents = JSON.parse(localStorage.getItem('psc_incidents') || '[]');
        incidents.push(incidentData);
        localStorage.setItem('psc_incidents', JSON.stringify(incidents));
        
        messageElement.textContent = 'âœ… ØªÙ… Ø­ÙØ¸ Ø§Ù„ØªÙ‚Ø±ÙŠØ± Ø¨Ù†Ø¬Ø§Ø­';
        messageElement.className = 'text-sm text-green-600';
        pscIncidentForm.reset();
      });
    }
  }

  function renderPscNeeds(container) {
    const needs = [
      { key: 'charter', text: 'Ù…ÙŠØ«Ø§Ù‚ Ù„Ø¬Ù†Ø© Ø³Ù„Ø§Ù…Ø© Ø§Ù„Ù…Ø±Ø¶Ù‰ Ù…Ø¹ØªÙ…Ø¯ (CHT-PSC-2025-001)', required: true },
      { key: 'policy', text: 'Ø³ÙŠØ§Ø³Ø© Ø¨Ø±Ù†Ø§Ù…Ø¬ Ø³Ù„Ø§Ù…Ø© Ø§Ù„Ù…Ø±Ø¶Ù‰ Ù…Ø¹ØªÙ…Ø¯Ø© (POL-PSC-2025-001)', required: true },
      { key: 'committee', text: 'Ù‚Ø±Ø§Ø± ØªØ´ÙƒÙŠÙ„ Ø§Ù„Ù„Ø¬Ù†Ø© Ù…ÙØ¹Ù„ (DEC-PSC-2025-001)', required: true },
      { key: 'patient_id', text: 'Ø³ÙŠØ§Ø³Ø© Ø§Ù„ØªØ¹Ø±Ù Ø§Ù„Ù…Ø²Ø¯ÙˆØ¬ Ø¹Ù„Ù‰ Ø§Ù„Ù…Ø±ÙŠØ¶ Ù…Ø¹ØªÙ…Ø¯Ø© (POL-PSC-2025-003)', required: true },
      { key: 'med_errors', text: 'Ø³ÙŠØ§Ø³Ø© Ø§Ù„Ø¥Ø¨Ù„Ø§Øº Ø¹Ù† Ø§Ù„Ø£Ø®Ø·Ø§Ø¡ Ø§Ù„Ø¯ÙˆØ§Ø¦ÙŠØ© Ù…Ø¹ØªÙ…Ø¯Ø© (POL-PSC-2025-002)', required: true },
      { key: 'meetings', text: 'Ù…Ø­Ø§Ø¶Ø± Ø§Ø¬ØªÙ…Ø§Ø¹Ø§Øª Ø§Ù„Ù„Ø¬Ù†Ø© Ù…Ø³Ø¬Ù„Ø© ÙˆÙ…Ù†Ø¸Ù…Ø©', required: true },
      { key: 'indicators', text: 'Ù†Ø¸Ø§Ù… Ù…ØªØ§Ø¨Ø¹Ø© Ù…Ø¤Ø´Ø±Ø§Øª Ø§Ù„Ø³Ù„Ø§Ù…Ø© Ù…ÙØ¹Ù„', required: true },
      { key: 'training', text: 'Ø®Ø·Ø© ØªØ¯Ø±ÙŠØ¨ Ø³Ù„Ø§Ù…Ø© Ø§Ù„Ù…Ø±Ø¶Ù‰ Ù…Ù†ÙØ°Ø©', required: true },
    ];
    
    const wrapper = document.createElement('div');
    wrapper.className = 'grid-cards';
    
    needs.forEach(need => {
      const card = document.createElement('div');
      card.className = 'p-4 rounded-xl border bg-white shadow-sm';
      card.innerHTML = `
        <label class="flex items-start gap-3 cursor-pointer">
          <input type="checkbox" class="mt-1 h-5 w-5" data-required="${need.required ? 1 : 0}">
          <span class="font-semibold">${need.text}</span>
        </label>
        ${need.required ? '<div class="text-xs text-red-600 mt-1">Ù…ØªØ·Ù„Ø¨ Ø¥Ù„Ø²Ø§Ù…ÙŠ</div>' : ''}
      `;
      wrapper.appendChild(card);
    });
    
    const actions = document.createElement('div');
    actions.className = 'pt-4 flex gap-3';
    actions.innerHTML = `
      <button class="px-4 py-2 rounded-lg bg-[var(--brand1)] text-white hover:bg-[var(--brand2)]" onclick="validatePscNeeds()">
        ØªØ­Ù‚Ù‘Ù‚ Ù…Ù† Ø§Ù„Ø§ÙƒØªÙ…Ø§Ù„
      </button>
      <button class="px-4 py-2 rounded-lg border hover:bg-gray-50" onclick="generatePscReport()">
        Ø¥Ù†Ø´Ø§Ø¡ ØªÙ‚Ø±ÙŠØ± Ø§Ù„Ø¬Ø§Ù‡Ø²ÙŠØ©
      </button>
    `;
    
    container.appendChild(wrapper);
    container.appendChild(actions);
  }

  function validatePscNeeds() {
    const requiredCheckboxes = [...document.querySelectorAll('#pscTabContent input[data-required="1"]')];
    const missingCount = requiredCheckboxes.filter(checkbox => !checkbox.checked).length;
    
    if (missingCount === 0) {
      alert('Ù…Ù…ØªØ§Ø² âœ… â€” Ø¬Ù…ÙŠØ¹ Ù…ØªØ·Ù„Ø¨Ø§Øª Ø³Ù„Ø§Ù…Ø© Ø§Ù„Ù…Ø±Ø¶Ù‰ Ø§Ù„Ø¥Ù„Ø²Ø§Ù…ÙŠØ© Ù…ÙƒØªÙ…Ù„Ø©.');
    } else {
      alert(`âš ï¸ ØªÙ†Ø¨ÙŠÙ‡: ÙŠÙˆØ¬Ø¯ ${missingCount} Ù…ØªØ·Ù„Ø¨(Ø§Øª) Ø¥Ù„Ø²Ø§Ù…ÙŠ ØºÙŠØ± Ù…ÙƒØªÙ…Ù„ ÙÙŠ Ù‚Ø³Ù… Ø³Ù„Ø§Ù…Ø© Ø§Ù„Ù…Ø±Ø¶Ù‰.`);
    }
  }

  function generatePscReport() {
    const checkboxes = [...document.querySelectorAll('#pscTabContent input[type="checkbox"]')];
    const checkedCount = checkboxes.filter(checkbox => checkbox.checked).length;
    const totalCount = checkboxes.length;
    const percentage = Math.round((checkedCount / totalCount) * 100);
    
    alert(`ğŸ“‹ ØªÙ‚Ø±ÙŠØ± Ø¬Ø§Ù‡Ø²ÙŠØ© Ø³Ù„Ø§Ù…Ø© Ø§Ù„Ù…Ø±Ø¶Ù‰:\n\nâœ… ${checkedCount} Ù…Ù† ${totalCount} Ø¨Ù†Ø¯ Ù…ÙƒØªÙ…Ù„\nğŸ“Š Ù†Ø³Ø¨Ø© Ø§Ù„Ø¥ÙƒÙ…Ø§Ù„: ${percentage}%\n\n${percentage >= 80 ? 'Ù…Ø³ØªÙˆÙ‰ Ø¬ÙŠØ¯ âœ“' : 'ÙŠØ­ØªØ§Ø¬ Ø¥Ù„Ù‰ ØªØ­Ø³ÙŠÙ† âš ï¸'}`);
  }

  // ====== Ø§Ù„Ø¬ÙˆØ¯Ø© ÙˆØ§Ù„ØªØ­Ø³ÙŠÙ† (QI) ======
  const QI_DOCS_LIBRARY = [
    { code:'QI_Package_Index', name:'ÙÙ‡Ø±Ø³ ÙˆØ«Ø§Ø¦Ù‚ Ù„Ø¬Ù†Ø© Ø§Ù„Ø¬ÙˆØ¯Ø© ÙˆØ§Ù„ØªØ­Ø³ÙŠÙ† Ø§Ù„Ù…Ø³ØªÙ…Ø± (QI)', category:'INDEX', url:'https://drive.google.com/open?id=11nHPWSHeMVDPhpmIIY1mQfr3xWBhyMeXQL4m8rCkFE4' },
    { code:'LD.QI.FRM.004', name:'Ù†Ù…ÙˆØ°Ø¬ Ø§Ù„Ø¥Ø¨Ù„Ø§Øº Ø¹Ù† Ø­Ø§Ø¯Ø«/Ø­Ø¯Ø«', category:'FRM', url:'https://drive.google.com/open?id=1mBTZexeL6dRFW-WiSqLoYTnYJakG3jiGrZTtvhgIzsk' },
    { code:'LD.QI.AGN.001', name:'Ù†Ù…ÙˆØ°Ø¬ Ø¬Ø¯ÙˆÙ„ Ø£Ø¹Ù…Ø§Ù„ Ø§Ø¬ØªÙ…Ø§Ø¹ Ù„Ø¬Ù†Ø© Ø§Ù„Ø¬ÙˆØ¯Ø©', category:'FRM', url:'https://drive.google.com/open?id=1Fz3V5L9JuP0gOGvdLcPRMIZWNBo_WjpvAhrpOxM4zko' },
    { code:'LD.QI.FRM.002', name:'Ù†Ù…ÙˆØ°Ø¬ Ù…Ø´Ø±ÙˆØ¹ ØªØ­Ø³ÙŠÙ† â€” PDSA', category:'FRM', url:'https://drive.google.com/open?id=13w_V3iUq74n0xBJ3Rzh9uhPZs8cNY4MmGN528tO0eus' },
    { code:'LD.QI.SOP.003', name:'Ø¥Ø¬Ø±Ø§Ø¡ Ù‚ÙŠØ§Ø³ Ù…Ø¤Ø´Ø±Ø§Øª Ø§Ù„Ø£Ø¯Ø§Ø¡ ÙˆÙ„ÙˆØ­Ø© Ø§Ù„Ù…ØªØ§Ø¨Ø¹Ø©', category:'SOP', url:'https://drive.google.com/open?id=1lu-IQSVouIX0PO3TWSHbGSvcOU41XcZpZZr8TyCkh_0' },
    { code:'LD.QI.POL.001', name:'Ø³ÙŠØ§Ø³Ø© Ø§Ù„Ø¬ÙˆØ¯Ø© ÙˆØ§Ù„ØªØ­Ø³ÙŠÙ† Ø§Ù„Ù…Ø³ØªÙ…Ø±', category:'POL', url:'https://drive.google.com/open?id=1Bef5OQKyeY707CBjpXgLZgvCDUHwn36XLMvOmkpHHEk' },
    { code:'LD.QI.SOP.001', name:'Ø¥Ø¬Ø±Ø§Ø¡ Ø¥Ø¯Ø§Ø±Ø© Ø§Ø¬ØªÙ…Ø§Ø¹Ø§Øª Ù„Ø¬Ù†Ø© Ø§Ù„Ø¬ÙˆØ¯Ø© ÙˆØ§Ù„ØªØ­Ø³ÙŠÙ†', category:'SOP', url:'https://drive.google.com/open?id=1eQhsEZ5PoKTJtwbYevkXblDhnpDV_-9vKdbLq1qPxOc' },
    { code:'LD.QI.MIN.001', name:'Ù†Ù…ÙˆØ°Ø¬ Ù…Ø­Ø¶Ø± Ø§Ø¬ØªÙ…Ø§Ø¹ Ù„Ø¬Ù†Ø© Ø§Ù„Ø¬ÙˆØ¯Ø©', category:'FRM', url:'https://drive.google.com/open?id=1psbjSnOnk-W8CowyvRCFo5psR9Wxt7x9dOKcR6xm_zs' },
    { code:'LD.QI.SOP.002', name:'Ø¥Ø¬Ø±Ø§Ø¡ Ø§Ø®ØªÙŠØ§Ø± ÙˆØªÙ†ÙÙŠØ° Ù…Ø´Ø§Ø±ÙŠØ¹ Ø§Ù„ØªØ­Ø³ÙŠÙ† (PDSA)', category:'SOP', url:'https://drive.google.com/open?id=1i8P4re1TT8PnGyA0ElTvmloEMnkz5LPwnGqBC90ds9w' },
    { code:'LD.QI.PLN.001', name:'Ø§Ù„Ø®Ø·Ø© Ø§Ù„Ø³Ù†ÙˆÙŠØ© Ù„Ù„Ø¬ÙˆØ¯Ø© ÙˆØ§Ù„ØªØ­Ø³ÙŠÙ†', category:'PLN', url:'https://drive.google.com/open?id=1GZg0RwBCbP-eM2SK35_eQtXR67miAnFJtoF39NhvC4I' },
    { code:'LD.QI.AUD.001', name:'Ø®Ø·Ø©/Ø³Ø¬Ù„ Ø§Ù„ØªØ¯Ù‚ÙŠÙ‚ Ø§Ù„Ø¯Ø§Ø®Ù„ÙŠ', category:'AUD', url:'https://drive.google.com/open?id=1pg3m4jBax8plRxY-jlwMhc9skIopkhdy4h1DYEfKmSI' },
    { code:'LD.QI.FRM.003', name:'Ø³Ø¬Ù„ Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª Ø§Ù„ØªØµØ­ÙŠØ­ÙŠØ© ÙˆØ§Ù„ÙˆÙ‚Ø§Ø¦ÙŠØ© (CAPA)', category:'FRM', url:'https://drive.google.com/open?id=13PdXpCyaXb62NRXffoinW3EkLj7mltPUf4m6OWNaPeY' },
    { code:'LD.QI.FRM.001', name:'Ø¨Ø·Ø§Ù‚Ø© ØªØ¹Ø±ÙŠÙ Ù…Ø¤Ø´Ø± Ø£Ø¯Ø§Ø¡ (KPI)', category:'FRM', url:'https://drive.google.com/open?id=1C6Dx0M7E7Z4PME0guCOIDZGmImciMclkL0dBS7KyJtA' },
    { code:'LD.QI.SOP.004', name:'Ø¥Ø¬Ø±Ø§Ø¡ Ø§Ù„ØªØ¯Ù‚ÙŠÙ‚ Ø§Ù„Ø¯Ø§Ø®Ù„ÙŠ ÙˆØ¥Ø¯Ø§Ø±Ø© CAPA', category:'SOP', url:'https://drive.google.com/open?id=1v1pFDX2Yo7To9oCTVaIgVQfF83xNZu64K0BxmEAchTs' },
    { code:'LD.QI.TOR.001', name:'Ù„Ø§Ø¦Ø­Ø©/Ù…ÙŠØ«Ø§Ù‚ Ù„Ø¬Ù†Ø© Ø§Ù„Ø¬ÙˆØ¯Ø© ÙˆØ§Ù„ØªØ­Ø³ÙŠÙ† Ø§Ù„Ù…Ø³ØªÙ…Ø±', category:'TOR', url:'https://drive.google.com/open?id=1obups6Wt5ERePM5qzmzQQhYZn_CTxHbGRUBMWE2jpaM' }
  ];

  const QI_CATEGORY_NAMES = {
    INDEX:'Ø§Ù„ÙÙ‡Ø±Ø³',
    POL:'Ø§Ù„Ø³ÙŠØ§Ø³Ø§Øª', 
    SOP:'Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª Ø§Ù„ØªØ´ØºÙŠÙ„', 
    FRM:'Ø§Ù„Ù†Ù…Ø§Ø°Ø¬', 
    PLN:'Ø§Ù„Ø®Ø·Ø·', 
    AUD:'Ø§Ù„ØªØ¯Ù‚ÙŠÙ‚', 
    TOR:'Ø§Ù„Ù…ÙŠØ«Ø§Ù‚'
  };

  // ====== Ø¯ÙˆØ§Ù„ QI ======
  function switchQiTab(tab) {
    // ØªØ­Ø¯ÙŠØ« Ø£Ø²Ø±Ø§Ø± Ø§Ù„ØªØ¨ÙˆÙŠØ¨
    document.querySelectorAll('[data-qi-tab]').forEach(button => {
      if (button.getAttribute('data-qi-tab') === tab) {
        button.classList.add('bg-[var(--brand1)]', 'text-white');
        button.classList.remove('bg-gray-100');
      } else {
        button.classList.remove('bg-[var(--brand1)]', 'text-white');
        button.classList.add('bg-gray-100');
      }
    });
    
    const container = document.getElementById('qiTabContent');
    container.innerHTML = '';
    
    if (tab === 'library') {
      renderQiLibrary(container, QI_DOCS_LIBRARY);
    } else if (tab === 'indicators') {
      renderQiIndicators(container);
    } else if (tab === 'forms') {
      renderQiForms(container);
    } else if (tab === 'needs') {
      renderQiNeeds(container);
    }
  }

  function renderQiLibrary(container, docs) {
    // Ø¹Ù†Ø§ØµØ± Ø§Ù„ØªØ­ÙƒÙ…
    const categories = [...new Set(docs.map(doc => doc.category))];
    const controls = document.createElement('div');
    controls.className = 'flex flex-wrap items-center gap-2 mb-4';
    controls.innerHTML = `
      <div class="flex flex-wrap gap-2">
        <button data-qi-filter="ALL" class="px-3 py-1 rounded-full bg-[var(--brand1)] text-white text-sm">Ø§Ù„ÙƒÙ„</button>
        ${categories.map(cat => 
          `<button data-qi-filter="${cat}" class="px-3 py-1 rounded-full bg-gray-200 hover:bg-gray-300 text-sm">${QI_CATEGORY_NAMES[cat] || cat}</button>`
        ).join('')}
      </div>
      <div class="ml-auto w-full md:w-64">
        <input id="qiSearch" type="text" placeholder="Ø§Ø¨Ø­Ø« Ø¨Ø§Ù„Ø±Ù…Ø² Ø£Ùˆ Ø§Ù„Ø¹Ù†ÙˆØ§Ù†..." class="w-full border rounded-lg px-3 py-2">
      </div>
    `;
    
    const grid = document.createElement('div');
    grid.className = 'grid-cards';
    grid.id = 'qiGrid';
    
    container.appendChild(controls);
    container.appendChild(grid);
    
    // Ø¯Ø§Ù„Ø© Ø§Ù„ØªØµÙÙŠØ© ÙˆØ§Ù„Ø¹Ø±Ø¶
    function renderFilteredDocs(filter = 'ALL', query = '') {
      grid.innerHTML = '';
      const searchQuery = query.toLowerCase();
      
      const filteredDocs = docs.filter(doc => {
        const matchesFilter = filter === 'ALL' || doc.category === filter;
        const matchesQuery = !searchQuery || 
          doc.code.toLowerCase().includes(searchQuery) || 
          doc.name.toLowerCase().includes(searchQuery);
        return matchesFilter && matchesQuery;
      });
      
      filteredDocs.forEach(doc => {
        const card = document.createElement('div');
        card.className = 'p-4 rounded-xl border bg-white shadow-sm hover:shadow-md transition flex flex-col';
        card.innerHTML = `
          <div class="text-xs text-gray-500 mb-1">${QI_CATEGORY_NAMES[doc.category] || doc.category}</div>
          <div class="font-extrabold text-[var(--brand1)]">${doc.code}</div>
          <div class="text-gray-800 mt-1 flex-1">${doc.name}</div>
          <div class="mt-3 flex gap-2">
            <button class="px-3 py-2 text-sm text-white rounded-lg bg-[var(--brand1)] hover:bg-[var(--brand2)]" 
                    onclick="openDocModal('${doc.code}: ${doc.name}', '${doc.url}')">
              <i class="fas fa-eye ml-1"></i> Ø¹Ø±Ø¶
            </button>
            <a class="px-3 py-2 text-sm rounded-lg border hover:bg-gray-50" 
               target="_blank" href="${doc.url.replace('/preview', '/view')}">
              <i class="fas fa-up-right-from-square ml-1"></i> ÙØªØ­ ÙÙŠ ØªØ¨ÙˆÙŠØ¨
            </a>
          </div>
        `;
        grid.appendChild(card);
      });
    }
     
    // Ø¥Ø¶Ø§ÙØ© Ù…Ø³ØªÙ…Ø¹ÙŠ Ø§Ù„Ø£Ø­Ø¯Ø§Ø«
    controls.querySelectorAll('button[data-qi-filter]').forEach(button => {
      button.addEventListener('click', () => {
        controls.querySelectorAll('button[data-qi-filter]').forEach(btn => {
          btn.classList.remove('bg-[var(--brand1)]', 'text-white');
        });
        button.classList.add('bg-[var(--brand1)]', 'text-white');
        renderFilteredDocs(button.getAttribute('data-qi-filter'), document.getElementById('qiSearch').value);
      });
    });
    
    document.getElementById('qiSearch').addEventListener('input', (e) => {
      const activeFilter = controls.querySelector('button[data-qi-filter].bg-[var(--brand1)]') || 
                          { getAttribute: () => 'ALL' };
      renderFilteredDocs(activeFilter.getAttribute('data-qi-filter'), e.target.value);
    });
    
    // Ø§Ù„ØªÙ‡ÙŠØ¦Ø© Ø§Ù„Ø£ÙˆÙ„ÙŠØ©
    renderFilteredDocs('ALL', '');
  }

  function renderQiIndicators(container) {
    const wrapper = document.createElement('div');
    wrapper.className = 'space-y-6';
    
    // Ù…Ø¤Ø´Ø±Ø§Øª Ø§Ù„Ø¬ÙˆØ¯Ø©
    const indicatorsSection = document.createElement('div');
    indicatorsSection.innerHTML = `
      <h3 class="text-xl font-bold text-[var(--brand1)] mb-4">ğŸ“Š Ù…Ø¤Ø´Ø±Ø§Øª Ø§Ù„Ø¬ÙˆØ¯Ø© Ø§Ù„Ø´Ù‡Ø±ÙŠØ©</h3>
      <div class="overflow-auto">
        <table class="kpi-table">
          <thead>
            <tr>
              <th>Ø§Ù„Ø´Ù‡Ø±</th>
              <th>Ø±Ø¶Ø§ Ø§Ù„Ù…Ø±Ø¶Ù‰ %</th>
              <th>ÙˆÙ‚Øª Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø± (Ø¯Ù‚ÙŠÙ‚Ø©)</th>
              <th>Ù…Ø¹Ø¯Ù„ Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ø²ÙŠØ§Ø±Ø© %</th>
              <th>Ù…Ø¤Ø´Ø± Ø§Ù„Ø£Ø¯Ø§Ø¡ Ø§Ù„Ø·Ø¨ÙŠ</th>
              <th>Ù…Ø¤Ø´Ø± Ø§Ù„Ø£Ø¯Ø§Ø¡ Ø§Ù„Ø¥Ø¯Ø§Ø±ÙŠ</th>
            </tr>
          </thead>
          <tbody id="qiKpiTableBody"></tbody>
        </table>
      </div>
    `;
    
    // Ù…Ø®Ø·Ø· Ø¨ÙŠØ§Ù†ÙŠ Ù…Ø¨Ø³Ø·
    const chartSection = document.createElement('div');
    chartSection.innerHTML = `
      <h3 class="text-xl font-bold text-[var(--brand1)] mb-4">ğŸ“ˆ ØªØ·ÙˆØ± Ù…Ø¤Ø´Ø±Ø§Øª Ø§Ù„Ø¬ÙˆØ¯Ø©</h3>
      <div class="border rounded-xl p-4 bg-white">
        <div class="flex flex-wrap gap-4 mb-4">
          <button class="px-3 py-1 rounded-full bg-[var(--brand1)] text-white text-sm" onclick="renderQiChart('Ø±Ø¶Ø§_Ø§Ù„Ù…Ø±Ø¶Ù‰')">Ø±Ø¶Ø§ Ø§Ù„Ù…Ø±Ø¶Ù‰</button>
          <button class="px-3 py-1 rounded-full bg-gray-200 text-sm" onclick="renderQiChart('ÙˆÙ‚Øª_Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø±')">ÙˆÙ‚Øª Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø±</button>
          <button class="px-3 py-1 rounded-full bg-gray-200 text-sm" onclick="renderQiChart('Ù…Ø¹Ø¯Ù„_Ø¥Ø¹Ø§Ø¯Ø©_Ø§Ù„Ø²ÙŠØ§Ø±Ø©')">Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ø²ÙŠØ§Ø±Ø©</button>
        </div>
        <div id="qiChart" class="h-64 bg-gray-50 rounded-lg flex items-center justify-center">
          <p class="text-gray-500">Ø§Ø®ØªØ± Ù…Ø¤Ø´Ø±Ø§Ù‹ Ù„Ø¹Ø±Ø¶ Ø§Ù„Ø±Ø³Ù… Ø§Ù„Ø¨ÙŠØ§Ù†ÙŠ</p>
        </div>
      </div>
    `;
    
    wrapper.appendChild(indicatorsSection);
    wrapper.appendChild(chartSection);
    container.appendChild(wrapper);
    
    // Ù…Ù„Ø¡ Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ù…Ø¤Ø´Ø±Ø§Øª
    renderQiKpiTable();
  }

  function renderQiKpiTable() {
    const tableBody = document.getElementById('qiKpiTableBody');
    tableBody.innerHTML = '';
    
    const QI_KPI_DATA = [
      { Ø§Ù„Ø´Ù‡Ø±: 'ÙŠÙ†Ø§ÙŠØ±', Ø±Ø¶Ø§_Ø§Ù„Ù…Ø±Ø¶Ù‰: 85, ÙˆÙ‚Øª_Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø±: 25, Ù…Ø¹Ø¯Ù„_Ø¥Ø¹Ø§Ø¯Ø©_Ø§Ù„Ø²ÙŠØ§Ø±Ø©: 8.2, Ù…Ø¤Ø´Ø±_Ø§Ù„Ø£Ø¯Ø§Ø¡_Ø§Ù„Ø·Ø¨ÙŠ: 92, Ù…Ø¤Ø´Ø±_Ø§Ù„Ø£Ø¯Ø§Ø¡_Ø§Ù„Ø¥Ø¯Ø§Ø±ÙŠ: 88 },
      { Ø§Ù„Ø´Ù‡Ø±: 'ÙØ¨Ø±Ø§ÙŠØ±', Ø±Ø¶Ø§_Ø§Ù„Ù…Ø±Ø¶Ù‰: 88, ÙˆÙ‚Øª_Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø±: 22, Ù…Ø¹Ø¯Ù„_Ø¥Ø¹Ø§Ø¯Ø©_Ø§Ù„Ø²ÙŠØ§Ø±Ø©: 7.5, Ù…Ø¤Ø´Ø±_Ø§Ù„Ø£Ø¯Ø§Ø¡_Ø§Ù„Ø·Ø¨ÙŠ: 94, Ù…Ø¤Ø´Ø±_Ø§Ù„Ø£Ø¯Ø§Ø¡_Ø§Ù„Ø¥Ø¯Ø§Ø±ÙŠ: 90 },
      { Ø§Ù„Ø´Ù‡Ø±: 'Ù…Ø§Ø±Ø³', Ø±Ø¶Ø§_Ø§Ù„Ù…Ø±Ø¶Ù‰: 82, ÙˆÙ‚Øª_Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø±: 28, Ù…Ø¹Ø¯Ù„_Ø¥Ø¹Ø§Ø¯Ø©_Ø§Ù„Ø²ÙŠØ§Ø±Ø©: 9.1, Ù…Ø¤Ø´Ø±_Ø§Ù„Ø£Ø¯Ø§Ø¡_Ø§Ù„Ø·Ø¨ÙŠ: 89, Ù…Ø¤Ø´Ø±_Ø§Ù„Ø£Ø¯Ø§Ø¡_Ø§Ù„Ø¥Ø¯Ø§Ø±ÙŠ: 85 },
      { Ø§Ù„Ø´Ù‡Ø±: 'Ø£Ø¨Ø±ÙŠÙ„', Ø±Ø¶Ø§_Ø§Ù„Ù…Ø±Ø¶Ù‰: 91, ÙˆÙ‚Øª_Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø±: 20, Ù…Ø¹Ø¯Ù„_Ø¥Ø¹Ø§Ø¯Ø©_Ø§Ù„Ø²ÙŠØ§Ø±Ø©: 6.8, Ù…Ø¤Ø´Ø±_Ø§Ù„Ø£Ø¯Ø§Ø¡_Ø§Ù„Ø·Ø¨ÙŠ: 95, Ù…Ø¤Ø´Ø±_Ø§Ù„Ø£Ø¯Ø§Ø¡_Ø§Ù„Ø¥Ø¯Ø§Ø±ÙŠ: 92 },
      { Ø§Ù„Ø´Ù‡Ø±: 'Ù…Ø§ÙŠÙˆ', Ø±Ø¶Ø§_Ø§Ù„Ù…Ø±Ø¶Ù‰: 93, ÙˆÙ‚Øª_Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø±: 18, Ù…Ø¹Ø¯Ù„_Ø¥Ø¹Ø§Ø¯Ø©_Ø§Ù„Ø²ÙŠØ§Ø±Ø©: 6.2, Ù…Ø¤Ø´Ø±_Ø§Ù„Ø£Ø¯Ø§Ø¡_Ø§Ù„Ø·Ø¨ÙŠ: 96, Ù…Ø¤Ø´Ø±_Ø§Ù„Ø£Ø¯Ø§Ø¡_Ø§Ù„Ø¥Ø¯Ø§Ø±ÙŠ: 94 },
    ];
    
    QI_KPI_DATA.forEach(row => {
      const tr = document.createElement('tr');
      
      // ØªØ­Ø¯ÙŠØ¯ ÙØ¦Ø§Øª Ø§Ù„Ø£Ù„ÙˆØ§Ù† Ø¨Ù†Ø§Ø¡Ù‹ Ø¹Ù„Ù‰ Ø§Ù„Ù‚ÙŠÙ…
      const patientSatisfactionClass = row.Ø±Ø¶Ø§_Ø§Ù„Ù…Ø±Ø¶Ù‰ >= 90 ? 'good' : row.Ø±Ø¶Ø§_Ø§Ù„Ù…Ø±Ø¶Ù‰ >= 80 ? 'warning' : 'critical';
      const waitingTimeClass = row.ÙˆÙ‚Øª_Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø± <= 20 ? 'good' : row.ÙˆÙ‚Øª_Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø± <= 30 ? 'warning' : 'critical';
      const revisitRateClass = row.Ù…Ø¹Ø¯Ù„_Ø¥Ø¹Ø§Ø¯Ø©_Ø§Ù„Ø²ÙŠØ§Ø±Ø© <= 7 ? 'good' : row.Ù…Ø¹Ø¯Ù„_Ø¥Ø¹Ø§Ø¯Ø©_Ø§Ù„Ø²ÙŠØ§Ø±Ø© <= 9 ? 'warning' : 'critical';
      const medicalPerformanceClass = row.Ù…Ø¤Ø´Ø±_Ø§Ù„Ø£Ø¯Ø§Ø¡_Ø§Ù„Ø·Ø¨ÙŠ >= 90 ? 'good' : row.Ù…Ø¤Ø´Ø±_Ø§Ù„Ø£Ø¯Ø§Ø¡_Ø§Ù„Ø·Ø¨ÙŠ >= 80 ? 'warning' : 'critical';
      const adminPerformanceClass = row.Ù…Ø¤Ø´Ø±_Ø§Ù„Ø£Ø¯Ø§Ø¡_Ø§Ù„Ø¥Ø¯Ø§Ø±ÙŠ >= 90 ? 'good' : row.Ù…Ø¤Ø´Ø±_Ø§Ù„Ø£Ø¯Ø§Ø¡_Ø§Ù„Ø¥Ø¯Ø§Ø±ÙŠ >= 80 ? 'warning' : 'critical';
      
      tr.innerHTML = `
        <td class="font-semibold">${row.Ø§Ù„Ø´Ù‡Ø±}</td>
        <td class="${patientSatisfactionClass}">${row.Ø±Ø¶Ø§_Ø§Ù„Ù…Ø±Ø¶Ù‰}%</td>
        <td class="${waitingTimeClass}">${row.ÙˆÙ‚Øª_Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø±}</td>
        <td class="${revisitRateClass}">${row.Ù…Ø¹Ø¯Ù„_Ø¥Ø¹Ø§Ø¯Ø©_Ø§Ù„Ø²ÙŠØ§Ø±Ø©}%</td>
        <td class="${medicalPerformanceClass}">${row.Ù…Ø¤Ø´Ø±_Ø§Ù„Ø£Ø¯Ø§Ø¡_Ø§Ù„Ø·Ø¨ÙŠ}</td>
        <td class="${adminPerformanceClass}">${row.Ù…Ø¤Ø´Ø±_Ø§Ù„Ø£Ø¯Ø§Ø¡_Ø§Ù„Ø¥Ø¯Ø§Ø±ÙŠ}</td>
      `;
      tableBody.appendChild(tr);
    });
  }

  function renderQiChart(indicator) {
    const chartContainer = document.getElementById('qiChart');
    const indicatorName = {
      'Ø±Ø¶Ø§_Ø§Ù„Ù…Ø±Ø¶Ù‰': 'Ø±Ø¶Ø§ Ø§Ù„Ù…Ø±Ø¶Ù‰ %',
      'ÙˆÙ‚Øª_Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø±': 'ÙˆÙ‚Øª Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø± (Ø¯Ù‚ÙŠÙ‚Ø©)', 
      'Ù…Ø¹Ø¯Ù„_Ø¥Ø¹Ø§Ø¯Ø©_Ø§Ù„Ø²ÙŠØ§Ø±Ø©': 'Ù…Ø¹Ø¯Ù„ Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ø²ÙŠØ§Ø±Ø© %'
    }[indicator];
    
    // Ø±Ø³Ù… Ø¨ÙŠØ§Ù†ÙŠ Ù…Ø¨Ø³Ø· Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… HTML ÙˆCSS
    const QI_KPI_DATA = [
      { Ø§Ù„Ø´Ù‡Ø±: 'ÙŠÙ†Ø§ÙŠØ±', Ø±Ø¶Ø§_Ø§Ù„Ù…Ø±Ø¶Ù‰: 85, ÙˆÙ‚Øª_Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø±: 25, Ù…Ø¹Ø¯Ù„_Ø¥Ø¹Ø§Ø¯Ø©_Ø§Ù„Ø²ÙŠØ§Ø±Ø©: 8.2 },
      { Ø§Ù„Ø´Ù‡Ø±: 'ÙØ¨Ø±Ø§ÙŠØ±', Ø±Ø¶Ø§_Ø§Ù„Ù…Ø±Ø¶Ù‰: 88, ÙˆÙ‚Øª_Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø±: 22, Ù…Ø¹Ø¯Ù„_Ø¥Ø¹Ø§Ø¯Ø©_Ø§Ù„Ø²ÙŠØ§Ø±Ø©: 7.5 },
      { Ø§Ù„Ø´Ù‡Ø±: 'Ù…Ø§Ø±Ø³', Ø±Ø¶Ø§_Ø§Ù„Ù…Ø±Ø¶Ù‰: 82, ÙˆÙ‚Øª_Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø±: 28, Ù…Ø¹Ø¯Ù„_Ø¥Ø¹Ø§Ø¯Ø©_Ø§Ù„Ø²ÙŠØ§Ø±Ø©: 9.1 },
      { Ø§Ù„Ø´Ù‡Ø±: 'Ø£Ø¨Ø±ÙŠÙ„', Ø±Ø¶Ø§_Ø§Ù„Ù…Ø±Ø¶Ù‰: 91, ÙˆÙ‚Øª_Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø±: 20, Ù…Ø¹Ø¯Ù„_Ø¥Ø¹Ø§Ø¯Ø©_Ø§Ù„Ø²ÙŠØ§Ø±Ø©: 6.8 },
      { Ø§Ù„Ø´Ù‡Ø±: 'Ù…Ø§ÙŠÙˆ', Ø±Ø¶Ø§_Ø§Ù„Ù…Ø±Ø¶Ù‰: 93, ÙˆÙ‚Øª_Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø±: 18, Ù…Ø¹Ø¯Ù„_Ø¥Ø¹Ø§Ø¯Ø©_Ø§Ù„Ø²ÙŠØ§Ø±Ø©: 6.2 },
    ];
    
    const maxValue = Math.max(...QI_KPI_DATA.map(row => row[indicator]));
    const minValue = Math.min(...QI_KPI_DATA.map(row => row[indicator]));
    
    let chartHTML = `
      <div class="w-full h-full p-4">
        <h4 class="text-center font-bold mb-4">${indicatorName}</h4>
        <div class="flex items-end justify-between h-40 gap-2">
    `;
    
    QI_KPI_DATA.forEach((row, index) => {
      const value = row[indicator];
      const percentage = ((value - minValue) / (maxValue - minValue)) * 80 + 20;
      
      chartHTML += `
        <div class="flex flex-col items-center flex-1">
          <div class="text-xs mb-1">${row.Ø§Ù„Ø´Ù‡Ø±}</div>
          <div class="w-full bg-[var(--brand1)] rounded-t transition-all" style="height: ${percentage}%"></div>
          <div class="text-xs mt-1">${value}</div>
        </div>
      `;
    });
    
    chartHTML += `</div></div>`;
    chartContainer.innerHTML = chartHTML;
    
    // ØªØ­Ø¯ÙŠØ« Ø£Ø²Ø±Ø§Ø± Ø§Ù„Ù…Ø¤Ø´Ø±Ø§Øª Ø§Ù„Ù†Ø´Ø·Ø©
    (document.getElementById('qiChart') && document.getElementById('qiChart').closest('.border') ? document.getElementById('qiChart').closest('.border').querySelectorAll('button') : []).forEach(btn => {
      btn.classList.remove('bg-[var(--brand1)]', 'text-white');
      btn.classList.add('bg-gray-200');
    });
    
    const activeButton = document.querySelector(`[onclick="renderQiChart('${indicator}')"]`);
    if (activeButton) {
      activeButton.classList.add('bg-[var(--brand1)]', 'text-white');
      activeButton.classList.remove('bg-gray-200');
    }
  }

  function renderQiForms(container) {
    const wrapper = document.createElement('div');
    wrapper.className = 'space-y-6';
    
    // Ù†Ù…ÙˆØ°Ø¬ Ù…Ø´Ø±ÙˆØ¹ ØªØ­Ø³ÙŠÙ† PDSA
    const pdsaForm = document.createElement('div');
    pdsaForm.className = 'border rounded-xl p-4 bg-white';
    pdsaForm.innerHTML = `
      <h3 class="text-xl font-bold text-[var(--brand1)] mb-4">ğŸ“‹ Ù†Ù…ÙˆØ°Ø¬ Ù…Ø´Ø±ÙˆØ¹ ØªØ­Ø³ÙŠÙ† PDSA</h3>
      <form id="qiPdsaForm" class="grid grid-cols-1 md:grid-cols-2 gap-4">
        <div>
          <label class="block text-sm font-semibold mb-1">Ø§Ø³Ù… Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ *</label>
          <input name="project_name" required class="w-full border rounded-lg px-3 py-2" placeholder="Ø§Ø³Ù… Ù…Ø´Ø±ÙˆØ¹ Ø§Ù„ØªØ­Ø³ÙŠÙ†">
        </div>
        <div>
          <label class="block text-sm font-semibold mb-1">Ø§Ù„Ù‚Ø³Ù… Ø§Ù„Ù…Ø¹Ù†ÙŠ *</label>
          <input name="department" required class="w-full border rounded-lg px-3 py-2" placeholder="Ø§Ù„Ù‚Ø³Ù… Ø§Ù„Ù…Ø³Ø¤ÙˆÙ„">
        </div>
        <div class="md:col-span-2">
          <label class="block text-sm font-semibold mb-1">Ø§Ù„Ø®Ø·Ø© (Plan) *</label>
          <textarea name="plan" rows="3" required class="w-full border rounded-lg px-3 py-2" placeholder="ÙˆØµÙ Ø§Ù„Ø®Ø·Ø© ÙˆØ§Ù„Ø£Ù‡Ø¯Ø§Ù..."></textarea>
        </div>
        <div class="md:col-span-2">
          <label class="block text-sm font-semibold mb-1">Ø§Ù„ØªÙ†ÙÙŠØ° (Do) *</label>
          <textarea name="do" rows="3" required class="w-full border rounded-lg px-3 py-2" placeholder="Ø®Ø·ÙˆØ§Øª Ø§Ù„ØªÙ†ÙÙŠØ°..."></textarea>
        </div>
        <div class="md:col-span-2">
          <label class="block text-sm font-semibold mb-1">Ø§Ù„Ø¯Ø±Ø§Ø³Ø© (Study) *</label>
          <textarea name="study" rows="3" required class="w-full border rounded-lg px-3 py-2" placeholder="Ø§Ù„Ù†ØªØ§Ø¦Ø¬ ÙˆØ§Ù„Ù…Ù„Ø§Ø­Ø¸Ø§Øª..."></textarea>
        </div>
        <div class="md:col-span-2">
          <label class="block text-sm font-semibold mb-1">Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡ (Act) *</label>
          <textarea name="act" rows="3" required class="w-full border rounded-lg px-3 py-2" placeholder="Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª Ø§Ù„ØªØµØ­ÙŠØ­ÙŠØ©..."></textarea>
        </div>
        <div>
          <label class="block text-sm font-semibold mb-1">ØªØ§Ø±ÙŠØ® Ø§Ù„Ø¨Ø¯Ø¡ *</label>
          <input type="date" name="start_date" required class="w-full border rounded-lg px-3 py-2">
        </div>
        <div>
          <label class="block text-sm font-semibold mb-1">ØªØ§Ø±ÙŠØ® Ø§Ù„Ø§Ù†ØªÙ‡Ø§Ø¡ *</label>
          <input type="date" name="end_date" required class="w-full border rounded-lg px-3 py-2">
        </div>
        <div class="md:col-span-2 flex items-center gap-3 pt-2">
          <button type="submit" class="px-4 py-2 rounded-lg bg-[var(--brand1)] text-white hover:bg-[var(--brand2)]">Ø­ÙØ¸ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹</button>
          <span id="qiPdsaMsg" class="text-sm"></span>
        </div>
      </form>
    `;
    
    wrapper.appendChild(pdsaForm);
    container.appendChild(wrapper);
    
    // Ù…Ø¹Ø§Ù„Ø¬Ø© Ù†Ù…ÙˆØ°Ø¬ PDSA
    const qiPdsaForm = document.getElementById('qiPdsaForm');
    if (qiPdsaForm) {
      qiPdsaForm.addEventListener('submit', function(e) {
        e.preventDefault();
        const messageElement = document.getElementById('qiPdsaMsg');
        messageElement.textContent = 'Ø¬Ø§Ø±Ù Ø­ÙØ¸ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹...';
        messageElement.className = 'text-sm text-blue-600';
        
        // Ø­ÙØ¸ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ø­Ù„ÙŠØ§Ù‹
        const formData = new FormData(qiPdsaForm);
        const pdsaData = {};
        formData.forEach((value, key) => {
          pdsaData[key] = value;
        });
        pdsaData.timestamp = new Date().toISOString();
        
        // Ø­ÙØ¸ ÙÙŠ localStorage
        let pdsaProjects = JSON.parse(localStorage.getItem('qi_pdsa_projects') || '[]');
        pdsaProjects.push(pdsaData);
        localStorage.setItem('qi_pdsa_projects', JSON.stringify(pdsaProjects));
        
        messageElement.textContent = 'âœ… ØªÙ… Ø­ÙØ¸ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ Ø¨Ù†Ø¬Ø§Ø­';
        messageElement.className = 'text-sm text-green-600';
        qiPdsaForm.reset();
      });
    }
  }

  function renderQiNeeds(container) {
    const needs = [
      { key: 'charter', text: 'Ù…ÙŠØ«Ø§Ù‚ Ù„Ø¬Ù†Ø© Ø§Ù„Ø¬ÙˆØ¯Ø© ÙˆØ§Ù„ØªØ­Ø³ÙŠÙ† Ø§Ù„Ù…Ø³ØªÙ…Ø± Ù…Ø¹ØªÙ…Ø¯ (LD.QI.TOR.001)', required: true },
      { key: 'policy', text: 'Ø³ÙŠØ§Ø³Ø© Ø§Ù„Ø¬ÙˆØ¯Ø© ÙˆØ§Ù„ØªØ­Ø³ÙŠÙ† Ø§Ù„Ù…Ø³ØªÙ…Ø± Ù…Ø¹ØªÙ…Ø¯Ø© (LD.QI.POL.001)', required: true },
      { key: 'plan', text: 'Ø§Ù„Ø®Ø·Ø© Ø§Ù„Ø³Ù†ÙˆÙŠØ© Ù„Ù„Ø¬ÙˆØ¯Ø© ÙˆØ§Ù„ØªØ­Ø³ÙŠÙ† Ù…Ø¹ØªÙ…Ø¯Ø© (LD.QI.PLN.001)', required: true },
      { key: 'indicators', text: 'Ù†Ø¸Ø§Ù… Ù…ØªØ§Ø¨Ø¹Ø© Ù…Ø¤Ø´Ø±Ø§Øª Ø§Ù„Ø£Ø¯Ø§Ø¡ Ù…ÙØ¹Ù„', required: true },
      { key: 'pdsa', text: 'Ù…Ø´Ø§Ø±ÙŠØ¹ ØªØ­Ø³ÙŠÙ† PDSA Ù‚ÙŠØ¯ Ø§Ù„ØªÙ†ÙÙŠØ°', required: true },
      { key: 'audit', text: 'Ø¨Ø±Ù†Ø§Ù…Ø¬ Ø§Ù„ØªØ¯Ù‚ÙŠÙ‚ Ø§Ù„Ø¯Ø§Ø®Ù„ÙŠ Ù…ÙØ¹Ù„', required: true },
      { key: 'capa', text: 'Ù†Ø¸Ø§Ù… Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª Ø§Ù„ØªØµØ­ÙŠØ­ÙŠØ© ÙˆØ§Ù„ÙˆÙ‚Ø§Ø¦ÙŠØ© (CAPA) Ù…ÙØ¹Ù„', required: true },
      { key: 'meetings', text: 'Ù…Ø­Ø§Ø¶Ø± Ø§Ø¬ØªÙ…Ø§Ø¹Ø§Øª Ø§Ù„Ù„Ø¬Ù†Ø© Ù…Ø³Ø¬Ù„Ø© ÙˆÙ…Ù†Ø¸Ù…Ø©', required: true },
    ];
    
    const wrapper = document.createElement('div');
    wrapper.className = 'grid-cards';
    
    needs.forEach(need => {
      const card = document.createElement('div');
      card.className = 'p-4 rounded-xl border bg-white shadow-sm';
      card.innerHTML = `
        <label class="flex items-start gap-3 cursor-pointer">
          <input type="checkbox" class="mt-1 h-5 w-5" data-required="${need.required ? 1 : 0}">
          <span class="font-semibold">${need.text}</span>
        </label>
        ${need.required ? '<div class="text-xs text-red-600 mt-1">Ù…ØªØ·Ù„Ø¨ Ø¥Ù„Ø²Ø§Ù…ÙŠ</div>' : ''}
      `;
      wrapper.appendChild(card);
    });
    
    const actions = document.createElement('div');
    actions.className = 'pt-4 flex gap-3';
    actions.innerHTML = `
      <button class="px-4 py-2 rounded-lg bg-[var(--brand1)] text-white hover:bg-[var(--brand2)]" onclick="validateQiNeeds()">
        ØªØ­Ù‚Ù‘Ù‚ Ù…Ù† Ø§Ù„Ø§ÙƒØªÙ…Ø§Ù„
      </button>
      <button class="px-4 py-2 rounded-lg border hover:bg-gray-50" onclick="generateQiReport()">
        Ø¥Ù†Ø´Ø§Ø¡ ØªÙ‚Ø±ÙŠØ± Ø§Ù„Ø¬Ø§Ù‡Ø²ÙŠØ©
      </button>
    `;
    
    container.appendChild(wrapper);
    container.appendChild(actions);
  }

  function validateQiNeeds() {
    const requiredCheckboxes = [...document.querySelectorAll('#qiTabContent input[data-required="1"]')];
    const missingCount = requiredCheckboxes.filter(checkbox => !checkbox.checked).length;
    
    if (missingCount === 0) {
      alert('Ù…Ù…ØªØ§Ø² âœ… â€” Ø¬Ù…ÙŠØ¹ Ù…ØªØ·Ù„Ø¨Ø§Øª Ø§Ù„Ø¬ÙˆØ¯Ø© ÙˆØ§Ù„ØªØ­Ø³ÙŠÙ† Ø§Ù„Ø¥Ù„Ø²Ø§Ù…ÙŠØ© Ù…ÙƒØªÙ…Ù„Ø©.');
    } else {
      alert(`âš ï¸ ØªÙ†Ø¨ÙŠÙ‡: ÙŠÙˆØ¬Ø¯ ${missingCount} Ù…ØªØ·Ù„Ø¨(Ø§Øª) Ø¥Ù„Ø²Ø§Ù…ÙŠ ØºÙŠØ± Ù…ÙƒØªÙ…Ù„ ÙÙŠ Ù‚Ø³Ù… Ø§Ù„Ø¬ÙˆØ¯Ø© ÙˆØ§Ù„ØªØ­Ø³ÙŠÙ†.`);
    }
  }

  function generateQiReport() {
    const checkboxes = [...document.querySelectorAll('#qiTabContent input[type="checkbox"]')];
    const checkedCount = checkboxes.filter(checkbox => checkbox.checked).length;
    const totalCount = checkboxes.length;
    const percentage = Math.round((checkedCount / totalCount) * 100);
    
    alert(`ğŸ“‹ ØªÙ‚Ø±ÙŠØ± Ø¬Ø§Ù‡Ø²ÙŠØ© Ø§Ù„Ø¬ÙˆØ¯Ø© ÙˆØ§Ù„ØªØ­Ø³ÙŠÙ†:\n\nâœ… ${checkedCount} Ù…Ù† ${totalCount} Ø¨Ù†Ø¯ Ù…ÙƒØªÙ…Ù„\nğŸ“Š Ù†Ø³Ø¨Ø© Ø§Ù„Ø¥ÙƒÙ…Ø§Ù„: ${percentage}%\n\n${percentage >= 80 ? 'Ù…Ø³ØªÙˆÙ‰ Ø¬ÙŠØ¯ âœ“' : 'ÙŠØ­ØªØ§Ø¬ Ø¥Ù„Ù‰ ØªØ­Ø³ÙŠÙ† âš ï¸'}`);
  }

  function qiExportAll() {
    const data = {
      pdsaProjects: JSON.parse(localStorage.getItem('qi_pdsa_projects') || '[]')
    };
    const blob = new Blob([JSON.stringify(data, null, 2)], {type:'application/json'});
    const a = document.createElement('a');
    a.href = URL.createObjectURL(blob);
    a.download = 'qi_data_backup.json';
    document.body.appendChild(a);
    a.click();
    a.remove();
  }

  function qiImportAll(file) {
    const reader = new FileReader();
    reader.onload = (e) => {
      try {
        const data = JSON.parse(e.target.result);
        if (data.pdsaProjects) localStorage.setItem('qi_pdsa_projects', JSON.stringify(data.pdsaProjects));
        alert('âœ… ØªÙ… Ø§Ø³ØªÙŠØ±Ø§Ø¯ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¬ÙˆØ¯Ø© Ø¨Ù†Ø¬Ø§Ø­.');
      } catch (err) {
        alert('âš ï¸ Ù…Ù„Ù ØºÙŠØ± ØµØ§Ù„Ø­.');
      }
    };
    reader.readAsText(file, 'utf-8');
  }

  // ====== Ø§Ù„Ø·ÙˆØ§Ø±Ø¦ ÙˆØ§Ù„ÙƒÙˆØ§Ø±Ø« (EOC) ======
  const EOC_DOCS_LIBRARY = [
    { code:'Readme-2025', name:'ØªØ¹Ù„ÙŠÙ…Ø§Øª Ø§Ù„Ø§Ø¹ØªÙ…Ø§Ø¯ ÙˆØ§Ù„Ø­ÙØ¸', category:'GUIDE', url:'https://drive.google.com/open?id=1WkN1gTWJc_l1xJgOh--uq7MpQVGw-SlH_wA8XpdakdU' },
    { code:'EOC-FRM-2025-007', name:'Ø³Ø¬Ù„ ØªÙ…Ø§Ø±ÙŠÙ† ÙˆØ¥Ø®Ù„Ø§Ø¡Ø§Øª', category:'LOG', url:'https://drive.google.com/open?id=1y3Sjxlq39HTEQMHYpCGroil33nLaODFepJHfjYod9wY' },
    { code:'EOC-FRM-2025-002', name:'Ø³Ø¬Ù„ Ø­Ø¶ÙˆØ± ÙˆØªØ¯Ø±ÙŠØ¨ Ø§Ù„Ø·ÙˆØ§Ø±Ø¦', category:'LOG', url:'https://drive.google.com/open?id=1pR3gpKB1nv-98Nnh7YG9na0SjHE8ssshqwjsljvcVTQ' },
    { code:'EOC-FRM-2025-008', name:'Ø³Ø¬Ù„ Ù…Ø¹Ø¯Ø§Øª Ø§Ù„Ø§Ø³ØªØ¬Ø§Ø¨Ø©', category:'LOG', url:'https://drive.google.com/open?id=1Gxvm9A1CM1RPy3vTFDPxX5rsmlInqfeSid2YDe-ieGg' },
    { code:'EOC-SOP-2025-007', name:'ØªØ¹Ø·Ù„ Ø§Ù„Ø§ØªØµØ§Ù„Ø§Øª ÙˆØªÙ‚Ù†ÙŠØ© Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª/Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª (PDPL)', category:'SOP', url:'https://drive.google.com/open?id=1p-OsanRRMfaw9a1KV500Z-lxvCZ8Ch91EFJ0Alptviw' },
    { code:'EOC-FRM-2025-004', name:'Ø®Ø·Ø© Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª Ø§Ù„ØªØµØ­ÙŠØ­ÙŠØ© (CAPA Tracker)', category:'FRM', url:'https://drive.google.com/open?id=1y_-Uywr5VASlVMusD0NKFDdTHkFbExXdMyISSzYIh60' },
    { code:'References-2025', name:'Ù…Ø±Ø§Ø¬Ø¹ ÙˆØ±ÙˆØ§Ø¨Ø·', category:'REF', url:'https://drive.google.com/open?id=12plKBVOYvBfp6Kp8PX5NCC-iRuZdHU8xIuZLBFZxnLA' },
    { code:'EOC-Index-2025-001', name:'ÙÙ‡Ø±Ø³ ÙˆØ«Ø§Ø¦Ù‚ Ø§Ù„Ø­Ø²Ù…Ø©', category:'INDEX', url:'https://drive.google.com/open?id=12fiFYU5EeMzUv4UI11k2aIYoIuWPr-B2fmW1caIfXlY' },
    { code:'EOC-SOP-2025-005', name:'ØªÙØ´Ù‘ÙŠ Ø£Ù…Ø±Ø§Ø¶ Ù…Ø¹Ø¯ÙŠØ©/Ø¥Ù†Ø°Ø§Ø± ØµØ­ÙŠ', category:'SOP', url:'https://drive.google.com/open?id=1OqFbjCJ9uqTbQPJicNU3cFBR-SgeuHwRjYBuWtAjM4Q' },
    { code:'EOC-SOP-2025-003', name:'Ø§Ù„Ø¥Ø®Ù„Ø§Ø¡ ÙˆØ§Ù„ØªØ¬Ù…Ø¹ ÙˆØ¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ø¯Ø®ÙˆÙ„', category:'SOP', url:'https://drive.google.com/open?id=1WX4T7VkA8G9s42YZE-g8tJ33Qmy-sDdYrGOTvzGbuYw' },
    { code:'EOC-LST-2025-001', name:'Ù„ÙˆØ­Ø©/Ù‚Ø§Ø¦Ù…Ø© Ø§ØªØµØ§Ù„Ø§Øª Ø§Ù„Ø·ÙˆØ§Ø±Ø¦', category:'REF', url:'https://drive.google.com/open?id=1sV8ABIFDAuUyo7vWaCPM5Y3hVtVTeK6AQhhUW0xuX1w' },
    { code:'EOC-FRM-2025-001', name:'Ù…Ø­Ø¶Ø± Ø§Ø¬ØªÙ…Ø§Ø¹ Ù„Ø¬Ù†Ø© Ø§Ù„Ø·ÙˆØ§Ø±Ø¦ ÙˆØ§Ù„ÙƒÙˆØ§Ø±Ø«', category:'FRM', url:'https://drive.google.com/open?id=1SeopdYmHRU4CL--j054kA37WAwqCCc-lAQrlr_3PM74' },
    { code:'EOC-FRM-2025-005', name:'ØªÙ‚Ø±ÙŠØ± Ø­Ø§Ø¯Ø« Ø·Ø§Ø±Ø¦/Ù…Ø§ Ø¨Ø¹Ø¯ Ø§Ù„Ø­Ø¯Ø«', category:'FRM', url:'https://drive.google.com/open?id=1AyNMAdrJCalF9LqBmrdRh64W1gUrJpiQFN2yplFh5B8' },
    { code:'EOC-FRM-2025-006', name:'Ù†Ù…ÙˆØ°Ø¬ HVA Ù„ØªÙ‚ÙŠÙŠÙ… Ù…Ø®Ø§Ø·Ø± Ø§Ù„ÙƒÙˆØ§Ø±Ø«', category:'FRM', url:'https://drive.google.com/open?id=1AbB5BL4d_pki3to9wn3169PZ-OJBfwCBEjYNApvStGM' },
    { code:'EOC-QIP-2025-001', name:'Ù†Ø¸Ø§Ù… Ø§Ù„ØªØ­Ø³ÙŠÙ† ÙˆØ§Ù„Ù…ØªØ§Ø¨Ø¹Ø© (CAPA)', category:'SOP', url:'https://drive.google.com/open?id=1JSa-E4YoJL8iYjvGVVioEpp_Wu5tKQopC_tfFo56sWo' },
    { code:'EOC-SOP-2025-001', name:'ØªÙØ¹ÙŠÙ„ ÙˆØ¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø­Ø§Ø¯Ø« (ICS)', category:'SOP', url:'https://drive.google.com/open?id=1bjq5a9JSxCB_XVkzoKv-GSmTwzKJkAAEA3VjYgzZZwU' },
    { code:'EOC-CHK-2025-001', name:'Ù‚Ø§Ø¦Ù…Ø© ÙØ­Øµ Ø¬Ø§Ù‡Ø²ÙŠØ© Ø§Ù„Ø·ÙˆØ§Ø±Ø¦', category:'CHK', url:'https://drive.google.com/open?id=1Kp1OjuPEfzEA0JE_FMnf-padRq_0-VJABf1w4eZM1m8' },
    { code:'EOC-SOP-2025-002', name:'Ø­Ø±ÙŠÙ‚/Ø¯Ø®Ø§Ù† (RACE/PASS)', category:'SOP', url:'https://drive.google.com/open?id=1VT17h68xnLmUSzvNOp4Brm79F9jyXBlTYFNSBewCQDo' },
    { code:'EOC-PRO-2025-001', name:'Ø¢Ù„ÙŠØ© ØªÙ‚ÙŠÙŠÙ… Ø§Ù„Ù…Ø®Ø§Ø·Ø± Ø§Ù„Ø³Ù†ÙˆÙŠØ© (HVA)', category:'SOP', url:'https://drive.google.com/open?id=1IpfxWVyfSadhmLoHS2hAYSPs8jRF7pBYuCKo3lyTNg4' },
    { code:'EOC-PLN-2025-001', name:'Ø®Ø·Ø© Ø§Ù„Ø·ÙˆØ§Ø±Ø¦ Ø§Ù„Ø´Ø§Ù…Ù„Ø© (EOP)', category:'PLN', url:'https://drive.google.com/open?id=1rMusdz3AtFzMgOQaAg3c-7DnjwLNt79ilzUTSRRngT4' },
    { code:'EOC-SOP-2025-004', name:'Ø§Ù†Ù‚Ø·Ø§Ø¹ Ø§Ù„ÙƒÙ‡Ø±Ø¨Ø§Ø¡/Ø§Ù„Ø£Ù†Ø¸Ù…Ø© Ø§Ù„Ø­Ø±Ø¬Ø©', category:'SOP', url:'https://drive.google.com/open?id=15Q6d_f8OvBbNmoArZtfzlg3PUeWVIHCcxMRqT4owQFI' },
    { code:'EOC-FRM-2025-003', name:'ØªÙ‚ÙŠÙŠÙ… ØªÙ…Ø±ÙŠÙ† Ø§Ù„Ø¥Ø®Ù„Ø§Ø¡/Ø§Ù„Ø­Ø±ÙŠÙ‚ (After-Action)', category:'FRM', url:'https://drive.google.com/open?id=1fqd2ZeGjqXWxuTXlg8VJZUw1ddphrglHU2uGWb-V2jg' },
    { code:'EOC-SOP-2025-006', name:'Ø­Ø§Ø¯Ø« Ø¬Ø³ÙŠÙ… Ø³Ø±ÙŠØ±ÙŠ ÙˆØ¥Ø¯Ø§Ø±Ø© Ù…Ø§ Ø¨Ø¹Ø¯ Ø§Ù„Ø­Ø¯Ø« (SPSC/RCA)', category:'SOP', url:'https://drive.google.com/open?id=1CHDPHSyer7Ruuy0NY_oByQ0ekU2ozGQttNw8lRimZRs' },
    { code:'EOC-POL-2025-001', name:'Ø³ÙŠØ§Ø³Ø© Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø·ÙˆØ§Ø±Ø¦ ÙˆØ§Ù„ÙƒÙˆØ§Ø±Ø«', category:'POL', url:'https://drive.google.com/open?id=18IjABxZrfWdqs3ogcHJMRcXLC3LdYeLoOCG1DmPUnHk' },
    { code:'EOC-TOR-2025-001', name:'Ù…ÙŠØ«Ø§Ù‚ Ù„Ø¬Ù†Ø© Ø§Ù„Ø·ÙˆØ§Ø±Ø¦ ÙˆØ§Ù„ÙƒÙˆØ§Ø±Ø«', category:'TOR', url:'https://drive.google.com/open?id=1GabuSVynwTrZDo6xAWlZ-vySD2oAK1FR8YL6JYe8uLY' },
    { code:'EOC-PLN-2025-002', name:'Ø¨Ø±Ù†Ø§Ù…Ø¬ Ø§Ù„ØªØ¯Ø±ÙŠØ¨ ÙˆØ§Ù„ØªÙ…Ø§Ø±ÙŠÙ†', category:'PLN', url:'https://drive.google.com/open?id=1Y9nsgDQ1UXS60r3q5rhRBNkgE5EWW8dKsV9Vmvf3Dxw' }
  ];

  const EOC_CATEGORY_NAMES = {
    GUIDE:'Ø§Ù„Ø¯Ù„ÙŠÙ„',
    POL:'Ø§Ù„Ø³ÙŠØ§Ø³Ø§Øª', 
    SOP:'Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª Ø§Ù„ØªØ´ØºÙŠÙ„', 
    PLN:'Ø§Ù„Ø®Ø·Ø·', 
    FRM:'Ø§Ù„Ù†Ù…Ø§Ø°Ø¬', 
    LOG:'Ø§Ù„Ø³Ø¬Ù„Ø§Øª', 
    CHK:'Ù‚ÙˆØ§Ø¦Ù… Ø§Ù„ØªØ­Ù‚Ù‚', 
    REF:'Ø§Ù„Ù…Ø±Ø§Ø¬Ø¹', 
    INDEX:'Ø§Ù„ÙÙ‡Ø±Ø³',
    TOR:'Ø§Ù„Ù…ÙŠØ«Ø§Ù‚'
  };

  // ====== Ø¯ÙˆØ§Ù„ EOC ======
  function switchEocTab(tab) {
    // ØªØ­Ø¯ÙŠØ« Ø£Ø²Ø±Ø§Ø± Ø§Ù„ØªØ¨ÙˆÙŠØ¨
    document.querySelectorAll('[data-eoc-tab]').forEach(button => {
      if (button.getAttribute('data-eoc-tab') === tab) {
        button.classList.add('bg-[var(--brand1)]', 'text-white');
        button.classList.remove('bg-gray-100');
      } else {
        button.classList.remove('bg-[var(--brand1)]', 'text-white');
        button.classList.add('bg-gray-100');
      }
    });
    
    const container = document.getElementById('eocTabContent');
    container.innerHTML = '';
    
    if (tab === 'library') {
      renderEocLibrary(container, EOC_DOCS_LIBRARY);
    } else if (tab === 'plans') {
      renderEocPlans(container);
    } else if (tab === 'forms') {
      renderEocForms(container);
    } else if (tab === 'needs') {
      renderEocNeeds(container);
    }
  }

  function renderEocLibrary(container, docs) {
    // Ø¹Ù†Ø§ØµØ± Ø§Ù„ØªØ­ÙƒÙ…
    const categories = [...new Set(docs.map(doc => doc.category))];
    const controls = document.createElement('div');
    controls.className = 'flex flex-wrap items-center gap-2 mb-4';
    controls.innerHTML = `
      <div class="flex flex-wrap gap-2">
        <button data-eoc-filter="ALL" class="px-3 py-1 rounded-full bg-[var(--brand1)] text-white text-sm">Ø§Ù„ÙƒÙ„</button>
        ${categories.map(cat => 
          `<button data-eoc-filter="${cat}" class="px-3 py-1 rounded-full bg-gray-200 hover:bg-gray-300 text-sm">${EOC_CATEGORY_NAMES[cat] || cat}</button>`
        ).join('')}
      </div>
      <div class="ml-auto w-full md:w-64">
        <input id="eocSearch" type="text" placeholder="Ø§Ø¨Ø­Ø« Ø¨Ø§Ù„Ø±Ù…Ø² Ø£Ùˆ Ø§Ù„Ø¹Ù†ÙˆØ§Ù†..." class="w-full border rounded-lg px-3 py-2">
      </div>
    `;
    
    const grid = document.createElement('div');
    grid.className = 'grid-cards';
    grid.id = 'eocGrid';
    
    container.appendChild(controls);
    container.appendChild(grid);
    
    // Ø¯Ø§Ù„Ø© Ø§Ù„ØªØµÙÙŠØ© ÙˆØ§Ù„Ø¹Ø±Ø¶
    function renderFilteredDocs(filter = 'ALL', query = '') {
      grid.innerHTML = '';
      const searchQuery = query.toLowerCase();
      
      const filteredDocs = docs.filter(doc => {
        const matchesFilter = filter === 'ALL' || doc.category === filter;
        const matchesQuery = !searchQuery || 
          doc.code.toLowerCase().includes(searchQuery) || 
          doc.name.toLowerCase().includes(searchQuery);
        return matchesFilter && matchesQuery;
      });
      
      filteredDocs.forEach(doc => {
        const card = document.createElement('div');
        card.className = 'p-4 rounded-xl border bg-white shadow-sm hover:shadow-md transition flex flex-col';
        card.innerHTML = `
          <div class="text-xs text-gray-500 mb-1">${EOC_CATEGORY_NAMES[doc.category] || doc.category}</div>
          <div class="font-extrabold text-[var(--brand1)]">${doc.code}</div>
          <div class="text-gray-800 mt-1 flex-1">${doc.name}</div>
          <div class="mt-3 flex gap-2">
            <button class="px-3 py-2 text-sm text-white rounded-lg bg-[var(--brand1)] hover:bg-[var(--brand2)]" 
                    onclick="openDocModal('${doc.code}: ${doc.name}', '${doc.url}')">
              <i class="fas fa-eye ml-1"></i> Ø¹Ø±Ø¶
            </button>
            <a class="px-3 py-2 text-sm rounded-lg border hover:bg-gray-50" 
               target="_blank" href="${doc.url.replace('/preview', '/view')}">
              <i class="fas fa-up-right-from-square ml-1"></i> ÙØªØ­ ÙÙŠ ØªØ¨ÙˆÙŠØ¨
            </a>
          </div>
        `;
        grid.appendChild(card);
      });
    }
    
    // Ø¥Ø¶Ø§ÙØ© Ù…Ø³ØªÙ…Ø¹ÙŠ Ø§Ù„Ø£Ø­Ø¯Ø§Ø«
    controls.querySelectorAll('button[data-eoc-filter]').forEach(button => {
      button.addEventListener('click', () => {
        controls.querySelectorAll('button[data-eoc-filter]').forEach(btn => {
          btn.classList.remove('bg-[var(--brand1)]', 'text-white');
        });
        button.classList.add('bg-[var(--brand1)]', 'text-white');
        renderFilteredDocs(button.getAttribute('data-eoc-filter'), document.getElementById('eocSearch').value);
      });
    });
    
    document.getElementById('eocSearch').addEventListener('input', (e) => {
      const activeFilter = controls.querySelector('button[data-eoc-filter].bg-[var(--brand1)]') || 
                          { getAttribute: () => 'ALL' };
      renderFilteredDocs(activeFilter.getAttribute('data-eoc-filter'), e.target.value);
    });
    
    // Ø§Ù„ØªÙ‡ÙŠØ¦Ø© Ø§Ù„Ø£ÙˆÙ„ÙŠØ©
    renderFilteredDocs('ALL', '');
  }

  function renderEocPlans(container) {
    const wrapper = document.createElement('div');
    wrapper.className = 'space-y-6';
    
    // Ø®Ø·Ø· Ø§Ù„Ø·ÙˆØ§Ø±Ø¦
    const plansSection = document.createElement('div');
    plansSection.innerHTML = `
      <h3 class="text-xl font-bold text-[var(--brand1)] mb-4">ğŸ—ºï¸ Ø®Ø·Ø· Ø§Ù„Ø·ÙˆØ§Ø±Ø¦ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</h3>
      <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
        <div class="p-4 border rounded-xl bg-white hover:shadow-md transition">
          <div class="h-12 w-12 rounded-full bg-red-100 grid place-items-center text-red-600 mb-3">
            <i class="fas fa-fire"></i>
          </div>
          <h4 class="font-bold mb-2">Ø®Ø·Ø© Ø§Ù„Ø­Ø±ÙŠÙ‚</h4>
          <p class="text-sm text-gray-600 mb-3">Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª Ø§Ù„ØªØ¹Ø§Ù…Ù„ Ù…Ø¹ Ø­Ø§Ù„Ø§Øª Ø§Ù„Ø­Ø±ÙŠÙ‚ ÙˆØ§Ù„Ø¥Ø®Ù„Ø§Ø¡</p>
          <a href="https://drive.google.com/open?id=1VT17h68xnLmUSzvNOp4Brm79F9jyXBlTYFNSBewCQDo" target="_blank" class="text-sm text-[var(--brand1)] font-semibold">Ø¹Ø±Ø¶ Ø§Ù„Ø®Ø·Ø© â†’</a>
        </div>
        
        <div class="p-4 border rounded-xl bg-white hover:shadow-md transition">
          <div class="h-12 w-12 rounded-full bg-blue-100 grid place-items-center text-blue-600 mb-3">
            <i class="fas fa-bolt"></i>
          </div>
          <h4 class="font-bold mb-2">Ø§Ù†Ù‚Ø·Ø§Ø¹ Ø§Ù„ÙƒÙ‡Ø±Ø¨Ø§Ø¡</h4>
          <p class="text-sm text-gray-600 mb-3">Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª Ø§Ù„ØªØ¹Ø§Ù…Ù„ Ù…Ø¹ Ø§Ù†Ù‚Ø·Ø§Ø¹ Ø§Ù„ØªÙŠØ§Ø± Ø§Ù„ÙƒÙ‡Ø±Ø¨Ø§Ø¦ÙŠ</p>
          <a href="https://drive.google.com/open?id=15Q6d_f8OvBbNmoArZtfzlg3PUeWVIHCcxMRqT4owQFI" target="_blank" class="text-sm text-[var(--brand1)] font-semibold">Ø¹Ø±Ø¶ Ø§Ù„Ø®Ø·Ø© â†’</a>
        </div>
        
        <div class="p-4 border rounded-xl bg-white hover:shadow-md transition">
          <div class="h-12 w-12 rounded-full bg-green-100 grid place-items-center text-green-600 mb-3">
            <i class="fas fa-virus"></i>
          </div>
          <h4 class="font-bold mb-2">ØªÙØ´ÙŠ Ø§Ù„Ø£Ù…Ø±Ø§Ø¶</h4>
          <p class="text-sm text-gray-600 mb-3">Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª Ø§Ù„ØªØ¹Ø§Ù…Ù„ Ù…Ø¹ ØªÙØ´ÙŠ Ø§Ù„Ø£Ù…Ø±Ø§Ø¶ Ø§Ù„Ù…Ø¹Ø¯ÙŠØ©</p>
          <a href="https://drive.google.com/open?id=1OqFbjCJ9uqTbQPJicNU3cFBR-SgeuHwRjYBuWtAjM4Q" target="_blank" class="text-sm text-[var(--brand1)] font-semibold">Ø¹Ø±Ø¶ Ø§Ù„Ø®Ø·Ø© â†’</a>
        </div>
        
        <div class="p-4 border rounded-xl bg-white hover:shadow-md transition">
          <div class="h-12 w-12 rounded-full bg-purple-100 grid place-items-center text-purple-600 mb-3">
            <i class="fas fa-tools"></i>
          </div>
          <h4 class="font-bold mb-2">ØªØ¹Ø·Ù„ Ø§Ù„Ø£Ù†Ø¸Ù…Ø©</h4>
          <p class="text-sm text-gray-600 mb-3">Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª Ø§Ù„ØªØ¹Ø§Ù…Ù„ Ù…Ø¹ ØªØ¹Ø·Ù„ Ø§Ù„Ø£Ù†Ø¸Ù…Ø© Ø§Ù„Ø­Ø±Ø¬Ø©</p>
          <a href="https://drive.google.com/open?id=1p-OsanRRMfaw9a1KV500Z-lxvCZ8Ch91EFJ0Alptviw" target="_blank" class="text-sm text-[var(--brand1)] font-semibold">Ø¹Ø±Ø¶ Ø§Ù„Ø®Ø·Ø© â†’</a>
        </div>
      </div>
    `;
    
    wrapper.appendChild(plansSection);
    container.appendChild(wrapper);
  }

  function renderEocForms(container) {
    const wrapper = document.createElement('div');
    wrapper.className = 'space-y-6';
    
    // Ù†Ù…ÙˆØ°Ø¬ ØªØ³Ø¬ÙŠÙ„ ØªÙ…Ø±ÙŠÙ† Ø·ÙˆØ§Ø±Ø¦
    const drillForm = document.createElement('div');
    drillForm.className = 'border rounded-xl p-4 bg-white';
    drillForm.innerHTML = `
      <h3 class="text-xl font-bold text-[var(--brand1)] mb-4">ğŸ“ ØªØ³Ø¬ÙŠÙ„ ØªÙ…Ø±ÙŠÙ† Ø·ÙˆØ§Ø±Ø¦</h3>
      <form id="eocDrillForm" class="grid grid-cols-1 md:grid-cols-2 gap-4">
        <div>
          <label class="block text-sm font-semibold mb-1">Ù†ÙˆØ¹ Ø§Ù„ØªÙ…Ø±ÙŠÙ† *</label>
          <select name="drill_type" required class="w-full border rounded-lg px-3 py-2">
            <option value="">Ø§Ø®ØªØ± Ù†ÙˆØ¹ Ø§Ù„ØªÙ…Ø±ÙŠÙ†</option>
            <option value="Ø­Ø±ÙŠÙ‚">Ø­Ø±ÙŠÙ‚</option>
            <option value="Ø¥Ø®Ù„Ø§Ø¡">Ø¥Ø®Ù„Ø§Ø¡</option>
            <option value="Ø§Ù†Ù‚Ø·Ø§Ø¹ ÙƒÙ‡Ø±Ø¨Ø§Ø¡">Ø§Ù†Ù‚Ø·Ø§Ø¹ ÙƒÙ‡Ø±Ø¨Ø§Ø¡</option>
            <option value="ØªÙØ´ÙŠ Ø£Ù…Ø±Ø§Ø¶">ØªÙØ´ÙŠ Ø£Ù…Ø±Ø§Ø¶</option>
            <option value="Ø¢Ø®Ø±">Ø¢Ø®Ø±</option>
          </select>
        </div>
        <div>
          <label class="block text-sm font-semibold mb-1">ØªØ§Ø±ÙŠØ® Ø§Ù„ØªÙ…Ø±ÙŠÙ† *</label>
          <input type="date" name="drill_date" required class="w-full border rounded-lg px-3 py-2">
        </div>
        <div>
          <label class="block text-sm font-semibold mb-1">ÙˆÙ‚Øª Ø§Ù„ØªÙ…Ø±ÙŠÙ† *</label>
          <input type="time" name="drill_time" required class="w-full border rounded-lg px-3 py-2">
        </div>
        <div>
          <label class="block text-sm font-semibold mb-1">Ø§Ù„Ù…ÙƒØ§Ù† *</label>
          <input name="drill_location" required class="w-full border rounded-lg px-3 py-2" placeholder="Ù…ÙƒØ§Ù† Ø¥Ø¬Ø±Ø§Ø¡ Ø§Ù„ØªÙ…Ø±ÙŠÙ†">
        </div>
        <div class="md:col-span-2">
          <label class="block text-sm font-semibold mb-1">Ø§Ù„Ù‡Ø¯Ù Ù…Ù† Ø§Ù„ØªÙ…Ø±ÙŠÙ† *</label>
          <textarea name="drill_objective" rows="2" required class="w-full border rounded-lg px-3 py-2" placeholder="Ø§Ù„Ù‡Ø¯Ù Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ Ù…Ù† Ø§Ù„ØªÙ…Ø±ÙŠÙ†..."></textarea>
        </div>
        <div class="md:col-span-2">
          <label class="block text-sm font-semibold mb-1">Ø§Ù„Ù†ØªØ§Ø¦Ø¬ ÙˆØ§Ù„Ù…Ù„Ø§Ø­Ø¸Ø§Øª *</label>
          <textarea name="drill_results" rows="3" required class="w-full border rounded-lg px-3 py-2" placeholder="Ù†ØªØ§Ø¦Ø¬ Ø§Ù„ØªÙ…Ø±ÙŠÙ† ÙˆØ§Ù„Ù…Ù„Ø§Ø­Ø¸Ø§Øª..."></textarea>
        </div>
        <div>
          <label class="block text-sm font-semibold mb-1">Ø§Ù„Ù…Ø³Ø¤ÙˆÙ„ Ø¹Ù† Ø§Ù„ØªÙ…Ø±ÙŠÙ† *</label>
          <input name="drill_responsible" required class="w-full border rounded-lg px-3 py-2" placeholder="Ø§Ø³Ù… Ø§Ù„Ù…Ø³Ø¤ÙˆÙ„">
        </div>
        <div>
          <label class="block text-sm font-semibold mb-1">Ø¹Ø¯Ø¯ Ø§Ù„Ù…Ø´Ø§Ø±ÙƒÙŠÙ† *</label>
          <input type="number" name="participants_count" required class="w-full border rounded-lg px-3 py-2" placeholder="Ø¹Ø¯Ø¯ Ø§Ù„Ù…Ø´Ø§Ø±ÙƒÙŠÙ†">
        </div>
        <div class="md:col-span-2 flex items-center gap-3 pt-2">
          <button type="submit" class="px-4 py-2 rounded-lg bg-[var(--brand1)] text-white hover:bg-[var(--brand2)]">Ø­ÙØ¸ Ø§Ù„ØªÙ‚Ø±ÙŠØ±</button>
          <span id="eocDrillMsg" class="text-sm"></span>
        </div>
      </form>
    `;
    
    wrapper.appendChild(drillForm);
    container.appendChild(wrapper);
    
    // Ù…Ø¹Ø§Ù„Ø¬Ø© Ù†Ù…ÙˆØ°Ø¬ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„ØªÙ…Ø±ÙŠÙ†
    const eocDrillForm = document.getElementById('eocDrillForm');
    if (eocDrillForm) {
      eocDrillForm.addEventListener('submit', function(e) {
        e.preventDefault();
        const messageElement = document.getElementById('eocDrillMsg');
        messageElement.textContent = 'Ø¬Ø§Ø±Ù Ø­ÙØ¸ Ø§Ù„ØªÙ‚Ø±ÙŠØ±...';
        messageElement.className = 'text-sm text-blue-600';
        
        // Ø­ÙØ¸ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ø­Ù„ÙŠØ§Ù‹
        const formData = new FormData(eocDrillForm);
        const drillData = {};
        formData.forEach((value, key) => {
          drillData[key] = value;
        });
        drillData.timestamp = new Date().toISOString();
        
        // Ø­ÙØ¸ ÙÙŠ localStorage
        let drills = JSON.parse(localStorage.getItem('eoc_drills') || '[]');
        drills.push(drillData);
        localStorage.setItem('eoc_drills', JSON.stringify(drills));
        
        messageElement.textContent = 'âœ… ØªÙ… Ø­ÙØ¸ Ø§Ù„ØªÙ‚Ø±ÙŠØ± Ø¨Ù†Ø¬Ø§Ø­';
        messageElement.className = 'text-sm text-green-600';
        eocDrillForm.reset();
      });
    }
  }

  function renderEocNeeds(container) {
    const needs = [
      { key: 'charter', text: 'Ù…ÙŠØ«Ø§Ù‚ Ù„Ø¬Ù†Ø© Ø§Ù„Ø·ÙˆØ§Ø±Ø¦ ÙˆØ§Ù„ÙƒÙˆØ§Ø±Ø« Ù…Ø¹ØªÙ…Ø¯ (EOC-TOR-2025-001)', required: true },
      { key: 'policy', text: 'Ø³ÙŠØ§Ø³Ø© Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø·ÙˆØ§Ø±Ø¦ ÙˆØ§Ù„ÙƒÙˆØ§Ø±Ø« Ù…Ø¹ØªÙ…Ø¯Ø© (EOC-POL-2025-001)', required: true },
      { key: 'plan', text: 'Ø®Ø·Ø© Ø§Ù„Ø·ÙˆØ§Ø±Ø¦ Ø§Ù„Ø´Ø§Ù…Ù„Ø© Ù…Ø¹ØªÙ…Ø¯Ø© (EOC-PLN-2025-001)', required: true },
      { key: 'training', text: 'Ø¨Ø±Ù†Ø§Ù…Ø¬ Ø§Ù„ØªØ¯Ø±ÙŠØ¨ ÙˆØ§Ù„ØªÙ…Ø§Ø±ÙŠÙ† Ù…Ù†ÙØ° (EOC-PLN-2025-002)', required: true },
      { key: 'hva', text: 'ØªÙ‚ÙŠÙŠÙ… Ù…Ø®Ø§Ø·Ø± Ø§Ù„ÙƒÙˆØ§Ø±Ø« (HVA) Ù…ÙƒØªÙ…Ù„', required: true },
      { key: 'equipment', text: 'Ø³Ø¬Ù„ Ù…Ø¹Ø¯Ø§Øª Ø§Ù„Ø§Ø³ØªØ¬Ø§Ø¨Ø© Ù…Ø­Ø¯Ø«', required: true },
      { key: 'communication', text: 'Ù„ÙˆØ­Ø© Ø§ØªØµØ§Ù„Ø§Øª Ø§Ù„Ø·ÙˆØ§Ø±Ø¦ Ù…Ø­Ø¯Ø«Ø©', required: true },
      { key: 'meetings', text: 'Ù…Ø­Ø§Ø¶Ø± Ø§Ø¬ØªÙ…Ø§Ø¹Ø§Øª Ø§Ù„Ù„Ø¬Ù†Ø© Ù…Ø³Ø¬Ù„Ø© ÙˆÙ…Ù†Ø¸Ù…Ø©', required: true },
    ];
    
    const wrapper = document.createElement('div');
    wrapper.className = 'grid-cards';
    
    needs.forEach(need => {
      const card = document.createElement('div');
      card.className = 'p-4 rounded-xl border bg-white shadow-sm';
      card.innerHTML = `
        <label class="flex items-start gap-3 cursor-pointer">
          <input type="checkbox" class="mt-1 h-5 w-5" data-required="${need.required ? 1 : 0}">
          <span class="font-semibold">${need.text}</span>
        </label>
        ${need.required ? '<div class="text-xs text-red-600 mt-1">Ù…ØªØ·Ù„Ø¨ Ø¥Ù„Ø²Ø§Ù…ÙŠ</div>' : ''}
      `;
      wrapper.appendChild(card);
    });
    
    const actions = document.createElement('div');
    actions.className = 'pt-4 flex gap-3';
    actions.innerHTML = `
      <button class="px-4 py-2 rounded-lg bg-[var(--brand1)] text-white hover:bg-[var(--brand2)]" onclick="validateEocNeeds()">
        ØªØ­Ù‚Ù‘Ù‚ Ù…Ù† Ø§Ù„Ø§ÙƒØªÙ…Ø§Ù„
      </button>
      <button class="px-4 py-2 rounded-lg border hover:bg-gray-50" onclick="generateEocReport()">
        Ø¥Ù†Ø´Ø§Ø¡ ØªÙ‚Ø±ÙŠØ± Ø§Ù„Ø¬Ø§Ù‡Ø²ÙŠØ©
      </button>
    `;
    
    container.appendChild(wrapper);
    container.appendChild(actions);
  }

  function validateEocNeeds() {
    const requiredCheckboxes = [...document.querySelectorAll('#eocTabContent input[data-required="1"]')];
    const missingCount = requiredCheckboxes.filter(checkbox => !checkbox.checked).length;
    
    if (missingCount === 0) {
      alert('Ù…Ù…ØªØ§Ø² âœ… â€” Ø¬Ù…ÙŠØ¹ Ù…ØªØ·Ù„Ø¨Ø§Øª Ø§Ù„Ø·ÙˆØ§Ø±Ø¦ ÙˆØ§Ù„ÙƒÙˆØ§Ø±Ø« Ø§Ù„Ø¥Ù„Ø²Ø§Ù…ÙŠØ© Ù…ÙƒØªÙ…Ù„Ø©.');
    } else {
      alert(`âš ï¸ ØªÙ†Ø¨ÙŠÙ‡: ÙŠÙˆØ¬Ø¯ ${missingCount} Ù…ØªØ·Ù„Ø¨(Ø§Øª) Ø¥Ù„Ø²Ø§Ù…ÙŠ ØºÙŠØ± Ù…ÙƒØªÙ…Ù„ ÙÙŠ Ù‚Ø³Ù… Ø§Ù„Ø·ÙˆØ§Ø±Ø¦ ÙˆØ§Ù„ÙƒÙˆØ§Ø±Ø«.`);
    }
  }

  function generateEocReport() {
    const checkboxes = [...document.querySelectorAll('#eocTabContent input[type="checkbox"]')];
    const checkedCount = checkboxes.filter(checkbox => checkbox.checked).length;
    const totalCount = checkboxes.length;
    const percentage = Math.round((checkedCount / totalCount) * 100);
    
    alert(`ğŸ“‹ ØªÙ‚Ø±ÙŠØ± Ø¬Ø§Ù‡Ø²ÙŠØ© Ø§Ù„Ø·ÙˆØ§Ø±Ø¦ ÙˆØ§Ù„ÙƒÙˆØ§Ø±Ø«:\n\nâœ… ${checkedCount} Ù…Ù† ${totalCount} Ø¨Ù†Ø¯ Ù…ÙƒØªÙ…Ù„\nğŸ“Š Ù†Ø³Ø¨Ø© Ø§Ù„Ø¥ÙƒÙ…Ø§Ù„: ${percentage}%\n\n${percentage >= 80 ? 'Ù…Ø³ØªÙˆÙ‰ Ø¬ÙŠØ¯ âœ“' : 'ÙŠØ­ØªØ§Ø¬ Ø¥Ù„Ù‰ ØªØ­Ø³ÙŠÙ† âš ï¸'}`);
  }

  function eocExportAll() {
    const data = {
      drills: JSON.parse(localStorage.getItem('eoc_drills') || '[]')
    };
    const blob = new Blob([JSON.stringify(data, null, 2)], {type:'application/json'});
    const a = document.createElement('a');
    a.href = URL.createObjectURL(blob);
    a.download = 'eoc_data_backup.json';
    document.body.appendChild(a);
    a.click();
    a.remove();
  }

  function eocImportAll(file) {
    const reader = new FileReader();
    reader.onload = (e) => {
      try {
        const data = JSON.parse(e.target.result);
        if (data.drills) localStorage.setItem('eoc_drills', JSON.stringify(data.drills));
        alert('âœ… ØªÙ… Ø§Ø³ØªÙŠØ±Ø§Ø¯ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø·ÙˆØ§Ø±Ø¦ Ø¨Ù†Ø¬Ø§Ø­.');
      } catch (err) {
        alert('âš ï¸ Ù…Ù„Ù ØºÙŠØ± ØµØ§Ù„Ø­.');
      }
    };
    reader.readAsText(file, 'utf-8');
  }

  // ====== Ù…ÙƒØ§ÙØ­Ø© Ø§Ù„Ø¹Ø¯ÙˆÙ‰ (IPC) â€” Ù…ÙƒØªØ¨Ø© + Ù…Ø¤Ø´Ø±Ø§Øª + Ù†Ù…Ø§Ø°Ø¬ Ø¨Ø¥Ø³Ù†Ø§Ø¯ Ù…Ø­Ù„ÙŠ ======
  const IPC_DOCS_LIBRARY = [
    { code:'DEC-IPC-2025-001', name:'Ù‚Ø±Ø§Ø± ØªØ´ÙƒÙŠÙ„ Ù„Ø¬Ù†Ø© Ù…ÙƒØ§ÙØ­Ø© Ø§Ù„Ø¹Ø¯ÙˆÙ‰', category:'DEC', url:'#' },
    { code:'CHT-IPC-2025-001', name:'Ù…ÙŠØ«Ø§Ù‚ Ù„Ø¬Ù†Ø© Ù…ÙƒØ§ÙØ­Ø© Ø§Ù„Ø¹Ø¯ÙˆÙ‰', category:'CHT', url:'#' },
    { code:'POL-IPC-2025-001', name:'Ø³ÙŠØ§Ø³Ø© Ø¨Ø±Ù†Ø§Ù…Ø¬ Ù…ÙƒØ§ÙØ­Ø© Ø§Ù„Ø¹Ø¯ÙˆÙ‰', category:'POL', url:'#' },
    { code:'POL-IPC-2025-002', name:'Ø³ÙŠØ§Ø³Ø© ØºØ³Ù„ Ø§Ù„ÙŠØ¯ÙŠÙ†', category:'POL', url:'#' },
    { code:'SOP-IPC-2025-003', name:'Ø¥Ø¬Ø±Ø§Ø¡ Ø§Ù„ØªØ¹Ø§Ù…Ù„ Ù…Ø¹ Ø§Ù„ØªØ¹Ø±Ø¶ Ø§Ù„ÙˆØ®Ø²ÙŠ (Needlestick)', category:'SOP', url:'#' },
    { code:'LOG-IPC-2025-004', name:'Ø³Ø¬Ù„ Ù…Ø±Ø§Ù‚Ø¨Ø© Ø§Ù„ØªØ¹Ù‚ÙŠÙ… ÙˆØ¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ù…Ø¹Ø§Ù„Ø¬Ø©', category:'LOG', url:'#' },
    { code:'REP-IPC-2025-005', name:'ØªÙ‚Ø±ÙŠØ± Ù…Ø±Ø§Ù‚Ø¨Ø© Ø¹Ø¯ÙˆÙ‰ Ù…Ø±ØªØ¨Ø·Ø© Ø¨Ø§Ù„Ø±Ø¹Ø§ÙŠØ© Ø§Ù„ØµØ­ÙŠØ©', category:'REP', url:'#' },
  ];
  const IPC_CATEGORY_NAMES = { POL:'Ø§Ù„Ø³ÙŠØ§Ø³Ø§Øª', SOP:'Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª Ø§Ù„ØªØ´ØºÙŠÙ„', DEC:'Ø§Ù„Ù‚Ø±Ø§Ø±Ø§Øª', CHT:'Ø§Ù„Ù…ÙŠØ«Ø§Ù‚', LOG:'Ø§Ù„Ø³Ø¬Ù„Ø§Øª', REP:'Ø§Ù„ØªÙ‚Ø§Ø±ÙŠØ±' };

  // ØªØ®Ø²ÙŠÙ† Ù…Ø­Ù„ÙŠ Ø¢Ù…Ù† Ø§Ø®ØªÙŠØ§Ø±ÙŠ Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… WebCrypto (AESâ€‘GCM)
  const SecureStore = (() => {
    const SALT_KEY = 'ipc_salt_v1';
    const MODE_KEY = 'ipc_secure_mode';
    let cryptoKey = null;

    function toBase64(buf) { return btoa(String.fromCharCode(...new Uint8Array(buf))); }
    function fromBase64(b64) { return Uint8Array.from(atob(b64), c => c.charCodeAt(0)).buffer; }

    async function deriveKey(passphrase, saltB64) {
      const enc = new TextEncoder();
      const keyMaterial = await crypto.subtle.importKey('raw', enc.encode(passphrase), 'PBKDF2', false, ['deriveKey']);
      const salt = saltB64 ? fromBase64(saltB64) : crypto.getRandomValues(new Uint8Array(16)).buffer;
      const derived = await crypto.subtle.deriveKey(
        { name: 'PBKDF2', salt, iterations: 120000, hash: 'SHA-256' },
        keyMaterial,
        { name: 'AES-GCM', length: 256 },
        false,
        ['encrypt','decrypt']
      );
      const savedSalt = saltB64 || toBase64(salt);
      localStorage.setItem(SALT_KEY, savedSalt);
      return derived;
    }

    return {
      async setPassphrase(passphrase) {
        if (!window.crypto || !window.crypto.subtle) {
          alert('âš ï¸ Ù…ØªØµÙØ­Ùƒ Ù„Ø§ ÙŠØ¯Ø¹Ù… WebCrypto Ù„ØªÙØ¹ÙŠÙ„ Ø§Ù„Ø­Ù…Ø§ÙŠØ©. Ø³ÙŠØªÙ… Ø§Ù„Ø­ÙØ¸ Ø¨Ø¯ÙˆÙ† ØªØ´ÙÙŠØ±.');
          localStorage.setItem(MODE_KEY, 'off');
          cryptoKey = null;
          return false;
        }
        cryptoKey = await deriveKey(passphrase, localStorage.getItem(SALT_KEY));
        localStorage.setItem(MODE_KEY, 'on');
        return true;
      },
      clearPassphrase() {
        cryptoKey = null;
        localStorage.setItem(MODE_KEY, 'off');
      },
      isOn() {
        return localStorage.getItem(MODE_KEY) === 'on' && cryptoKey !== null;
      },
      async encryptJson(obj) {
        const enc = new TextEncoder();
        const iv = crypto.getRandomValues(new Uint8Array(12));
        const data = enc.encode(JSON.stringify(obj));
        const encrypted = await crypto.subtle.encrypt({ name: 'AES-GCM', iv }, cryptoKey, data);
        return toBase64(iv) + ':' + toBase64(encrypted);
      },
      async decryptJson(ciphertext) {
        const [ivB64, dataB64] = ciphertext.split(':');
        const iv = fromBase64(ivB64);
        const data = fromBase64(dataB64);
        const decrypted = await crypto.subtle.decrypt({ name: 'AES-GCM', iv }, cryptoKey, data);
        return JSON.parse(new TextDecoder().decode(decrypted));
      }
    };
  })();

  // ====== Ø¯ÙˆØ§Ù„ IPC ======
  function switchIpcTab(tab) {
    // ØªØ­Ø¯ÙŠØ« Ø£Ø²Ø±Ø§Ø± Ø§Ù„ØªØ¨ÙˆÙŠØ¨
    document.querySelectorAll('[data-ipc-tab]').forEach(button => {
      if (button.getAttribute('data-ipc-tab') === tab) {
        button.classList.add('bg-[var(--brand1)]', 'text-white');
        button.classList.remove('bg-gray-100');
      } else {
        button.classList.remove('bg-[var(--brand1)]', 'text-white');
        button.classList.add('bg-gray-100');
      }
    });
    
    const container = document.getElementById('ipcTabContent');
    container.innerHTML = '';
    
    if (tab === 'library') {
      renderIpcLibrary(container, IPC_DOCS_LIBRARY);
    } else if (tab === 'surveillance') {
      renderIpcSurveillance(container);
    } else if (tab === 'forms') {
      renderIpcForms(container);
    } else if (tab === 'needs') {
      renderIpcNeeds(container);
    }
  }

  function renderIpcLibrary(container, docs) {
    // Ø¹Ù†Ø§ØµØ± Ø§Ù„ØªØ­ÙƒÙ…
    const categories = [...new Set(docs.map(doc => doc.category))];
    const controls = document.createElement('div');
    controls.className = 'flex flex-wrap items-center gap-2 mb-4';
    controls.innerHTML = `
      <div class="flex flex-wrap gap-2">
        <button data-ipc-filter="ALL" class="px-3 py-1 rounded-full bg-[var(--brand1)] text-white text-sm">Ø§Ù„ÙƒÙ„</button>
        ${categories.map(cat => 
          `<button data-ipc-filter="${cat}" class="px-3 py-1 rounded-full bg-gray-200 hover:bg-gray-300 text-sm">${IPC_CATEGORY_NAMES[cat] || cat}</button>`
        ).join('')}
      </div>
      <div class="ml-auto w-full md:w-64">
        <input id="ipcSearch" type="text" placeholder="Ø§Ø¨Ø­Ø« Ø¨Ø§Ù„Ø±Ù…Ø² Ø£Ùˆ Ø§Ù„Ø¹Ù†ÙˆØ§Ù†..." class="w-full border rounded-lg px-3 py-2">
      </div>
    `;
    
    const grid = document.createElement('div');
    grid.className = 'grid-cards';
    grid.id = 'ipcGrid';
    
    container.appendChild(controls);
    container.appendChild(grid);
    
    // Ø¯Ø§Ù„Ø© Ø§Ù„ØªØµÙÙŠØ© ÙˆØ§Ù„Ø¹Ø±Ø¶
    function renderFilteredDocs(filter = 'ALL', query = '') {
      grid.innerHTML = '';
      const searchQuery = query.toLowerCase();
      
      const filteredDocs = docs.filter(doc => {
        const matchesFilter = filter === 'ALL' || doc.category === filter;
        const matchesQuery = !searchQuery || 
          doc.code.toLowerCase().includes(searchQuery) || 
          doc.name.toLowerCase().includes(searchQuery);
        return matchesFilter && matchesQuery;
      });
      
      filteredDocs.forEach(doc => {
        const card = document.createElement('div');
        card.className = 'p-4 rounded-xl border bg-white shadow-sm hover:shadow-md transition flex flex-col';
        card.innerHTML = `
          <div class="text-xs text-gray-500 mb-1">${IPC_CATEGORY_NAMES[doc.category] || doc.category}</div>
          <div class="font-extrabold text-[var(--brand1)]">${doc.code}</div>
          <div class="text-gray-800 mt-1 flex-1">${doc.name}</div>
          <div class="mt-3 flex gap-2">
            <button class="px-3 py-2 text-sm text-white rounded-lg bg-[var(--brand1)] hover:bg-[var(--brand2)]" 
                    onclick="openDocModal('${doc.code}: ${doc.name}', '${doc.url}')">
              <i class="fas fa-eye ml-1"></i> Ø¹Ø±Ø¶
            </button>
            <a class="px-3 py-2 text-sm rounded-lg border hover:bg-gray-50" 
               target="_blank" href="${doc.url.replace('/preview', '/view')}">
              <i class="fas fa-up-right-from-square ml-1"></i> ÙØªØ­ ÙÙŠ ØªØ¨ÙˆÙŠØ¨
            </a>
          </div>
        `;
        grid.appendChild(card);
      });
    }
    
    // Ø¥Ø¶Ø§ÙØ© Ù…Ø³ØªÙ…Ø¹ÙŠ Ø§Ù„Ø£Ø­Ø¯Ø§Ø«
    controls.querySelectorAll('button[data-ipc-filter]').forEach(button => {
      button.addEventListener('click', () => {
        controls.querySelectorAll('button[data-ipc-filter]').forEach(btn => {
          btn.classList.remove('bg-[var(--brand1)]', 'text-white');
        });
        button.classList.add('bg-[var(--brand1)]', 'text-white');
        renderFilteredDocs(button.getAttribute('data-ipc-filter'), document.getElementById('ipcSearch').value);
      });
    });
    
    document.getElementById('ipcSearch').addEventListener('input', (e) => {
      const activeFilter = controls.querySelector('button[data-ipc-filter].bg-[var(--brand1)]') || 
                          { getAttribute: () => 'ALL' };
      renderFilteredDocs(activeFilter.getAttribute('data-ipc-filter'), e.target.value);
    });
    
    // Ø§Ù„ØªÙ‡ÙŠØ¦Ø© Ø§Ù„Ø£ÙˆÙ„ÙŠØ©
    renderFilteredDocs('ALL', '');
  }

  function renderIpcSurveillance(container) {
    // ØªÙ†ÙÙŠØ° ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ù…Ø±Ø§Ù‚Ø¨Ø© ÙˆØ§Ù„Ù…Ø¤Ø´Ø±Ø§Øª Ù„Ù…ÙƒØ§ÙØ­Ø© Ø§Ù„Ø¹Ø¯ÙˆÙ‰
    container.innerHTML = `
      <div class="space-y-6">
        <h3 class="text-xl font-bold text-[var(--brand1)] mb-4">ğŸ“Š Ù…Ø±Ø§Ù‚Ø¨Ø© Ø¹Ø¯ÙˆÙ‰ Ø§Ù„Ù…Ø±Ø§ÙÙ‚ Ø§Ù„ØµØ­ÙŠØ©</h3>
        <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
          <div class="p-4 border rounded-xl bg-white text-center">
            <div class="text-3xl font-bold text-green-600 mb-1">92%</div>
            <div class="text-sm text-gray-600">Ø§Ù„ØªØ²Ø§Ù… ØºØ³Ù„ Ø§Ù„ÙŠØ¯ÙŠÙ†</div>
          </div>
          <div class="p-4 border rounded-xl bg-white text-center">
            <div class="text-3xl font-bold text-blue-600 mb-1">3</div>
            <div class="text-sm text-gray-600">Ø­Ø§Ù„Ø§Øª Ø¹Ø¯ÙˆÙ‰ Ù‡Ø°Ø§ Ø§Ù„Ø´Ù‡Ø±</div>
          </div>
          <div class="p-4 border rounded-xl bg-white text-center">
            <div class="text-3xl font-bold text-orange-600 mb-1">100%</div>
            <div class="text-sm text-gray-600">Ø§Ù„ØªØ²Ø§Ù… Ø§Ù„ØªØ¹Ù‚ÙŠÙ…</div>
          </div>
        </div>
        
        <div class="border rounded-xl p-4 bg-white">
          <h4 class="font-bold mb-3">â• Ø¥Ø¯Ø®Ø§Ù„ Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ø±Ø§Ù‚Ø¨Ø© Ø§Ù„Ø¹Ø¯ÙˆÙ‰</h4>
          <form id="ipcSurveillanceForm" class="grid grid-cols-1 md:grid-cols-2 gap-4">
            <div>
              <label class="block text-sm font-semibold mb-1">Ø§Ù„ØªØ§Ø±ÙŠØ® *</label>
              <input type="date" name="surv_date" required class="w-full border rounded-lg px-3 py-2">
            </div>
            <div>
              <label class="block text-sm font-semibold mb-1">Ø§Ù„Ù‚Ø³Ù… *</label>
              <select name="surv_dept" required class="w-full border rounded-lg px-3 py-2">
                <option value="">Ø§Ø®ØªØ± Ø§Ù„Ù‚Ø³Ù…</option>
                <option value="Ø§Ù„Ø¹ÙŠØ§Ø¯Ø§Øª">Ø§Ù„Ø¹ÙŠØ§Ø¯Ø§Øª</option>
                <option value="Ø§Ù„Ø·ÙˆØ§Ø±Ø¦">Ø§Ù„Ø·ÙˆØ§Ø±Ø¦</option>
                <option value="Ø§Ù„Ù…Ø®ØªØ¨Ø±">Ø§Ù„Ù…Ø®ØªØ¨Ø±</option>
                <option value="Ø§Ù„Ø£Ø´Ø¹Ø©">Ø§Ù„Ø£Ø´Ø¹Ø©</option>
              </select>
            </div>
            <div>
              <label class="block text-sm font-semibold mb-1">Ù†ÙˆØ¹ Ø§Ù„Ø¹Ø¯ÙˆÙ‰</label>
              <select name="surv_type" class="w-full border rounded-lg px-3 py-2">
                <option value="">Ø§Ø®ØªØ± Ø§Ù„Ù†ÙˆØ¹</option>
                <option value="Ø¹Ø¯ÙˆÙ‰ Ù…Ø¬Ø±Ù‰ Ø§Ù„Ø¯Ù…">Ø¹Ø¯ÙˆÙ‰ Ù…Ø¬Ø±Ù‰ Ø§Ù„Ø¯Ù…</option>
                <option value="Ø¹Ø¯ÙˆÙ‰ Ø§Ù„Ù…Ø³Ø§Ù„Ùƒ Ø§Ù„Ø¨ÙˆÙ„ÙŠØ©">Ø¹Ø¯ÙˆÙ‰ Ø§Ù„Ù…Ø³Ø§Ù„Ùƒ Ø§Ù„Ø¨ÙˆÙ„ÙŠØ©</option>
                <option value="Ø¹Ø¯ÙˆÙ‰ Ù…ÙˆÙ‚Ø¹ Ø§Ù„Ø¬Ø±Ø§Ø­Ø©">Ø¹Ø¯ÙˆÙ‰ Ù…ÙˆÙ‚Ø¹ Ø§Ù„Ø¬Ø±Ø§Ø­Ø©</option>
                <option value="Ø§Ù„ØªÙ‡Ø§Ø¨ Ø±Ø¦ÙˆÙŠ">Ø§Ù„ØªÙ‡Ø§Ø¨ Ø±Ø¦ÙˆÙŠ</option>
              </select>
            </div>
            <div>
              <label class="block text-sm font-semibold mb-1">Ø¹Ø¯Ø¯ Ø§Ù„Ø­Ø§Ù„Ø§Øª</label>
              <input type="number" name="surv_cases" class="w-full border rounded-lg px-3 py-2" placeholder="0">
            </div>
            <div class="md:col-span-2 flex items-center gap-3 pt-2">
              <button type="submit" class="px-4 py-2 rounded-lg bg-[var(--brand1)] text-white hover:bg-[var(--brand2)]">Ø­ÙØ¸ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª</button>
              <span id="ipcSurvMsg" class="text-sm"></span>
            </div>
          </form>
        </div>
      </div>
    `;
    
    const form = document.getElementById('ipcSurveillanceForm');
    if (form) {
      form.addEventListener('submit', function(e) {
        e.preventDefault();
        const msg = document.getElementById('ipcSurvMsg');
        msg.textContent = 'Ø¬Ø§Ø±Ù Ø§Ù„Ø­ÙØ¸...';
        msg.className = 'text-sm text-blue-600';
        
        // ÙÙŠ Ø¨ÙŠØ¦Ø© Ø­Ù‚ÙŠÙ‚ÙŠØ©ØŒ Ù‡Ù†Ø§ Ø³ÙŠØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù„Ø®Ø§Ø¯Ù…
        setTimeout(() => {
          msg.textContent = 'âœ… ØªÙ… Ø­ÙØ¸ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª (ÙÙŠ Ø¨ÙŠØ¦Ø© Ø­Ù‚ÙŠÙ‚ÙŠØ© Ø³ÙŠØªÙ… Ø­ÙØ¸Ù‡Ø§ ÙÙŠ Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª)';
          msg.className = 'text-sm text-green-600';
          form.reset();
        }, 1000);
      });
    }
  }

  function renderIpcForms(container) {
    // ØªÙ†ÙÙŠØ° Ù†Ù…Ø§Ø°Ø¬ Ø¥Ø¯Ø®Ø§Ù„ Ø¨ÙŠØ§Ù†Ø§Øª Ù…ÙƒØ§ÙØ­Ø© Ø§Ù„Ø¹Ø¯ÙˆÙ‰
    container.innerHTML = `
      <div class="space-y-6">
        <h3 class="text-xl font-bold text-[var(--brand1)] mb-4">ğŸ“ Ù†Ù…Ø§Ø°Ø¬ Ø¥Ø¯Ø®Ø§Ù„ Ø¨ÙŠØ§Ù†Ø§Øª IPC</h3>
        
        <div class="border rounded-xl p-4 bg-white">
          <h4 class="font-bold mb-3">ğŸ§¼ Ù…Ø±Ø§Ù‚Ø¨Ø© ØºØ³Ù„ Ø§Ù„ÙŠØ¯ÙŠÙ†</h4>
          <form id="ipcHandHygieneForm" class="grid grid-cols-1 md:grid-cols-2 gap-4">
            <div>
              <label class="block text-sm font-semibold mb-1">Ø§Ù„ØªØ§Ø±ÙŠØ® *</label>
              <input type="date" name="hh_date" required class="w-full border rounded-lg px-3 py-2">
            </div>
            <div>
              <label class="block text-sm font-semibold mb-1">Ø§Ù„Ù‚Ø³Ù… *</label>
              <select name="hh_dept" required class="w-full border rounded-lg px-3 py-2">
                <option value="">Ø§Ø®ØªØ± Ø§Ù„Ù‚Ø³Ù…</option>
                <option value="Ø§Ù„Ø¹ÙŠØ§Ø¯Ø§Øª">Ø§Ù„Ø¹ÙŠØ§Ø¯Ø§Øª</option>
                <option value="Ø§Ù„Ø·ÙˆØ§Ø±Ø¦">Ø§Ù„Ø·ÙˆØ§Ø±Ø¦</option>
                <option value="Ø§Ù„Ù…Ø®ØªØ¨Ø±">Ø§Ù„Ù…Ø®ØªØ¨Ø±</option>
                <option value="Ø§Ù„Ø£Ø´Ø¹Ø©">Ø§Ù„Ø£Ø´Ø¹Ø©</option>
              </select>
            </div>
            <div>
              <label class="block text-sm font-semibold mb-1">Ø¹Ø¯Ø¯ Ù…Ø±Ø§Øª Ø§Ù„Ø§Ù„ØªØ²Ø§Ù… *</label>
              <input type="number" name="hh_compliant" required class="w-full border rounded-lg px-3 py-2" placeholder="0">
            </div>
            <div>
              <label class="block text-sm font-semibold mb-1">Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„ÙØ±Øµ *</label>
              <input type="number" name="hh_opportunities" required class="w-full border rounded-lg px-3 py-2" placeholder="0">
            </div>
            <div class="md:col-span-2 flex items-center gap-3 pt-2">
              <button type="submit" class="px-4 py-2 rounded-lg bg-[var(--brand1)] text-white hover:bg-[var(--brand2)]">Ø­ÙØ¸ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª</button>
              <span id="ipcHandHygieneMsg" class="text-sm"></span>
            </div>
          </form>
        </div>
        
        <div class="border rounded-xl p-4 bg-white">
          <h4 class="font-bold mb-3">ğŸ¦  ØªØ³Ø¬ÙŠÙ„ Ø­Ø§Ù„Ø© Ø¹Ø¯ÙˆÙ‰</h4>
          <form id="ipcInfectionForm" class="grid grid-cols-1 md:grid-cols-2 gap-4">
            <div>
              <label class="block text-sm font-semibold mb-1">ØªØ§Ø±ÙŠØ® Ø§Ù„ØªØ´Ø®ÙŠØµ *</label>
              <input type="date" name="inf_date" required class="w-full border rounded-lg px-3 py-2">
            </div>
            <div>
              <label class="block text-sm font-semibold mb-1">Ù†ÙˆØ¹ Ø§Ù„Ø¹Ø¯ÙˆÙ‰ *</label>
              <select name="inf_type" required class="w-full border rounded-lg px-3 py-2">
                <option value="">Ø§Ø®ØªØ± Ø§Ù„Ù†ÙˆØ¹</option>
                <option value="Ø¹Ø¯ÙˆÙ‰ Ù…Ø¬Ø±Ù‰ Ø§Ù„Ø¯Ù…">Ø¹Ø¯ÙˆÙ‰ Ù…Ø¬Ø±Ù‰ Ø§Ù„Ø¯Ù…</option>
                <option value="Ø¹Ø¯ÙˆÙ‰ Ø§Ù„Ù…Ø³Ø§Ù„Ùƒ Ø§Ù„Ø¨ÙˆÙ„ÙŠØ©">Ø¹Ø¯ÙˆÙ‰ Ø§Ù„Ù…Ø³Ø§Ù„Ùƒ Ø§Ù„Ø¨ÙˆÙ„ÙŠØ©</option>
                <option value="Ø¹Ø¯ÙˆÙ‰ Ù…ÙˆÙ‚Ø¹ Ø§Ù„Ø¬Ø±Ø§Ø­Ø©">Ø¹Ø¯ÙˆÙ‰ Ù…ÙˆÙ‚Ø¹ Ø§Ù„Ø¬Ø±Ø§Ø­Ø©</option>
                <option value="Ø§Ù„ØªÙ‡Ø§Ø¨ Ø±Ø¦ÙˆÙŠ">Ø§Ù„ØªÙ‡Ø§Ø¨ Ø±Ø¦ÙˆÙŠ</option>
                <option value="Ø¢Ø®Ø±">Ø¢Ø®Ø±</option>
              </select>
            </div>
            <div>
              <label class="block text-sm font-semibold mb-1">Ø§Ù„Ù‚Ø³Ù… *</label>
              <select name="inf_dept" required class="w-full border rounded-lg px-3 py-2">
                <option value="">Ø§Ø®ØªØ± Ø§Ù„Ù‚Ø³Ù…</option>
                <option value="Ø§Ù„Ø¹ÙŠØ§Ø¯Ø§Øª">Ø§Ù„Ø¹ÙŠØ§Ø¯Ø§Øª</option>
                <option value="Ø§Ù„Ø·ÙˆØ§Ø±Ø¦">Ø§Ù„Ø·ÙˆØ§Ø±Ø¦</option>
                <option value="Ø§Ù„Ù…Ø®ØªØ¨Ø±">Ø§Ù„Ù…Ø®ØªØ¨Ø±</option>
                <option value="Ø§Ù„Ø£Ø´Ø¹Ø©">Ø§Ù„Ø£Ø´Ø¹Ø©</option>
              </select>
            </div>
            <div>
              <label class="block text-sm font-semibold mb-1">Ø§Ù„Ù…Ø³Ø¬Ù„ *</label>
              <input name="inf_reporter" required class="w-full border rounded-lg px-3 py-2" placeholder="Ø§Ø³Ù… Ø§Ù„Ù…Ø³Ø¬Ù„">
            </div>
            <div class="md:col-span-2 flex items-center gap-3 pt-2">
              <button type="submit" class="px-4 py-2 rounded-lg bg-[var(--brand1)] text-white hover:bg-[var(--brand2)]">Ø­ÙØ¸ Ø§Ù„ØªÙ‚Ø±ÙŠØ±</button>
              <span id="ipcInfectionMsg" class="text-sm"></span>
            </div>
          </form>
        </div>
      </div>
    `;
    
    // Ù…Ø¹Ø§Ù„Ø¬Ø© Ù†Ù…Ø§Ø°Ø¬ IPC
    const handHygieneForm = document.getElementById('ipcHandHygieneForm');
    if (handHygieneForm) {
      handHygieneForm.addEventListener('submit', function(e) {
        e.preventDefault();
        const msg = document.getElementById('ipcHandHygieneMsg');
        msg.textContent = 'Ø¬Ø§Ø±Ù Ø§Ù„Ø­ÙØ¸...';
        msg.className = 'text-sm text-blue-600';
        
        setTimeout(() => {
          msg.textContent = 'âœ… ØªÙ… Ø­ÙØ¸ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª';
          msg.className = 'text-sm text-green-600';
          handHygieneForm.reset();
        }, 1000);
      });
    }
    
    const infectionForm = document.getElementById('ipcInfectionForm');
    if (infectionForm) {
      infectionForm.addEventListener('submit', function(e) {
        e.preventDefault();
        const msg = document.getElementById('ipcInfectionMsg');
        msg.textContent = 'Ø¬Ø§Ø±Ù Ø§Ù„Ø­ÙØ¸...';
        msg.className = 'text-sm text-blue-600';
        
        setTimeout(() => {
          msg.textContent = 'âœ… ØªÙ… Ø­ÙØ¸ Ø§Ù„ØªÙ‚Ø±ÙŠØ±';
          msg.className = 'text-sm text-green-600';
          infectionForm.reset();
        }, 1000);
      });
    }
  }

  function renderIpcNeeds(container) {
    // ØªÙ†ÙÙŠØ° Ù…ØªØ·Ù„Ø¨Ø§Øª Ø³Ø¨Ø§Ù‡ÙŠ Ù„Ù…ÙƒØ§ÙØ­Ø© Ø§Ù„Ø¹Ø¯ÙˆÙ‰
    container.innerHTML = `
      <div class="grid-cards">
        <div class="p-4 rounded-xl border bg-white shadow-sm">
          <label class="flex items-start gap-3 cursor-pointer">
            <input type="checkbox" class="mt-1 h-5 w-5">
            <span class="font-semibold">Ù…ÙŠØ«Ø§Ù‚ Ù„Ø¬Ù†Ø© Ù…ÙƒØ§ÙØ­Ø© Ø§Ù„Ø¹Ø¯ÙˆÙ‰ Ù…Ø¹ØªÙ…Ø¯</span>
          </label>
          <div class="text-xs text-red-600 mt-1">Ù…ØªØ·Ù„Ø¨ Ø¥Ù„Ø²Ø§Ù…ÙŠ</div>
        </div>
        <div class="p-4 rounded-xl border bg-white shadow-sm">
          <label class="flex items-start gap-3 cursor-pointer">
            <input type="checkbox" class="mt-1 h-5 w-5">
            <span class="font-semibold">Ø³ÙŠØ§Ø³Ø© Ø¨Ø±Ù†Ø§Ù…Ø¬ Ù…ÙƒØ§ÙØ­Ø© Ø§Ù„Ø¹Ø¯ÙˆÙ‰ Ù…Ø¹ØªÙ…Ø¯Ø©</span>
          </label>
          <div class="text-xs text-red-600 mt-1">Ù…ØªØ·Ù„Ø¨ Ø¥Ù„Ø²Ø§Ù…ÙŠ</div>
        </div>
        <div class="p-4 rounded-xl border bg-white shadow-sm">
          <label class="flex items-start gap-3 cursor-pointer">
            <input type="checkbox" class="mt-1 h-5 w-5">
            <span class="font-semibold">Ø³ÙŠØ§Ø³Ø© ØºØ³Ù„ Ø§Ù„ÙŠØ¯ÙŠÙ† Ù…Ø¹ØªÙ…Ø¯Ø©</span>
          </label>
          <div class="text-xs text-red-600 mt-1">Ù…ØªØ·Ù„Ø¨ Ø¥Ù„Ø²Ø§Ù…ÙŠ</div>
        </div>
        <div class="p-4 rounded-xl border bg-white shadow-sm">
          <label class="flex items-start gap-3 cursor-pointer">
            <input type="checkbox" class="mt-1 h-5 w-5">
            <span class="font-semibold">Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª Ø§Ù„ØªØ¹Ø±Ø¶ Ø§Ù„ÙˆØ®Ø²ÙŠ Ù…Ø¹ØªÙ…Ø¯Ø©</span>
          </label>
        </div>
        <div class="p-4 rounded-xl border bg-white shadow-sm">
          <label class="flex items-start gap-3 cursor-pointer">
            <input type="checkbox" class="mt-1 h-5 w-5">
            <span class="font-semibold">Ù†Ø¸Ø§Ù… Ù…Ø±Ø§Ù‚Ø¨Ø© Ø§Ù„Ø¹Ø¯ÙˆÙ‰ Ù…ÙØ¹Ù„</span>
          </label>
        </div>
        <div class="p-4 rounded-xl border bg-white shadow-sm">
          <label class="flex items-start gap-3 cursor-pointer">
            <input type="checkbox" class="mt-1 h-5 w-5">
            <span class="font-semibold">Ø¨Ø±Ù†Ø§Ù…Ø¬ ØªØ¯Ø±ÙŠØ¨ IPC Ù…Ù†ÙØ°</span>
          </label>
        </div>
      </div>
      <div class="pt-4 flex gap-3">
        <button class="px-4 py-2 rounded-lg bg-[var(--brand1)] text-white hover:bg-[var(--brand2)]" onclick="alert('âœ… ÙØ­Øµ Ù…ØªØ·Ù„Ø¨Ø§Øª IPC: Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù‚Ù‚...')">ØªØ­Ù‚Ù‘Ù‚ Ù…Ù† Ø§Ù„Ø§ÙƒØªÙ…Ø§Ù„</button>
        <button class="px-4 py-2 rounded-lg border hover:bg-gray-50" onclick="alert('ğŸ“‹ ØªÙ‚Ø±ÙŠØ± Ø¬Ø§Ù‡Ø²ÙŠØ© IPC: 6/6 Ù…ØªØ·Ù„Ø¨Ø§Øª Ù…ÙƒØªÙ…Ù„Ø©')">Ø¥Ù†Ø´Ø§Ø¡ ØªÙ‚Ø±ÙŠØ± Ø§Ù„Ø¬Ø§Ù‡Ø²ÙŠØ©</button>
      </div>
    `;
  }

  // ====== Ø¯ÙˆØ§Ù„ Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø£Ù…Ø§Ù† Ù„Ù€ IPC ======
  function ipcShowSecurity() {
    const isOn = SecureStore.isOn();
    const passphrase = prompt(
      isOn ? 'Ø£Ø¯Ø®Ù„ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ø§Ù„Ø­Ø§Ù„ÙŠØ© Ù„Ø¥ÙŠÙ‚Ø§Ù Ø§Ù„Ø­Ù…Ø§ÙŠØ©:' : 'ØªØ¹ÙŠÙŠÙ† ÙƒÙ„Ù…Ø© Ù…Ø±ÙˆØ± Ù„Ø­Ù…Ø§ÙŠØ© Ø¨ÙŠØ§Ù†Ø§Øª IPC (Ø§Ø®ØªÙŠØ§Ø±ÙŠ):'
    );
    if (passphrase === null) return;
    
    if (isOn) {
      SecureStore.clearPassphrase();
      alert('ğŸ”“ ØªÙ… Ø¥ÙŠÙ‚Ø§Ù Ø§Ù„Ø­Ù…Ø§ÙŠØ©.');
    } else {
      if (passphrase.length < 4) {
        alert('ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± ÙŠØ¬Ø¨ Ø£Ù† ØªÙƒÙˆÙ† 4 Ø£Ø­Ø±Ù Ø¹Ù„Ù‰ Ø§Ù„Ø£Ù‚Ù„.');
        return;
      }
      SecureStore.setPassphrase(passphrase).then(success => {
        if (success) alert('ğŸ”’ ØªÙ… ØªÙØ¹ÙŠÙ„ Ø§Ù„Ø­Ù…Ø§ÙŠØ©.');
      });
    }
  }

  function ipcExportAll() {
    // ÙÙŠ Ø¨ÙŠØ¦Ø© Ø­Ù‚ÙŠÙ‚ÙŠØ©ØŒ Ø³ÙŠØªÙ… Ø¬Ù…Ø¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ù† localStorage ÙˆØªØµØ¯ÙŠØ±Ù‡Ø§
    alert('â¬‡ï¸ ÙÙŠ Ø¨ÙŠØ¦Ø© Ø­Ù‚ÙŠÙ‚ÙŠØ©ØŒ Ø³ÙŠØªÙ… ØªØµØ¯ÙŠØ± Ø¬Ù…ÙŠØ¹ Ø¨ÙŠØ§Ù†Ø§Øª IPC Ø¨ØªÙ†Ø³ÙŠÙ‚ JSON.');
  }

  function ipcImportAll(file) {
    // ÙÙŠ Ø¨ÙŠØ¦Ø© Ø­Ù‚ÙŠÙ‚ÙŠØ©ØŒ Ø³ÙŠØªÙ… Ø§Ø³ØªÙŠØ±Ø§Ø¯ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ù† Ù…Ù„Ù JSON
    alert('â¬†ï¸ ÙÙŠ Ø¨ÙŠØ¦Ø© Ø­Ù‚ÙŠÙ‚ÙŠØ©ØŒ Ø³ÙŠØªÙ… Ø§Ø³ØªÙŠØ±Ø§Ø¯ Ø¨ÙŠØ§Ù†Ø§Øª IPC Ù…Ù† Ù…Ù„Ù JSON.');
  }
// ====== Ù…ÙƒØªØ¨Ø© ÙˆØ«Ø§Ø¦Ù‚ FMS ======
const FMS_DOCS_LIBRARY = [
  { code:'LOG-FMS-2025-005', name:'Ø³Ø¬Ù„ Ø§Ù„ØµÙŠØ§Ù†Ø© Ø§Ù„ÙˆÙ‚Ø§Ø¦ÙŠØ©', category:'LOG', url:'https://drive.google.com/file/d/10QjYYiAppgrOJpb6F2GxxwmRgRt2ooNOClo0etgzWpw/preview' },
  { code:'PLN-FMS-2025-018', name:'Ø®Ø·Ø© Ø§Ù„Ø£Ù…Ù† Ø§Ù„Ù…Ø§Ø¯ÙŠ Ù„Ù„Ù…Ø±Ø§ÙÙ‚', category:'PLN', url:'https://drive.google.com/file/d/1aF0KTinNcF3gMIotj_byzrAkubX6Y30nZWmVuFM7BcA/preview' },
  { code:'LOG-FMS-2025-014', name:'Ø³Ø¬Ù„ Ø²ÙŠØ§Ø±Ø§Øª Ø§Ù„Ø¯ÙØ§Ø¹ Ø§Ù„Ù…Ø¯Ù†ÙŠ ÙˆØ§Ù„Ø¬Ù‡Ø§Øª Ø§Ù„ØªÙ†Ø¸ÙŠÙ…ÙŠØ©', category:'LOG', url:'https://drive.google.com/file/d/1VMNxaSlkz_LX4OqktVHQsj1IT-GA6Y3eUnZa2rgegMA/preview' },
  { code:'POL-FMS-2025-015', name:'Ø³ÙŠØ§Ø³Ø© Ù…Ø±Ø§Ù‚Ø¨Ø© Ø¬ÙˆØ¯Ø© Ø§Ù„Ù‡ÙˆØ§Ø¡ ÙˆØ§Ù„ØªÙ‡ÙˆÙŠØ©', category:'POL', url:'https://drive.google.com/file/d/18caApXqHeQSZdBFSvgyIKICX0qMSsN7UuRxz3u7R10o/preview' },
  { code:'CHK-FMS-2025-003', name:'Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„ØªØ­Ù‚Ù‚ Ø§Ù„Ø¯ÙˆØ±ÙŠØ© Ù„Ù„Ø³Ù„Ø§Ù…Ø©', category:'CHK', url:'https://drive.google.com/file/d/1C07oXDzj_Vfok81wQUde3P-ExeXhJh6LDwOS35jTDpk/preview' },
  { code:'CHK-FMS-2025-009', name:'Ø³Ø¬Ù„ Ø¬ÙˆÙ„Ø§Øª Ù„Ø¬Ù†Ø© Ø§Ù„Ø³Ù„Ø§Ù…Ø©', category:'CHK', url:'https://drive.google.com/file/d/1fKMIzns80N9IeSU18WudplOpA8DmbL4zmq72PRUmfZw/preview' },
  { code:'PLN-FMS-2025-012', name:'Ø®Ø·Ø© Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø·Ø§Ù‚Ø© ÙˆØ§Ù„Ù…ÙŠØ§Ù‡', category:'PLN', url:'https://drive.google.com/file/d/1b8oP_LOE_k7A0qXqhhVKWXF9zAvJMuSUOLFc1rBoflA/preview' },
  { code:'SOP-FMS-2025-002', name:'Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª Ø§Ù„ØªØ´ØºÙŠÙ„ Ø§Ù„Ù‚ÙŠØ§Ø³ÙŠØ© Ù„Ù„Ø¬ÙˆÙ„Ø§Øª ÙˆÙØ­Øµ Ø§Ù„Ø£Ù†Ø¸Ù…Ø©', category:'SOP', url:'https://drive.google.com/file/d/1mrKI8YTjSphAk-noRO8sp9GhYYLzR1FCBti2EDyDZOU/preview' },
  { code:'FRM-FMS-2025-011', name:'Ù†Ù…ÙˆØ°Ø¬ ØªÙ‚ÙŠÙŠÙ… Ø§Ù„Ù…Ø®Ø§Ø·Ø± Ø§Ù„Ø¨ÙŠØ¦ÙŠØ© ÙˆØ§Ù„Ù…Ø§Ø¯ÙŠØ©', category:'FRM', url:'https://drive.google.com/file/d/15uefBzxMrX33-lBCHP3sZb_OZqoQ4hyiymQRnBrN_jo/preview' },
  { code:'FRM-FMS-2025-017', name:'Ù†Ù…ÙˆØ°Ø¬ Ù…ØªØ§Ø¨Ø¹Ø© ØªÙ†ÙÙŠØ° Ø§Ù„ØªÙˆØµÙŠØ§Øª', category:'FRM', url:'https://drive.google.com/file/d/1Z7Bof_s4Dchx3G5tPzHAC77M4EDVGaxKVRlvJG_wMNY/preview' },
  { code:'LOG-FMS-2025-006', name:'Ø³Ø¬Ù„ Ø§Ù„Ø­ÙˆØ§Ø¯Ø« ÙˆØ§Ù„Ù…Ù„Ø§Ø­Ø¸Ø§Øª', category:'LOG', url:'https://drive.google.com/file/d/12D_ESZYNwjEfKZM6C0yzswbsccugSZZBOcMdHELd3TY/preview' },
  { code:'REP-FMS-2025-013', name:'ØªÙ‚Ø±ÙŠØ± Ø§Ù„Ø­ÙˆØ§Ø¯Ø« Ø§Ù„Ø·Ø§Ø±Ø¦Ø©', category:'REP', url:'https://drive.google.com/file/d/126D1IVGQpoCUxXZeNlob1fBD0LkXeNQdITDzL5OLXn0/preview' },
  { code:'PLN-FMS-2025-016', name:'Ø®Ø·Ø© Ø§Ù„ØµÙŠØ§Ù†Ø© Ø§Ù„Ø·Ø§Ø±Ø¦Ø©', category:'PLN', url:'https://drive.google.com/file/d/1tQYPW6VHtr1liM7qMoPGgzDxopw9njYivS7WyKxokZw/preview' },
  { code:'POL-FMS-2025-001', name:'Ø³ÙŠØ§Ø³Ø© Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø³Ù„Ø§Ù…Ø© ÙˆØ§Ù„Ù…Ø±Ø§ÙÙ‚', category:'POL', url:'https://drive.google.com/file/d/1YS1Jk5FgwJoY5in71yUQ1oIjE4JEsaecMGWTt00aQ0o/preview' },
  { code:'REP-FMS-2025-008', name:'ØªÙ‚Ø±ÙŠØ± ÙØ­Øµ Ø§Ù„Ø·ÙØ§ÙŠØ§Øª ÙˆØ£Ù†Ø¸Ù…Ø© Ø§Ù„Ø¥Ù†Ø°Ø§Ø±', category:'REP', url:'https://drive.google.com/file/d/1Doz1piFf3dnYXKYtWoV4ExjXG_gmgRLVXkP7ej0sw9E/preview' },
  { code:'TRN-FMS-2025-010', name:'Ø®Ø·Ø© ØªØ¯Ø±ÙŠØ¨ Ø§Ù„Ø£Ù…Ù† ÙˆØ§Ù„Ø³Ù„Ø§Ù…Ø©', category:'TRN', url:'https://drive.google.com/file/d/1IwnBiZp11BjIDQLUtT5Ntr7kEhv3jmssvF5Vj6D7yRk/preview' },
  { code:'DEC-FMS-2025-001', name:'Ù‚Ø±Ø§Ø± ØªØ´ÙƒÙŠÙ„ Ù„Ø¬Ù†Ø© Ø§Ù„Ø³Ù„Ø§Ù…Ø©', category:'DEC', url:'https://drive.google.com/file/d/1KJcIqUbXfHIH0qt1UwoJ0Dohc_7n-745rhx90shaqNg/preview' },
  { code:'PLN-FMS-2025-007', name:'Ø®Ø·Ø© Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù†ÙØ§ÙŠØ§Øª', category:'PLN', url:'https://drive.google.com/file/d/1iSoFBh8u4uTHzDJECxyjlEMeWqaScZwezgOXygEVdso/preview' },
  { code:'PLN-FMS-2025-004', name:'Ø®Ø·Ø© Ø§Ù„Ø·ÙˆØ§Ø±Ø¦ ÙˆØ§Ù„Ø¥Ø®Ù„Ø§Ø¡', category:'PLN', url:'https://drive.google.com/file/d/1rPIuA5g52gQSroaaxznZ_SQNOj1TjEDuZ9DF0j3jvf4/preview' },
  { code:'FMS_Docs_2025_endorsed', name:'ÙÙ‡Ø±Ø³ ÙˆØ«Ø§Ø¦Ù‚ FMS Ø§Ù„Ù…Ø¹ØªÙ…Ø¯Ø© 2025', category:'INDEX', url:'https://drive.google.com/file/d/1fTJG9dYRDsgBo0UFSKWlOIkVLkKCY0zO/preview' }
];

const FMS_CATEGORY_NAMES = {
  POL: 'Ø§Ù„Ø³ÙŠØ§Ø³Ø§Øª',
  SOP: 'Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª Ø§Ù„ØªØ´ØºÙŠÙ„', 
  DEC: 'Ø§Ù„Ù‚Ø±Ø§Ø±Ø§Øª',
  PLN: 'Ø§Ù„Ø®Ø·Ø·',
  TRN: 'Ø§Ù„ØªØ¯Ø±ÙŠØ¨',
  LOG: 'Ø§Ù„Ø³Ø¬Ù„Ø§Øª',
  CHK: 'Ù‚ÙˆØ§Ø¦Ù… Ø§Ù„ØªØ­Ù‚Ù‚',
  FRM: 'Ø§Ù„Ù†Ù…Ø§Ø°Ø¬',
  REP: 'Ø§Ù„ØªÙ‚Ø§Ø±ÙŠØ±',
  INDEX: 'Ø§Ù„ÙÙ‡Ø±Ø³'
};

// ====== Ø¯ÙˆØ§Ù„ FMS Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ© ======
function switchFmsTab(tab) {
  // ØªØ­Ø¯ÙŠØ« Ø£Ø²Ø±Ø§Ø± Ø§Ù„ØªØ¨ÙˆÙŠØ¨
  document.querySelectorAll('[data-fms-tab]').forEach(button => {
    if (button.getAttribute('data-fms-tab') === tab) {
      button.classList.add('bg-[var(--brand1)]', 'text-white');
      button.classList.remove('bg-gray-100');
    } else {
      button.classList.remove('bg-[var(--brand1)]', 'text-white');
      button.classList.add('bg-gray-100');
    }
  });
  
  const container = document.getElementById('fmsTabContent');
  container.innerHTML = '';
  
  if (tab === 'library') {
    renderFmsLibrary(container);
  } else if (tab === 'rounds') {
    renderFmsRounds(container);
  } else if (tab === 'needs') {
    renderFmsNeeds(container);
  }
}

function renderFmsLibrary(container) {
  // Ø¹Ù†Ø§ØµØ± Ø§Ù„ØªØ­ÙƒÙ…
  const categories = [...new Set(FMS_DOCS_LIBRARY.map(doc => doc.category))];
  const controls = document.createElement('div');
  controls.className = 'flex flex-wrap items-center gap-2 mb-4';
  controls.innerHTML = `
    <div class="flex flex-wrap gap-2">
      <button data-fms-filter="ALL" class="px-3 py-1 rounded-full bg-[var(--brand1)] text-white text-sm">Ø§Ù„ÙƒÙ„</button>
      ${categories.map(cat => 
        `<button data-fms-filter="${cat}" class="px-3 py-1 rounded-full bg-gray-200 hover:bg-gray-300 text-sm">${FMS_CATEGORY_NAMES[cat] || cat}</button>`
      ).join('')}
    </div>
    <div class="ml-auto w-full md:w-64">
      <input id="fmsSearch" type="text" placeholder="Ø§Ø¨Ø­Ø« Ø¨Ø§Ù„Ø±Ù…Ø² Ø£Ùˆ Ø§Ù„Ø¹Ù†ÙˆØ§Ù†..." class="w-full border rounded-lg px-3 py-2">
    </div>
  `;
  
  const grid = document.createElement('div');
  grid.className = 'grid-cards';
  grid.id = 'fmsGrid';
  
  container.appendChild(controls);
  container.appendChild(grid);
  
  // Ø¯Ø§Ù„Ø© Ø§Ù„ØªØµÙÙŠØ© ÙˆØ§Ù„Ø¹Ø±Ø¶
  function renderFilteredDocs(filter = 'ALL', query = '') {
    grid.innerHTML = '';
    const searchQuery = query.toLowerCase();
    
    const filteredDocs = FMS_DOCS_LIBRARY.filter(doc => {
      const matchesFilter = filter === 'ALL' || doc.category === filter;
      const matchesQuery = !searchQuery || 
        doc.code.toLowerCase().includes(searchQuery) || 
        doc.name.toLowerCase().includes(searchQuery);
      return matchesFilter && matchesQuery;
    });
    
    filteredDocs.forEach(doc => {
      const card = document.createElement('div');
      card.className = 'p-4 rounded-xl border bg-white shadow-sm hover:shadow-md transition flex flex-col';
      card.innerHTML = `
        <div class="text-xs text-gray-500 mb-1">${FMS_CATEGORY_NAMES[doc.category] || doc.category}</div>
        <div class="font-extrabold text-[var(--brand1)]">${doc.code}</div>
        <div class="text-gray-800 mt-1 flex-1">${doc.name}</div>
        <div class="mt-3 flex gap-2">
          <button class="px-3 py-2 text-sm text-white rounded-lg bg-[var(--brand1)] hover:bg-[var(--brand2)]" 
                  onclick="openDocModal('${doc.code}: ${doc.name}', '${doc.url}')">
            <i class="fas fa-eye ml-1"></i> Ø¹Ø±Ø¶
          </button>
          <a class="px-3 py-2 text-sm rounded-lg border hover:bg-gray-50" 
             target="_blank" href="${doc.url.replace('/preview', '/view')}">
            <i class="fas fa-up-right-from-square ml-1"></i> ÙØªØ­ ÙÙŠ ØªØ¨ÙˆÙŠØ¨
          </a>
        </div>
      `;
      grid.appendChild(card);
    });
  }
  
  // Ø¥Ø¶Ø§ÙØ© Ù…Ø³ØªÙ…Ø¹ÙŠ Ø§Ù„Ø£Ø­Ø¯Ø§Ø«
  controls.querySelectorAll('button[data-fms-filter]').forEach(button => {
    button.addEventListener('click', () => {
      controls.querySelectorAll('button[data-fms-filter]').forEach(btn => {
        btn.classList.remove('bg-[var(--brand1)]', 'text-white');
      });
      button.classList.add('bg-[var(--brand1)]', 'text-white');
      renderFilteredDocs(button.getAttribute('data-fms-filter'), document.getElementById('fmsSearch').value);
    });
  });
  
  document.getElementById('fmsSearch').addEventListener('input', (e) => {
    const activeFilter = controls.querySelector('button[data-fms-filter].bg-[var(--brand1)]') || 
                        { getAttribute: () => 'ALL' };
    renderFilteredDocs(activeFilter.getAttribute('data-fms-filter'), e.target.value);
  });
  
  // Ø§Ù„ØªÙ‡ÙŠØ¦Ø© Ø§Ù„Ø£ÙˆÙ„ÙŠØ©
  renderFilteredDocs('ALL', '');
}

function renderFmsRounds(container) {
  const wrapper = document.createElement('div');
  wrapper.className = 'space-y-6';
  
  // Ù†Ù…ÙˆØ°Ø¬ Ø¬ÙˆÙ„Ø© Ø§Ù„Ø³Ù„Ø§Ù…Ø© Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ
  const safetyRoundForm = document.createElement('div');
  safetyRoundForm.className = 'border rounded-xl p-4 bg-white';
  safetyRoundForm.innerHTML = `
    <h3 class="text-xl font-bold text-[var(--brand1)] mb-4">ğŸ“ Ù†Ù…ÙˆØ°Ø¬ Ø¬ÙˆÙ„Ø© Ø§Ù„Ø³Ù„Ø§Ù…Ø© Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ</h3>
    <form id="fmsSafetyRoundForm" class="grid grid-cols-1 md:grid-cols-2 gap-4">
      <div>
        <label class="block text-sm font-semibold mb-1">ØªØ§Ø±ÙŠØ® Ø§Ù„Ø¬ÙˆÙ„Ø© *</label>
        <input type="date" name="round_date" required class="w-full border rounded-lg px-3 py-2">
      </div>
      <div>
        <label class="block text-sm font-semibold mb-1">ÙˆÙ‚Øª Ø§Ù„Ø¬ÙˆÙ„Ø© *</label>
        <input type="time" name="round_time" required class="w-full border rounded-lg px-3 py-2">
      </div>
      <div>
        <label class="block text-sm font-semibold mb-1">Ø§Ù„Ù…Ø³Ø¤ÙˆÙ„ Ø¹Ù† Ø§Ù„Ø¬ÙˆÙ„Ø© *</label>
        <input name="round_responsible" required class="w-full border rounded-lg px-3 py-2" placeholder="Ø§Ø³Ù… Ø§Ù„Ù…Ø³Ø¤ÙˆÙ„">
      </div>
      <div>
        <label class="block text-sm font-semibold mb-1">Ø§Ù„Ù…Ù†Ø·Ù‚Ø© Ø§Ù„Ù…ÙØ­ÙˆØµØ© *</label>
        <select name="round_area" required class="w-full border rounded-lg px-3 py-2">
          <option value="">Ø§Ø®ØªØ± Ø§Ù„Ù…Ù†Ø·Ù‚Ø©</option>
          <option value="Ø§Ù„Ø¹ÙŠØ§Ø¯Ø§Øª">Ø§Ù„Ø¹ÙŠØ§Ø¯Ø§Øª</option>
          <option value="Ø§Ù„Ù…Ø®ØªØ¨Ø±">Ø§Ù„Ù…Ø®ØªØ¨Ø±</option>
          <option value="Ø§Ù„Ø£Ø´Ø¹Ø©">Ø§Ù„Ø£Ø´Ø¹Ø©</option>
          <option value="Ø§Ù„ØµÙŠØ¯Ù„ÙŠØ©">Ø§Ù„ØµÙŠØ¯Ù„ÙŠØ©</option>
          <option value="Ø§Ù„Ø·ÙˆØ§Ø±Ø¦">Ø§Ù„Ø·ÙˆØ§Ø±Ø¦</option>
          <option value="Ø§Ù„Ù…ÙƒØ§ØªØ¨ Ø§Ù„Ø¥Ø¯Ø§Ø±ÙŠØ©">Ø§Ù„Ù…ÙƒØ§ØªØ¨ Ø§Ù„Ø¥Ø¯Ø§Ø±ÙŠØ©</option>
          <option value="Ø§Ù„Ù…Ù…Ø±Ø§Øª ÙˆØ§Ù„Ù…Ø¯Ø§Ø®Ù„">Ø§Ù„Ù…Ù…Ø±Ø§Øª ÙˆØ§Ù„Ù…Ø¯Ø§Ø®Ù„</option>
        </select>
      </div>
      <div class="md:col-span-2">
        <label class="block text-sm font-semibold mb-1">Ø§Ù„Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ø§Ù„Ø¥ÙŠØ¬Ø§Ø¨ÙŠØ©</label>
        <textarea name="positive_notes" rows="2" class="w-full border rounded-lg px-3 py-2" placeholder="Ø§Ù„Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ø§Ù„Ø¥ÙŠØ¬Ø§Ø¨ÙŠØ©..."></textarea>
      </div>
      <div class="md:col-span-2">
        <label class="block text-sm font-semibold mb-1">Ø§Ù„Ù…Ø®Ø§Ø·Ø± / Ø§Ù„Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ø§Ù„Ø³Ù„Ø¨ÙŠØ©</label>
        <textarea name="negative_notes" rows="2" class="w-full border rounded-lg px-3 py-2" placeholder="Ø§Ù„Ù…Ø®Ø§Ø·Ø± ÙˆØ§Ù„Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ø§Ù„Ø³Ù„Ø¨ÙŠØ©..."></textarea>
      </div>
      <div class="md:col-span-2">
        <label class="block text-sm font-semibold mb-1">Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª Ø§Ù„Ù…ØªØ®Ø°Ø©</label>
        <textarea name="actions_taken" rows="2" class="w-full border rounded-lg px-3 py-2" placeholder="Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª Ø§Ù„Ù…ØªØ®Ø°Ø©..."></textarea>
      </div>
      <div>
        <label class="block text-sm font-semibold mb-1">ØªØ§Ø±ÙŠØ® Ø§Ù„Ù…ØªØ§Ø¨Ø¹Ø©</label>
        <input type="date" name="followup_date" class="w-full border rounded-lg px-3 py-2">
      </div>
      <div>
        <label class="block text-sm font-semibold mb-1">Ù…Ø³Ø¤ÙˆÙ„ Ø§Ù„Ù…ØªØ§Ø¨Ø¹Ø©</label>
        <input name="followup_responsible" class="w-full border rounded-lg px-3 py-2" placeholder="Ø§Ø³Ù… Ù…Ø³Ø¤ÙˆÙ„ Ø§Ù„Ù…ØªØ§Ø¨Ø¹Ø©">
      </div>
      <div class="md:col-span-2 flex items-center gap-3 pt-2">
        <button type="submit" class="px-4 py-2 rounded-lg bg-[var(--brand1)] text-white hover:bg-[var(--brand2)]">Ø­ÙØ¸ Ø§Ù„Ø¬ÙˆÙ„Ø©</button>
        <span id="fmsRoundMsg" class="text-sm"></span>
      </div>
    </form>
  `;
  
  // Ù†Ù…ÙˆØ°Ø¬ Ø§Ù„ØµÙŠØ§Ù†Ø© Ø§Ù„ÙˆÙ‚Ø§Ø¦ÙŠØ©
  const maintenanceForm = document.createElement('div');
  maintenanceForm.className = 'border rounded-xl p-4 bg-white';
  maintenanceForm.innerHTML = `
    <h3 class="text-xl font-bold text-[var(--brand1)] mb-4">ğŸ”§ Ù†Ù…ÙˆØ°Ø¬ Ø§Ù„ØµÙŠØ§Ù†Ø© Ø§Ù„ÙˆÙ‚Ø§Ø¦ÙŠØ©</h3>
    <form id="fmsMaintenanceForm" class="grid grid-cols-1 md:grid-cols-2 gap-4">
      <div>
        <label class="block text-sm font-semibold mb-1">ØªØ§Ø±ÙŠØ® Ø§Ù„ØµÙŠØ§Ù†Ø© *</label>
        <input type="date" name="maintenance_date" required class="w-full border rounded-lg px-3 py-2">
      </div>
      <div>
        <label class="block text-sm font-semibold mb-1">Ù†ÙˆØ¹ Ø§Ù„Ø¬Ù‡Ø§Ø² / Ø§Ù„Ù†Ø¸Ø§Ù… *</label>
        <select name="equipment_type" required class="w-full border rounded-lg px-3 py-2">
          <option value="">Ø§Ø®ØªØ± Ø§Ù„Ù†ÙˆØ¹</option>
          <option value="Ù†Ø¸Ø§Ù… Ø§Ù„ØªÙƒÙŠÙŠÙ">Ù†Ø¸Ø§Ù… Ø§Ù„ØªÙƒÙŠÙŠÙ</option>
          <option value="Ù†Ø¸Ø§Ù… Ø§Ù„ÙƒÙ‡Ø±Ø¨Ø§Ø¡">Ù†Ø¸Ø§Ù… Ø§Ù„ÙƒÙ‡Ø±Ø¨Ø§Ø¡</option>
          <option value="Ù†Ø¸Ø§Ù… Ø§Ù„Ù…ÙŠØ§Ù‡">Ù†Ø¸Ø§Ù… Ø§Ù„Ù…ÙŠØ§Ù‡</option>
          <option value="Ù†Ø¸Ø§Ù… Ø§Ù„Ø¥Ù†Ø°Ø§Ø±">Ù†Ø¸Ø§Ù… Ø§Ù„Ø¥Ù†Ø°Ø§Ø±</option>
          <option value="Ø§Ù„Ø·ÙØ§ÙŠØ§Øª">Ø§Ù„Ø·ÙØ§ÙŠØ§Øª</option>
          <option value="Ù…Ø¹Ø¯Ø§Øª Ø·Ø¨ÙŠØ©">Ù…Ø¹Ø¯Ø§Øª Ø·Ø¨ÙŠØ©</option>
          <option value="Ø£Ø®Ø±Ù‰">Ø£Ø®Ø±Ù‰</option>
        </select>
      </div>
      <div>
        <label class="block text-sm font-semibold mb-1">Ø±Ù‚Ù…/Ù…ÙƒØ§Ù† Ø§Ù„Ø¬Ù‡Ø§Ø² *</label>
        <input name="equipment_location" required class="w-full border rounded-lg px-3 py-2" placeholder="Ø±Ù‚Ù… Ø£Ùˆ Ù…ÙƒØ§Ù† Ø§Ù„Ø¬Ù‡Ø§Ø²">
      </div>
      <div>
        <label class="block text-sm font-semibold mb-1">Ø§Ù„ÙÙ†ÙŠ Ø§Ù„Ù…Ø³Ø¤ÙˆÙ„ *</label>
        <input name="technician" required class="w-full border rounded-lg px-3 py-2" placeholder="Ø§Ø³Ù… Ø§Ù„ÙÙ†ÙŠ">
      </div>
      <div class="md:col-span-2">
        <label class="block text-sm font-semibold mb-1">Ø£Ø¹Ù…Ø§Ù„ Ø§Ù„ØµÙŠØ§Ù†Ø© Ø§Ù„Ù…Ù†ÙØ°Ø© *</label>
        <textarea name="maintenance_work" rows="3" required class="w-full border rounded-lg px-3 py-2" placeholder="ÙˆØµÙ Ø£Ø¹Ù…Ø§Ù„ Ø§Ù„ØµÙŠØ§Ù†Ø©..."></textarea>
      </div>
      <div>
        <label class="block text-sm font-semibold mb-1">Ø§Ù„Ø­Ø§Ù„Ø© Ø¨Ø¹Ø¯ Ø§Ù„ØµÙŠØ§Ù†Ø© *</label>
        <select name="status_after" required class="w-full border rounded-lg px-3 py-2">
          <option value="">Ø§Ø®ØªØ± Ø§Ù„Ø­Ø§Ù„Ø©</option>
          <option value="Ø¬ÙŠØ¯">Ø¬ÙŠØ¯</option>
          <option value="Ø¨Ø­Ø§Ø¬Ø© Ù„Ù‚Ø·Ø¹ ØºÙŠØ§Ø±">Ø¨Ø­Ø§Ø¬Ø© Ù„Ù‚Ø·Ø¹ ØºÙŠØ§Ø±</option>
          <option value="ÙŠØªØ·Ù„Ø¨ ØµÙŠØ§Ù†Ø© Ù…ØªØ®ØµØµØ©">ÙŠØªØ·Ù„Ø¨ ØµÙŠØ§Ù†Ø© Ù…ØªØ®ØµØµØ©</option>
          <option value="Ø®Ø§Ø±Ø¬ Ø§Ù„Ø®Ø¯Ù…Ø©">Ø®Ø§Ø±Ø¬ Ø§Ù„Ø®Ø¯Ù…Ø©</option>
        </select>
      </div>
      <div>
        <label class="block text-sm font-semibold mb-1">ØªØ§Ø±ÙŠØ® Ø§Ù„ØµÙŠØ§Ù†Ø© Ø§Ù„Ù‚Ø§Ø¯Ù…Ø©</label>
        <input type="date" name="next_maintenance" class="w-full border rounded-lg px-3 py-2">
      </div>
      <div class="md:col-span-2 flex items-center gap-3 pt-2">
        <button type="submit" class="px-4 py-2 rounded-lg bg-[var(--brand1)] text-white hover:bg-[var(--brand2)]">Ø­ÙØ¸ Ø§Ù„ØµÙŠØ§Ù†Ø©</button>
        <span id="fmsMaintenanceMsg" class="text-sm"></span>
      </div>
    </form>
  `;
  
  wrapper.appendChild(safetyRoundForm);
  wrapper.appendChild(maintenanceForm);
  container.appendChild(wrapper);
  
  // Ù…Ø¹Ø§Ù„Ø¬Ø© Ù†Ù…ÙˆØ°Ø¬ Ø¬ÙˆÙ„Ø© Ø§Ù„Ø³Ù„Ø§Ù…Ø©
  const safetyRoundFormElement = document.getElementById('fmsSafetyRoundForm');
  if (safetyRoundFormElement) {
    safetyRoundFormElement.addEventListener('submit', function(e) {
      e.preventDefault();
      const messageElement = document.getElementById('fmsRoundMsg');
      messageElement.textContent = 'Ø¬Ø§Ø±Ù Ø­ÙØ¸ Ø§Ù„Ø¬ÙˆÙ„Ø©...';
      messageElement.className = 'text-sm text-blue-600';
      
      // Ø­ÙØ¸ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ø­Ù„ÙŠØ§Ù‹
      const formData = new FormData(safetyRoundFormElement);
      const roundData = {};
      formData.forEach((value, key) => {
        roundData[key] = value;
      });
      roundData.timestamp = new Date().toISOString();
      
      // Ø­ÙØ¸ ÙÙŠ localStorage
      let rounds = JSON.parse(localStorage.getItem('fms_safety_rounds') || '[]');
      rounds.push(roundData);
      localStorage.setItem('fms_safety_rounds', JSON.stringify(rounds));
      
      messageElement.textContent = 'âœ… ØªÙ… Ø­ÙØ¸ Ø§Ù„Ø¬ÙˆÙ„Ø© Ø¨Ù†Ø¬Ø§Ø­';
      messageElement.className = 'text-sm text-green-600';
      safetyRoundFormElement.reset();
    });
  }
  
  // Ù…Ø¹Ø§Ù„Ø¬Ø© Ù†Ù…ÙˆØ°Ø¬ Ø§Ù„ØµÙŠØ§Ù†Ø©
  const maintenanceFormElement = document.getElementById('fmsMaintenanceForm');
  if (maintenanceFormElement) {
    maintenanceFormElement.addEventListener('submit', function(e) {
      e.preventDefault();
      const messageElement = document.getElementById('fmsMaintenanceMsg');
      messageElement.textContent = 'Ø¬Ø§Ø±Ù Ø­ÙØ¸ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„ØµÙŠØ§Ù†Ø©...';
      messageElement.className = 'text-sm text-blue-600';
      
      // Ø­ÙØ¸ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ø­Ù„ÙŠØ§Ù‹
      const formData = new FormData(maintenanceFormElement);
      const maintenanceData = {};
      formData.forEach((value, key) => {
        maintenanceData[key] = value;
      });
      maintenanceData.timestamp = new Date().toISOString();
      
      // Ø­ÙØ¸ ÙÙŠ localStorage
      let maintenanceRecords = JSON.parse(localStorage.getItem('fms_maintenance_records') || '[]');
      maintenanceRecords.push(maintenanceData);
      localStorage.setItem('fms_maintenance_records', JSON.stringify(maintenanceRecords));
      
      messageElement.textContent = 'âœ… ØªÙ… Ø­ÙØ¸ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„ØµÙŠØ§Ù†Ø© Ø¨Ù†Ø¬Ø§Ø­';
      messageElement.className = 'text-sm text-green-600';
      maintenanceFormElement.reset();
    });
  }
}

function renderFmsNeeds(container) {
  const needs = [
    { key: 'policy', text: 'Ø³ÙŠØ§Ø³Ø© Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø³Ù„Ø§Ù…Ø© ÙˆØ§Ù„Ù…Ø±Ø§ÙÙ‚ Ù…Ø¹ØªÙ…Ø¯Ø© (POL-FMS-2025-001)', required: true },
    { key: 'committee', text: 'Ù‚Ø±Ø§Ø± ØªØ´ÙƒÙŠÙ„ Ù„Ø¬Ù†Ø© Ø§Ù„Ø³Ù„Ø§Ù…Ø© Ù…ÙØ¹Ù„ (DEC-FMS-2025-001)', required: true },
    { key: 'emergency_plan', text: 'Ø®Ø·Ø© Ø§Ù„Ø·ÙˆØ§Ø±Ø¦ ÙˆØ§Ù„Ø¥Ø®Ù„Ø§Ø¡ Ù…Ø¹ØªÙ…Ø¯Ø© (PLN-FMS-2025-004)', required: true },
    { key: 'maintenance_plan', text: 'Ø®Ø·Ø© Ø§Ù„ØµÙŠØ§Ù†Ø© Ø§Ù„Ø·Ø§Ø±Ø¦Ø© Ù…Ø¹ØªÙ…Ø¯Ø© (PLN-FMS-2025-016)', required: true },
    { key: 'waste_plan', text: 'Ø®Ø·Ø© Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù†ÙØ§ÙŠØ§Øª Ù…Ø¹ØªÙ…Ø¯Ø© (PLN-FMS-2025-007)', required: true },
    { key: 'security_plan', text: 'Ø®Ø·Ø© Ø§Ù„Ø£Ù…Ù† Ø§Ù„Ù…Ø§Ø¯ÙŠ Ù„Ù„Ù…Ø±Ø§ÙÙ‚ Ù…Ø¹ØªÙ…Ø¯Ø© (PLN-FMS-2025-018)', required: true },
    { key: 'training_plan', text: 'Ø®Ø·Ø© ØªØ¯Ø±ÙŠØ¨ Ø§Ù„Ø£Ù…Ù† ÙˆØ§Ù„Ø³Ù„Ø§Ù…Ø© Ù…Ù†ÙØ°Ø© (TRN-FMS-2025-010)', required: true },
    { key: 'safety_rounds', text: 'Ø³Ø¬Ù„ Ø¬ÙˆÙ„Ø§Øª Ø§Ù„Ø³Ù„Ø§Ù…Ø© Ù…Ø­Ø¯Ø« (CHK-FMS-2025-009)', required: true },
    { key: 'maintenance_logs', text: 'Ø³Ø¬Ù„ Ø§Ù„ØµÙŠØ§Ù†Ø© Ø§Ù„ÙˆÙ‚Ø§Ø¦ÙŠØ© Ù…Ø­Ø¯Ø« (LOG-FMS-2025-005)', required: true },
    { key: 'incident_logs', text: 'Ø³Ø¬Ù„ Ø§Ù„Ø­ÙˆØ§Ø¯Ø« ÙˆØ§Ù„Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ù…Ø­Ø¯Ø« (LOG-FMS-2025-006)', required: true },
  ];
  
  const wrapper = document.createElement('div');
  wrapper.className = 'grid-cards';
  
  needs.forEach(need => {
    const card = document.createElement('div');
    card.className = 'p-4 rounded-xl border bg-white shadow-sm';
    card.innerHTML = `
      <label class="flex items-start gap-3 cursor-pointer">
        <input type="checkbox" class="mt-1 h-5 w-5" data-required="${need.required ? 1 : 0}">
        <span class="font-semibold">${need.text}</span>
      </label>
      ${need.required ? '<div class="text-xs text-red-600 mt-1">Ù…ØªØ·Ù„Ø¨ Ø¥Ù„Ø²Ø§Ù…ÙŠ</div>' : ''}
    `;
    wrapper.appendChild(card);
  });
  
  const actions = document.createElement('div');
  actions.className = 'pt-4 flex gap-3';
  actions.innerHTML = `
    <button class="px-4 py-2 rounded-lg bg-[var(--brand1)] text-white hover:bg-[var(--brand2)]" onclick="validateFmsNeeds()">
      ØªØ­Ù‚Ù‘Ù‚ Ù…Ù† Ø§Ù„Ø§ÙƒØªÙ…Ø§Ù„
    </button>
    <button class="px-4 py-2 rounded-lg border hover:bg-gray-50" onclick="generateFmsReport()">
      Ø¥Ù†Ø´Ø§Ø¡ ØªÙ‚Ø±ÙŠØ± Ø§Ù„Ø¬Ø§Ù‡Ø²ÙŠØ©
    </button>
  `;
  
  container.appendChild(wrapper);
  container.appendChild(actions);
}

function validateFmsNeeds() {
  const requiredCheckboxes = [...document.querySelectorAll('#fmsTabContent input[data-required="1"]')];
  const missingCount = requiredCheckboxes.filter(checkbox => !checkbox.checked).length;
  
  if (missingCount === 0) {
    alert('Ù…Ù…ØªØ§Ø² âœ… â€” Ø¬Ù…ÙŠØ¹ Ù…ØªØ·Ù„Ø¨Ø§Øª Ø§Ù„Ø³Ù„Ø§Ù…Ø© ÙˆØ§Ù„Ù…Ø±Ø§ÙÙ‚ Ø§Ù„Ø¥Ù„Ø²Ø§Ù…ÙŠØ© Ù…ÙƒØªÙ…Ù„Ø©.');
  } else {
    alert(`âš ï¸ ØªÙ†Ø¨ÙŠÙ‡: ÙŠÙˆØ¬Ø¯ ${missingCount} Ù…ØªØ·Ù„Ø¨(Ø§Øª) Ø¥Ù„Ø²Ø§Ù…ÙŠ ØºÙŠØ± Ù…ÙƒØªÙ…Ù„ ÙÙŠ Ù‚Ø³Ù… Ø§Ù„Ø³Ù„Ø§Ù…Ø© ÙˆØ§Ù„Ù…Ø±Ø§ÙÙ‚.`);
  }
}

function generateFmsReport() {
  const checkboxes = [...document.querySelectorAll('#fmsTabContent input[type="checkbox"]')];
  const checkedCount = checkboxes.filter(checkbox => checkbox.checked).length;
  const totalCount = checkboxes.length;
  const percentage = Math.round((checkedCount / totalCount) * 100);
  
  alert(`ğŸ“‹ ØªÙ‚Ø±ÙŠØ± Ø¬Ø§Ù‡Ø²ÙŠØ© Ø§Ù„Ø³Ù„Ø§Ù…Ø© ÙˆØ§Ù„Ù…Ø±Ø§ÙÙ‚:\n\nâœ… ${checkedCount} Ù…Ù† ${totalCount} Ø¨Ù†Ø¯ Ù…ÙƒØªÙ…Ù„\nğŸ“Š Ù†Ø³Ø¨Ø© Ø§Ù„Ø¥ÙƒÙ…Ø§Ù„: ${percentage}%\n\n${percentage >= 80 ? 'Ù…Ø³ØªÙˆÙ‰ Ø¬ÙŠØ¯ âœ“' : 'ÙŠØ­ØªØ§Ø¬ Ø¥Ù„Ù‰ ØªØ­Ø³ÙŠÙ† âš ï¸'}`);
}

  // ====== Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„ØªÙ…Ø±ÙŠØ± ======
  function setupScrollTop() {
    const scrollBtn = document.getElementById('scrollTopBtn');
    window.addEventListener('scroll', () => {
      scrollBtn.style.display = window.scrollY > 300 ? 'grid' : 'none';
    });
  }

  // ====== ØªÙ‡ÙŠØ¦Ø© Ø§Ù„ØµÙØ­Ø© Ø¹Ù†Ø¯ Ø§Ù„ØªØ­Ù…ÙŠÙ„ ======
  document.addEventListener('DOMContentLoaded', () => {
    // ØªÙ‡ÙŠØ¦Ø© Ù…ÙƒØªØ¨Ø© RM Ø¹Ù†Ø¯ Ø§Ù„ØªØ­Ù…ÙŠÙ„
    try { 
      if (document.getElementById('rmLib')) { renderRMLibrary(); } 
    } catch (e) { console.warn('RM init skipped:', e); }
    
    // ØªÙ‡ÙŠØ¦Ø© Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø´Ø¹Ø§Ø±
    setupLogoChange();
    loadSavedLogo();
    
    // ØªÙ‡ÙŠØ¦Ø© Ø§Ù„ØªÙ…Ø±ÙŠØ± Ù„Ù„Ø£Ø¹Ù„Ù‰
    setupScrollTop();
// ØªÙ‡ÙŠØ¦Ø© Ø§Ù„ØªÙ†Ù‚Ù„ (Ù†Ø³Ø®Ø© Ù…Ø­Ø³Ù†Ø©)
Â  Â  if (window.location.hash) {
Â  Â  Â  const targetSection = window.location.hash.substring(1);
Â  Â  Â  // Ø§Ù„ØªØ­Ù‚Ù‚ Ø£Ù† Ø§Ù„Ø±Ø§Ø¨Ø· ØµØ­ÙŠØ­ ÙˆÙ…ÙˆØ¬ÙˆØ¯
Â  Â  Â  if (document.getElementById(targetSection)) {
Â  Â  Â  Â  navTo(targetSection);
Â  Â  Â  } else {
Â  Â  Â  Â  // Ø¥Ø°Ø§ ÙƒØ§Ù† Ø§Ù„Ø±Ø§Ø¨Ø· Ø®Ø·Ø£ØŒ Ø§Ø°Ù‡Ø¨ Ù„Ù„Ø±Ø¦ÙŠØ³ÙŠØ©
Â  Â  Â  Â  window.location.hash = '#home'; // ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ø±Ø§Ø¨Ø·
Â  Â  Â  Â  navTo('home');
Â  Â  Â  }
Â  Â  } else {
Â  Â  Â  // Ø¥Ø°Ø§ Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ø±Ø§Ø¨Ø·ØŒ Ø§Ø°Ù‡Ø¨ Ù„Ù„Ø±Ø¦ÙŠØ³ÙŠØ©
Â  Â  Â  navTo('home');
Â  Â  }
  });
</script>
</body>
</html>
