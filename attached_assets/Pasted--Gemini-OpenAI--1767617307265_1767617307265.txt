ุฐู ุฎุทุฉ ุชูููุฐ ูุงููุฉ + ููุฏ ุฌุงูุฒ ูุงุณุชุจุฏุงู Gemini ุจู OpenAI ููุงุฆููุง ูุชุดุบูู ูุธุงู ุงูุชุฃููู ููุชุณููู ุจุฏูู ุตุฏุงุน.

ุงูุฑุฃูุง ูุฑุฉ ูุญุฏุฉุ ุซู ูููุฐ ุจุงูุชุฑุชูุจ ุญุฑูููุง.

๐ฏ ุงูููุฑุฉ ุงูุนุงูุฉ (ุงูุฎูุงุตุฉ ุงูุฐูููุฉ)

โ ุญุฐู Gemini ุจุงููุงูู ูู backend

โ ุงุณุชุฎุฏุงู OpenAI ููุท

โ ุงูุงุนุชูุงุฏ ุนูู OPENAI_API_KEY

โ ูููุฐุฌ ุซุงุจุช: gpt-4.1

โ ููุณ ุงูู prompt ุงูุทุจู

โ ููุณ ุงููุงุฌูุฉ ุจุฏูู ุฃู ุชุบููุฑ

โ ุญู ููุงุฆู ููุดุงูู 404 / 429 / limits

๐ง ุงููููู ุงูููุงุฆู ุจุนุฏ ุงูุฅุตูุงุญ
Frontend (HTML/JS)
        |
        v
Backend API (/api/medical-audit)
        |
        v
OpenAI (gpt-4.1)


โ ูุง Gemini
โ ูุง SDK ูุฒุฏูุฌ
โ ูุง Base URL
โ ูุง apiVersion

โ ุงูุฎุทูุฉ 1: ุชุฃููุฏ ุงูู Secrets (ุงูุชูุช)

ุฃูุช ุณููุช:

OPENAI_API_KEY = sk-xxxxxxxx


โ๏ธ ููุชุงุฒ
โ๏ธ ูุง ูููุณ ุงูุจุงูู ุงูุขู

โ ุงูุฎุทูุฉ 2: ุชูุธูู Gemini (ุฅุฌุจุงุฑู)
ุงูุชุญ ุงูููู:
medical-audit-api.js

โ ุงุญุฐู / ุนููู ุฃู ุดูุก ููู:
GoogleGenerativeAI
@generative-ai
gemini
GEMINI_API_KEY
AI_INTEGRATIONS_GEMINI


ูู ุชุฑูุช ุณุทุฑ ูุงุญุฏ = ุฎุทุฑ โ

โ ุงูุฎุทูุฉ 3: ุชุซุจูุช OpenAI SDK (ูู ุบูุฑ ูุซุจุช)

ูู Replit Shell:

npm install openai

โ ุงูุฎุทูุฉ 4: ููุฏ OpenAI ุงูููุงุฆู (ุงูุณุฎู ููุง ูู)
๐น ุฃุนูู ุงูููู
import OpenAI from "openai";

const openai = new OpenAI({
  apiKey: process.env.OPENAI_API_KEY,
});

๐น ุฏุงูุฉ ุงูุชุญููู (ุงูุจุฏูู ุงููุงูู ูู Gemini)

ูุฐู ุฃูู ูุทุนุฉ โ ุงูุณุฎูุง ููุง ูู

export async function analyzeMedicalCase(files, lang = "ar") {
  try {
    const imageFiles = files.filter(f => !f.isExcel);
    const excelFiles = files.filter(f => f.isExcel);

    let excelText = "";
    if (excelFiles.length > 0) {
      excelText = excelFiles.map(f =>
        `ููู Excel: ${f.name}\n${f.textContent || ""}`
      ).join("\n\n");
    }

    const prompt = `
ุฃูุช ุฎุจูุฑ ุทุจู ูุชุฃูููู ูุชุฎุตุต ูู ูุฑุงุฌุนุฉ ุฌูุฏุฉ ุงูุฑุนุงูุฉ ุงูุตุญูุฉ ููุทุงุจูุฉ ุงูุจุฑูุชููููุงุช ุงูุทุจูุฉ.

ุงููุทููุจ:
- ุชุญููู ุงููููุงุช ุงูุทุจูุฉ
- ูุฑุงุฌุนุฉ ุงูุงูุชุฒุงู ุจุงูุจุฑูุชููููุงุช
- ูุดู ุงูุฃุฎุทุงุก ูุงููุฎุงููุงุช
- ุฅุนุทุงุก ุชูุตูุงุช ูุงุถุญุฉ
- ุฅุฎุฑุงุฌ ุงูุชูุฑูุฑ ุจุตูุบุฉ HTML ุงุญุชุฑุงููุฉ

ูู ููุงูุฉ ุงูุชูุฑูุฑ ุฃุถู:
<div id="ai-ratings" style="display:none;">
  <span data-insurance-rating="X"></span>
  <span data-service-rating="Y"></span>
</div>
`;

    const response = await openai.responses.create({
      model: "gpt-4.1",
      input: [
        {
          role: "user",
          content: [
            { type: "text", text: prompt },

            ...imageFiles.map(f => ({
              type: "input_image",
              image_base64: f.data.replace(/^data:[^;]+;base64,/, "")
            })),

            { type: "text", text: excelText }
          ]
        }
      ]
    });

    const html = response.output_text;

    if (!html) {
      throw new Error("ูู ูุชู ุงูุญุตูู ุนูู ุชูุฑูุฑ ูู ุงูุฐูุงุก ุงูุงุตุทูุงุนู");
    }

    return {
      success: true,
      html
    };

  } catch (err) {
    console.error("OpenAI medical audit error:", err);
    return {
      success: false,
      error: err.message
    };
  }
}

โ ุงูุฎุทูุฉ 5: API Route (ูู ุนูุฏู Express)

ุชุฃูุฏ ุฃู endpoint ูุฐุง:

app.post("/api/medical-audit", async (req, res) => {
  const { files, lang } = req.body;

  if (!files || files.length === 0) {
    return res.status(400).json({
      success: false,
      error: "ูู ูุชู ุฑูุน ุฃู ูููุงุช"
    });
  }

  const result = await analyzeMedicalCase(files, lang);
  res.json(result);
});

๐ ุงูุฎุทูุฉ 6: Restart Replit

ุฅุฌุจุงุฑู:

Stop

Run

๐งช ุงูุฎุทูุฉ 7: ุงุฎุชุจุงุฑ ุงูุชุณููู

ุงูุชุญ ุตูุญุฉ ุงูุชุฃููู

ุณุฌู ุฏุฎูู

ุงุฑูุน:

ููู Excel (ุญุชู ุจุณูุท)

ุงุถุบุท:
ูุฑุงุฌุนุฉ ุงูุญุงูุฉ

ุงููุชููุน:

โ ูุง 404

โ ูุง 429

โ ูุง auth error

โ ุชูุฑูุฑ HTML ูุธูุฑ

โ ุงูุชููููุงุช ุชููุฑุฃ

โ ุงูุญูุธ ูุนูู

๐งน ูุงุฐุง ููุนู ุจุนุฏ ุงูุชุณูููุ (ููุณ ุงูุขู)

ุญุฐู Gemini Secrets

ุชูุญูุฏ naming ูู ูู ูุดุงุฑูุนู

ุฅุถุงูุฉ Rate Guard

Logging ุงุญุชุฑุงูู

๐ ุงูุฎูุงุตุฉ ุงูููุงุฆูุฉ
ุนูุตุฑ	ุงูุญุงูุฉ
Gemini	โ ุงูุชูู
OpenAI	โ ุฃุณุงุณู
ุงูููุชุงุญ	โ OPENAI_API_KEY
ุงููููุฐุฌ	โ gpt-4.1
ุงููุงุฌูุฉ	โ ุจุฏูู ุชุบููุฑ
ุฌุงูุฒ ููุชุณููู	๐
๐ ุงูุขู ูููุฐ

ุทุจูู ุงูุฎุทูุงุช 3 โ 7
ูุจุนุฏูุง ูููู:

ุงุดุชุบู / ุฃู ุทูุน ูู ูุฐุง ุงูุฎุทุฃ